<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>“面向对象程序设计与python语言”讲义</title>
<!-- 2018-02-26 一 21:01 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="陈飞 [[mailto:dlmucf@163.com][联系作者]]联系作者" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="./css/style.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">“面向对象程序设计与python语言”讲义</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 第一章　安装并搭建环境</a>
<ul>
<li><a href="#sec-1-1">1.1. python版本</a></li>
<li><a href="#sec-1-2">1.2. 安装</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1. windows</a></li>
<li><a href="#sec-1-2-2">1.2.2. linux</a></li>
<li><a href="#sec-1-2-3">1.2.3. 虚拟环境</a></li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. 编程环境</a></li>
<li><a href="#sec-1-4">1.4. 立即使用</a>
<ul>
<li><a href="#sec-1-4-1">1.4.1. 交互模式 interactive mode</a></li>
<li><a href="#sec-1-4-2">1.4.2. 脚本模式 script mode</a></li>
</ul>
</li>
<li><a href="#sec-1-5">1.5. 编程话题</a>
<ul>
<li><a href="#sec-1-5-1">1.5.1. 编程所学技能</a></li>
<li><a href="#sec-1-5-2">1.5.2. 编程完成算计computation任务</a></li>
<li><a href="#sec-1-5-3">1.5.3. 计算机程序设计语言</a></li>
<li><a href="#sec-1-5-4">1.5.4. 简介</a></li>
</ul>
</li>
<li><a href="#sec-1-6">1.6. 课后阅读</a></li>
</ul>
</li>
<li><a href="#sec-2">2. 第二章　基本数据类型</a>
<ul>
<li><a href="#sec-2-1">2.1. 万物皆对象</a>
<ul>
<li><a href="#sec-2-1-1">2.1.1. 数据类型</a></li>
</ul>
</li>
<li><a href="#sec-2-2">2.2. 字面量</a></li>
<li><a href="#sec-2-3">2.3. 数字</a>
<ul>
<li><a href="#sec-2-3-1">2.3.1. 整数</a></li>
<li><a href="#sec-2-3-2">2.3.2. 浮点数</a></li>
<li><a href="#sec-2-3-3">2.3.3. 复数</a></li>
</ul>
</li>
<li><a href="#sec-2-4">2.4. 运算符</a></li>
<li><a href="#sec-2-5">2.5. 初识字符串</a>
<ul>
<li><a href="#sec-2-5-1">2.5.1. 字符的转义 escape</a></li>
<li><a href="#sec-2-5-2">2.5.2. 课后阅读</a></li>
</ul>
</li>
<li><a href="#sec-2-6">2.6. 变量</a></li>
<li><a href="#sec-2-7">2.7. 表达式和语句</a>
<ul>
<li><a href="#sec-2-7-1">2.7.1. python独特赋值语句</a></li>
<li><a href="#sec-2-7-2">2.7.2. 介绍两个语句</a></li>
</ul>
</li>
<li><a href="#sec-2-8">2.8. 初识函数和模块</a>
<ul>
<li><a href="#sec-2-8-1">2.8.1. 函数</a></li>
<li><a href="#sec-2-8-2">2.8.2. 模块 modules</a></li>
</ul>
</li>
<li><a href="#sec-2-9">2.9. 小结</a></li>
</ul>
</li>
<li><a href="#sec-3">3. 第三章　控制流：选择与循环</a>
<ul>
<li><a href="#sec-3-1">3.1. python代码风格</a></li>
<li><a href="#sec-3-2">3.2. 语句块</a></li>
<li><a href="#sec-3-3">3.3. 条件表达式</a>
<ul>
<li><a href="#sec-3-3-1">3.3.1. 条件表达式的组合</a></li>
<li><a href="#sec-3-3-2">3.3.2. 辨析 == 和 is</a></li>
</ul>
</li>
<li><a href="#sec-3-4">3.4. 分支结构（选择结构）</a>
<ul>
<li><a href="#sec-3-4-1">3.4.1. 单分支</a></li>
<li><a href="#sec-3-4-2">3.4.2. 双分支</a></li>
<li><a href="#sec-3-4-3">3.4.3. 多分支</a></li>
<li><a href="#sec-3-4-4">3.4.4. 分支嵌套</a></li>
<li><a href="#sec-3-4-5">3.4.5. 断言 assertions</a></li>
</ul>
</li>
<li><a href="#sec-3-5">3.5. 循环</a>
<ul>
<li><a href="#sec-3-5-1">3.5.1. while</a></li>
<li><a href="#sec-3-5-2">3.5.2. for</a></li>
<li><a href="#sec-3-5-3">3.5.3. break和continue</a></li>
</ul>
</li>
<li><a href="#sec-3-6">3.6. 再识python代码风格</a>
<ul>
<li><a href="#sec-3-6-1">3.6.1. 阅读：</a></li>
<li><a href="#sec-3-6-2">3.6.2. 课后自学</a></li>
</ul>
</li>
<li><a href="#sec-3-7">3.7. 课上练习</a></li>
<li><a href="#sec-3-8">3.8. 课后作业</a></li>
</ul>
</li>
<li><a href="#sec-4">4. 第四章　高级数据类型</a>
<ul>
<li><a href="#sec-4-1">4.1. python内置数据类型</a></li>
<li><a href="#sec-4-2">4.2. 列表</a>
<ul>
<li><a href="#sec-4-2-1">4.2.1. 创建与删除列表</a></li>
<li><a href="#sec-4-2-2">4.2.2. 常用序列操作</a></li>
<li><a href="#sec-4-2-3">4.2.3. 添加、修改、删除列表元素</a></li>
<li><a href="#sec-4-2-4">4.2.4. 列表方法</a></li>
<li><a href="#sec-4-2-5">4.2.5. 列表推导</a></li>
</ul>
</li>
<li><a href="#sec-4-3">4.3. 元组</a>
<ul>
<li><a href="#sec-4-3-1">4.3.1. 创建元组</a></li>
<li><a href="#sec-4-3-2">4.3.2. 元组操作</a></li>
<li><a href="#sec-4-3-3">4.3.3. 生成器推导式</a></li>
</ul>
</li>
<li><a href="#sec-4-4">4.4. 字典</a>
<ul>
<li><a href="#sec-4-4-1">4.4.1. 字典用场</a></li>
<li><a href="#sec-4-4-2">4.4.2. 创建和使用</a></li>
<li><a href="#sec-4-4-3">4.4.3. 字典操作</a></li>
<li><a href="#sec-4-4-4">4.4.4. 字典方法</a></li>
</ul>
</li>
<li><a href="#sec-4-5">4.5. 集合</a>
<ul>
<li><a href="#sec-4-5-1">4.5.1. 创建、修改、删除</a></li>
<li><a href="#sec-4-5-2">4.5.2. 集合操作</a></li>
</ul>
</li>
<li><a href="#sec-4-6">4.6. 再识字符串</a>
<ul>
<li><a href="#sec-4-6-1">4.6.1. 基本操作</a></li>
<li><a href="#sec-4-6-2">4.6.2. 字符串的格式化</a></li>
<li><a href="#sec-4-6-3">4.6.3. 字符串方法</a></li>
</ul>
</li>
<li><a href="#sec-4-7">4.7. 其他高级数据结构</a></li>
</ul>
</li>
<li><a href="#sec-5">5. 第五章　抽象－－函数</a>
<ul>
<li><a href="#sec-5-1">5.1. 缘由</a></li>
<li><a href="#sec-5-2">5.2. 抽象和结构</a></li>
<li><a href="#sec-5-3">5.3. 定义和调用</a>
<ul>
<li><a href="#sec-5-3-1">5.3.1. 函数的返回值</a></li>
<li><a href="#sec-5-3-2">5.3.2. 函数的保存、常见python文件扩展名</a></li>
</ul>
</li>
<li><a href="#sec-5-4">5.4. 形式参数、实际参数、传值调用、引用调用</a></li>
<li><a href="#sec-5-5">5.5. 参数类型</a>
<ul>
<li><a href="#sec-5-5-1">5.5.1. 位置参数</a></li>
<li><a href="#sec-5-5-2">5.5.2. 关键字参数</a></li>
<li><a href="#sec-5-5-3">5.5.3. 可变长参数</a></li>
<li><a href="#sec-5-5-4">5.5.4. 反向过程</a></li>
</ul>
</li>
<li><a href="#sec-5-6">5.6. 作用域、命名空间</a>
<ul>
<li><a href="#sec-5-6-1">5.6.1. 递归</a></li>
</ul>
</li>
<li><a href="#sec-5-7">5.7. lambda　表达式</a></li>
<li><a href="#sec-5-8">5.8. Batteries Included及自学门径</a>
<ul>
<li><a href="#sec-5-8-1">5.8.1. 模块中的函数</a></li>
<li><a href="#sec-5-8-2">5.8.2. 在模块中加入测试语句</a></li>
<li><a href="#sec-5-8-3">5.8.3. 自定义模块在哪里</a></li>
<li><a href="#sec-5-8-4">5.8.4. 包</a></li>
<li><a href="#sec-5-8-5">5.8.5. 自学模块</a></li>
</ul>
</li>
<li><a href="#sec-5-9">5.9. <span class="todo NEXT">NEXT</span> 补充练习例子</a></li>
</ul>
</li>
<li><a href="#sec-6">6. 第六章　抽象－－对象</a>
<ul>
<li><a href="#sec-6-1">6.1. 一切皆对象</a>
<ul>
<li><a href="#sec-6-1-1">6.1.1. 数据类型</a></li>
<li><a href="#sec-6-1-2">6.1.2. 类</a></li>
<li><a href="#sec-6-1-3">6.1.3. 实例</a></li>
<li><a href="#sec-6-1-4">6.1.4. 类的例子</a></li>
<li><a href="#sec-6-1-5">6.1.5. 对象表示法</a></li>
<li><a href="#sec-6-1-6">6.1.6. 案例1: 简易记事本</a></li>
</ul>
</li>
<li><a href="#sec-6-2">6.2. 对象特征</a>
<ul>
<li><a href="#sec-6-2-1">6.2.1. 封装</a></li>
<li><a href="#sec-6-2-2">6.2.2. 继承</a></li>
<li><a href="#sec-6-2-3">6.2.3. 多态</a></li>
<li><a href="#sec-6-2-4">6.2.4. python类的特别性质</a></li>
<li><a href="#sec-6-2-5">6.2.5. 案例2： 房地产管理应用程序</a></li>
<li><a href="#sec-6-2-6">6.2.6. 案例3: 计算多边形边长</a></li>
<li><a href="#sec-6-2-7">6.2.7. 案例4: Modeling a <i>Document</i> class that might be used in a text editor or word processor</a></li>
</ul>
</li>
<li><a href="#sec-6-3">6.3. gui编程</a></li>
<li><a href="#sec-6-4">6.4. <span class="todo TODO">TODO</span> Event-driven programming</a></li>
</ul>
</li>
<li><a href="#sec-7">7. 第七章　异常</a>
<ul>
<li><a href="#sec-7-1">7.1. 异常对象</a></li>
<li><a href="#sec-7-2">7.2. 爆出异常</a></li>
<li><a href="#sec-7-3">7.3. 自定义异常</a></li>
<li><a href="#sec-7-4">7.4. 捕捉异常的结构</a>
<ul>
<li><a href="#sec-7-4-1">7.4.1. 基本结构</a></li>
<li><a href="#sec-7-4-2">7.4.2. 多个except子句</a></li>
<li><a href="#sec-7-4-3">7.4.3. 访问异常对象</a></li>
<li><a href="#sec-7-4-4">7.4.4. else子句</a></li>
<li><a href="#sec-7-4-5">7.4.5. 例子</a></li>
</ul>
</li>
<li><a href="#sec-7-5">7.5. 调试和测试</a></li>
</ul>
</li>
<li><a href="#sec-8">8. 第八章　文件</a>
<ul>
<li><a href="#sec-8-1">8.1. 打开文件</a>
<ul>
<li><a href="#sec-8-1-1">8.1.1. 文件打开模式</a></li>
<li><a href="#sec-8-1-2">8.1.2. 缓存</a></li>
</ul>
</li>
<li><a href="#sec-8-2">8.2. 文件操作</a>
<ul>
<li><a href="#sec-8-2-1">8.2.1. 读写文件内容</a></li>
<li><a href="#sec-8-2-2">8.2.2. 按行读写文件</a></li>
<li><a href="#sec-8-2-3">8.2.3. 读写二进制文件、操作目录</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-9">9. 第九章　高级特性</a>
<ul>
<li><a href="#sec-9-1">9.1. iterator</a></li>
<li><a href="#sec-9-2">9.2. generator</a></li>
<li><a href="#sec-9-3">9.3. 并发</a>
<ul>
<li><a href="#sec-9-3-1">9.3.1. 线程</a></li>
<li><a href="#sec-9-3-2">9.3.2. 多进程</a></li>
<li><a href="#sec-9-3-3">9.3.3. 异步输入输出</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-10">10. 第十章  实验课程</a>
<ul>
<li><a href="#sec-10-1">10.1. 打包程序</a></li>
<li><a href="#sec-10-2">10.2. 科学计算与可视化</a></li>
<li><a href="#sec-10-3">10.3. 机器学习&#x2013;决策树</a></li>
<li><a href="#sec-10-4">10.4. 网络编程flask, django</a></li>
<li><a href="#sec-10-5">10.5. 数字图像处理</a></li>
<li><a href="#sec-10-6">10.6. 自然语言处理</a></li>
<li><a href="#sec-10-7">10.7. 语音处理</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="org-src-container">

<pre class="src src-python"></pre>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 第一章　安装并搭建环境</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> python版本</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>python版本有两个系列,2.x与3.x,不兼容
</li>
<li><a href="https://pythonclock.org/">python倒计时</a>
</li>
<li>学习、使用选择3.x
</li>
<li>查看python版本
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> sys

sys.version
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">sys.winver</span>
sys.version_info
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> 安装</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> windows</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
Anaconda Suite for Windows,下载地址: <a href="https://www.anaconda.com">https://www.anaconda.com</a>
</p>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> linux</h4>
<div class="outline-text-4" id="text-1-2-2">
<ul class="org-ul">
<li>绝大部分Linux发行版自带Python2。使用python3需另安装。
</li>
<li>安装Anaconda Suite for Linux，不用操心版本、扩展库兼容问题。
</li>
<li>安装指南：<a href="https://poweruphosting.com/blog/install-anaconda-python-ubuntu-16-04/">How to Install anaconda in ubuntu 16.04</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> 虚拟环境</h4>
<div class="outline-text-4" id="text-1-2-3">
<ul class="org-ul">
<li>pyvenv – A tool to create isolated virtual environments from a Python
</li>
</ul>
<p>
interpreter. Ships with Python from 3.4.
<a href="https://docs.python.org/3/library/venv.html">https://docs.python.org/3/library/venv.html</a>
</p>
<ul class="org-ul">
<li>virtualenv – Creates virtual environments, available in PyPi. It can
</li>
</ul>
<p>
installs different versions of Python interpreters
<a href="https://pypi.python.org/pypi/virtualenv">https://pypi.python.org/pypi/virtualenv</a>
</p>
<ul class="org-ul">
<li>pyenv – 另有一个名字相近的包，切勿混淆。A Python version
manager. Installs different versions and flavors of Python
interpreters.
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> 编程环境</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>Jupyter Notebook
</li>
<li>IDLE
</li>
<li>command line
</li>
<li>github： <a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000">廖雪峰的git教程</a>, <a href="./img/GitHub.jpg">《GitHub入门与实践》</a>
</li>
<li>记笔记： EverNote, WizNote, 
</li>
<li>协同写实验报告: google doc, <a href="https://yiqixie.com">一起写</a>
</li>
<li>展示代码运行工具： www.pythontutor.com
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> 立即使用</h3>
<div class="outline-text-3" id="text-1-4">
</div><div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> 交互模式 interactive mode</h4>
<div class="outline-text-4" id="text-1-4-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Hello, World!'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-4-2" class="outline-4">
<h4 id="sec-1-4-2"><span class="section-number-4">1.4.2</span> 脚本模式 script mode</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
<a href="./py/1_hello.py">hello.py</a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> 编程话题</h3>
<div class="outline-text-3" id="text-1-5">
</div><div id="outline-container-sec-1-5-1" class="outline-4">
<h4 id="sec-1-5-1"><span class="section-number-4">1.5.1</span> 编程所学技能</h4>
<div class="outline-text-4" id="text-1-5-1">
<ul class="org-ul">
<li>计算思维 Computational thinking.<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup>
</li>
<li>阅读并理解别人的代码 Understand code.  Reading code is one of the
best way to learn programming, beside writing code.
</li>
<li>理解计算的能与不能 Understand limits &amp; abilities.  Something(not
everything) can be computed.
</li>
<li>解决问题 Map problem into computational solution.　观察、提出问题、
分析问题、提出方案、设计实验、分析结果、解决问题及总结。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-5-2" class="outline-4">
<h4 id="sec-1-5-2"><span class="section-number-4">1.5.2</span> 编程完成算计computation任务</h4>
<div class="outline-text-4" id="text-1-5-2">
<ul class="org-ul">
<li>计算只是算计的一方面。 Calculation is just one aspect of
computation.算计用于决策。
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-1-5-2-1" name="sec-1-5-2-1"></a>知识分类<br  /><div class="outline-text-5" id="text-1-5-2-1">
<ul class="org-ul">
<li>陈述(描述、说明)式知识　declaritive knowledge
<ul class="org-ul">
<li>有关事实和情况的说明 statement of facts
</li>
<li>例： 饭店的菜肴介绍，包括配料成分、色香味、照片
</li>
<li>例： 算术，包括数字，自然数、有理数；算符，加减乘除
</li>
</ul>
</li>
<li>过程（行动、程序、指令）式知识 imperative(procedure) knowledge
<ul class="org-ul">
<li>有关完成某件工作的一系列步骤（操作）的描述 a description of how to
deduce something
</li>
<li>例： 菜肴的烹制方法和过程，各种相关操作及其执行顺序（例：西红柿
炒蛋）
</li>
<li>例： 四则运算法则，先乘除后加减
</li>
<li>用一系列步骤描述 <b>计算过程</b>
</li>
</ul>
</li>
<li>算计就是刻画过程式知识的方法
<ul class="org-ul">
<li>例： 欧几里德算法又称辗转相除法，用于计算两个整数m, n的最大公约数。其计
算原理依赖于下面的定理：gcd(m, n) = gcd(n, m mod n)。这个定理的意思
是：整数m、n的最大公约数等于n和m除以n的余数的最大公约数。
</li>
<li>例： 有两个整数：120和45，我们按照上面的方法求他们的最大公约数。
<ol class="org-ol">
<li>gcd(120, 45) = gcd(45, 120 % 45) = gcd(45, 30)
</li>
<li>gcd(45, 30) = gcd(30, 45 % 30) = gcd(30, 15)
</li>
<li>gcd(30, 15) = gcd(15, 30 % 15) = gcd(15, 0) = 15
</li>
</ol>
<p>
当 m % n 等于零时，即求15和0的最大公约数时，这个循环应该终止，15就
是120和45的最大公约数。
</p>
</li>
<li>刻画的是计算过程，而不是数，或加减乘除应该怎么做
</li>
</ul>
</li>
<li>编程，将过程式知识，通过计算机程序设计语言，以程序方式表达，并具备可
执行能力
</li>
</ul>
</div>
</li>

<li><a id="sec-1-5-2-2" name="sec-1-5-2-2"></a>如何执行呢？<br  /><div class="outline-text-5" id="text-1-5-2-2">
<ul class="org-ul">
<li>机械计算机器　Mechanical Computation
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Mechanical_computer">https://en.wikipedia.org/wiki/Mechanical_computer</a>
</li>
<li><a href="https://en.wikipedia.org/wiki/Mechanical_calculator">https://en.wikipedia.org/wiki/Mechanical_calculator</a>
</li>
<li><a href="http://www.computerhistory.org/babbage/engines">http://www.computerhistory.org/babbage/engines</a>
</li>
</ul>
</li>
<li>固定程序计算机　fixed-program computer
<ul class="org-ul">
<li>卡西欧计算器　Casio Calculator
</li>
<li>计算弹道　The computer designed to compute the trajectory of artillery
</li>
<li>破解密码　Alan Turing desinged a computer to break the enigma code
</li>
<li>固定程序计算机只能完成指定任务，无法扩展(extensibility)
</li>
</ul>
</li>
<li>可编程计算机 Programmable Computer
</li>
</ul>


<div class="figure">
<p><img src="./img/1_programmable_computer.png" alt="1_programmable_computer.png" />
</p>
<p><span class="figure-number">Figure 1:</span> 可编程计算机执行指令示意</p>
</div>
</div>
</li>

<li><a id="sec-1-5-2-3" name="sec-1-5-2-3"></a>编程序<br  /><div class="outline-text-5" id="text-1-5-2-3">
<ul class="org-ul">
<li>编程： 告诉计算机做什么。程序用某种计算机能理解的语言编写算法，输入
计算机，计算机编译或解释执行语言，实现功能。
</li>
<li>算法： 类似教程、说明、手册、菜谱，详细说明做事步骤。
</li>
<li>例： 西红柿炒蛋
</li>
</ul>

<pre class="example">
  放入鸡蛋翻炒
  放入西红柿
　如果　没熟：
　　　　继续翻炒
　　　　直至熟了，不再翻炒
  加盐调味
  如果　不入味：
　　　　继续加盐
　　　　直至口感合适
  出锅盛盘
</pre>

<ul class="org-ul">
<li>该算法包含成分ingredients(object, things)，如鸡蛋、西红柿、盐，代表被操作的数据，及指
令(instructions, statement)，如放入、翻炒、加盐、出锅，代表操作动作。
</li>
<li>例:欧几里得法
</li>
</ul>


<div class="figure">
<p><img src="./img/EuclideanAlgorithm.jpeg" alt="EuclideanAlgorithm.jpeg" />
</p>
<p><span class="figure-number">Figure 2:</span> 欧几里得算法流程图</p>
</div>

<ul class="org-ul">
<li>算法、程序可修改,即可编程(programmable).If you don't like something, change it.
</li>
<li>尤其在自由软件（Free software）、开源（Open source）、社会化编程
（Social programming）影响下，获得、学习、改进开源程序成为风尚。
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-1-5-3" class="outline-4">
<h4 id="sec-1-5-3"><span class="section-number-4">1.5.3</span> 计算机程序设计语言</h4>
<div class="outline-text-4" id="text-1-5-3">
<ul class="org-ul">
<li>1936年，Alan Turing认为用6条基本指令，一切都可以解决。由此推论，只要
能在一种语言中实现，就能在另一种语言中实现。 C中能实现的没有Fortran
不能实现的。称这为“图灵兼容”(Turing compatible)。
</li>
<li>语言即工具。图灵兼容意义上无差别，实际使用中分高下。每种语言有其特别
适用处。
</li>
<li>语言分类
<ul class="org-ul">
<li>高级语言 high level vs. 低级语言 low level（与机器语言的远近）
</li>
<li>通用 general vs. 专用 targeted
</li>
<li>编译型 compiled vs. 解释型 interpreted
</li>
<li>按编程范式(paradigm)分
<ul class="org-ul">
<li>过程式 procedure-oriented paradigm(structured programming): c
</li>
<li>面向对象 object-oriented programming: java, python, c#
</li>
<li>函数式 functional programming: Lisp, Haskell, Scheme
</li>
</ul>
</li>
</ul>
</li>
<li>Python是通用解释型高级语言,混合了过程、面向对象、及函数式编程特征，
主要特征是面向对象。
</li>
<li>了解编程语言“范式”
</li>
</ul>

<pre class="example">
Programming language "paradigms" are a moribund and tedious legacy of
a bygone age.  Modern language designers pay them no respect, so why
do our courses slavishly adhere to them?

...Python...their designers...borrow features as they wish, creating
melanges that utterly defy characterization.
    -- Shriam krishnamurthi, 2008

Everything that is good in Python was stolen from other languages.
    -- Guido van Rossum, 2000
</pre>
</div>
</div>

<div id="outline-container-sec-1-5-4" class="outline-4">
<h4 id="sec-1-5-4"><span class="section-number-4">1.5.4</span> 简介</h4>
<div class="outline-text-4" id="text-1-5-4">
<ul class="org-ul">
<li>荷兰人Guido van Rossum（BDFL, Benevolent Dictator For Life）创制
Python，1991年发行第一个公开版本。
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> 课后阅读</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li>访问<a href="https://www.python.org">Python官网</a>
</li>
<li>阅读<a href="https://wiki.python.org/moin/BeginnersGuide">《新手指南》</a>
</li>
<li>阅读<a href="https://docs.python.org/3/tutorial/">《入门指南》</a>
</li>
<li>访问<a href="http://www.anaconda.com">Anaconda官网</a>
</li>
<li>了解<a href="https://docs.anaconda.com/">Anaconda文档</a>
</li>
<li>阅读 <a href="./misc/1_flowchart.doc">程序流程图编写规范</a>
</li>
<li>阅读《计算机科学导论》
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 第二章　基本数据类型</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>python是面向对象语言，支持面向对象编程。
</li>
<li>以C语言为代表的结构化编程重点在编写函数或过程，以处理数据。
</li>
<li>面向对象编程，强调创建既包含数据又包含处理功能的对象。每个对象代表了
真实世界的一个客观事物(object)或概念，其处理功能代表了对象之间的关联
互动。
</li>
</ul>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 万物皆对象</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>对象是python对数据的进行抽象表达的术语。python程序中，所有数据均表示
为对象或对象间的关系。
</li>
<li>每个对象都有一个唯一标识、属于某个数据类型，有一个值。
</li>
</ul>

<pre class="example">
Objects are Python’s abstraction for data. All data in a Python
program is represented by objects or by relations between
objects. (In a sense, and in conformance to Von Neumann’s model of
a “stored program computer,” code is also represented by objects.)

Every object has an identity, a type and a value.
            -- https://docs.python.org/dev/reference/datamodel.html
</pre>

<ul class="org-ul">
<li>在Python中所有事物都是对象。数字42是对象，字符串是对象，列表是对象，
函数是对象，模块是对象。每一个对象都有一个数据类型(Data type)，和一
个身份标识符(id)。
</li>
<li>python中，数据类型(Data type)和类(class)本质上是相同的。一般按习惯，
内置的数据类型，称为数据类型，自定义的数据类型，称为类。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span>42<span style="color: #c5c8c6;">)</span> <span style="color: #b294bb;">id</span><span style="color: #c5c8c6;">(</span>42<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#25972;&#25968;&#26159;&#23545;&#35937;</span>
<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span>42.0<span style="color: #c5c8c6;">)</span>, <span style="color: #b294bb;">id</span><span style="color: #c5c8c6;">(</span>42.0<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#28014;&#28857;&#25968;&#26159;&#23545;&#35937;</span>
<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'abc'</span><span style="color: #c5c8c6;">)</span>, <span style="color: #b294bb;">id</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'abc'</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#23383;&#31526;&#20018;&#26159;&#23545;&#35937;</span>
<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">foo</span><span style="color: #c5c8c6;">()</span>: <span style="color: #b5bd68;">pass</span>
<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span>foo<span style="color: #c5c8c6;">)</span>, <span style="color: #b294bb;">id</span><span style="color: #c5c8c6;">(</span>foo<span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">(&lt;class 'function'&gt;, 38110760)   #  &#20989;&#25968;&#26159;&#23545;&#35937;</span>
<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span>foo.__code__<span style="color: #c5c8c6;">)</span>, <span style="color: #b294bb;">id</span><span style="color: #c5c8c6;">(</span>foo.__code__<span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">(&lt;class 'code'&gt;, 38111680)  #  &#20195;&#30721;&#26159;&#23545;&#35937;</span>
</pre>
</div>
</div>

<div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1"><span class="section-number-4">2.1.1</span> 数据类型</h4>
<div class="outline-text-4" id="text-2-1-1">
<ul class="org-ul">
<li>一个对象的数据类型定义了该对象数据的取值范围，同时规定了该对象可以完
成的动作。
</li>
<li>事实上,数据类型本身也是对象，它的数据类型就是自身，type。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span>42<span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&lt;class 'int'&gt;</span>
<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">type</span><span style="color: #8abeb7;">(</span>42<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&lt;class 'type'&gt;</span>
<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">type</span><span style="color: #8abeb7;">(</span><span style="color: #b294bb;">type</span><span style="color: #f0c674;">(</span>42<span style="color: #f0c674;">)</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&lt;class 'type'&gt;</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 字面量</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>字面量是某些内置数据类型常量值的记号(Literals are notations for
constant values of some built-in types.)。
</li>
<li>名－值：名字是记号，值是实体。 1, one, 一是记号，数学概念“1”是实体。
</li>
<li>重名的“张三”，记号同，实体不同。 名字和学号，记号不同，实体同。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> 数字</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>有三种类型的数字字面量（Numeric literals）,亦称数字类型numeric types：
</li>
</ul>
<p>
　+ 整数 integers
</p>
<ul class="org-ul">
<li>浮点数 floating point numbers
</li>
<li>复数 imaginary numbers
</li>
<li>注意：数字字面量不含符号，-1不是字面量，而是表达式，具体说，是由操作
符负号（-）和字面量1组成的表达式。
</li>
<li>还另有两种字面量:字符串字面量和位字面量。
</li>
</ul>
</div>

<div id="outline-container-sec-2-3-1" class="outline-4">
<h4 id="sec-2-3-1"><span class="section-number-4">2.3.1</span> 整数</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
整数精度无限。　Integers have unlimited precision.
</p>
<ul class="org-ul">
<li>十进制整数 decimal 0,-1,9,123
</li>
<li>十六进整制 hexadecimal 0x10, 0xfa
</li>
<li>八进制整数 octals 0o35
</li>
<li>二进制整数 0b0101
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-3-2" class="outline-4">
<h4 id="sec-2-3-2"><span class="section-number-4">2.3.2</span> 浮点数</h4>
<div class="outline-text-4" id="text-2-3-2">
<p>
浮点数是实数的近似（不精确）表示。
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = 0.1
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>0.1, <span style="color: #8abeb7;">'.17f'</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
<p>
0.10000000000000001
</p>
</div>

<ol class="org-ol"><li><a id="sec-2-3-2-1" name="sec-2-3-2-1"></a>浮点数的机内存储<br  /><div class="outline-text-5" id="text-2-3-2-1">
<ul class="org-ul">
<li>浮点数机内存储遵循《IEEE 754:floating point standard》，用科学计数法
表示实数。一个浮点数在机器里由两部分组成：
<ul class="org-ul">
<li>尾数 mantissa(significant) 1 &le; mantissa &lt; 2
</li>
<li>指数 exponent  -1022 &lt; exponent &lt; +1023　表示范围: &plusmn;10<sup>308</sup>
</li>
</ul>
</li>
<li>现在主流计算机64位:
<ul class="org-ul">
<li>1 bit for sign
</li>
<li>11 bits for exponent
</li>
<li>52 bits for mantissa
</li>
<li>可以精确到17位小数，17 decimal digits。
</li>
</ul>
</li>
</ul>
</div>
</li>

<li><a id="sec-2-3-2-2" name="sec-2-3-2-2"></a>机内存储释义<br  /><div class="outline-text-5" id="text-2-3-2-2">
<ul class="org-ul">
<li>1/8 = 0.125
<ul class="org-ul">
<li>B<sub>10</sub>: 1.25 * 10<sup>(-1)</sup>
</li>
<li>B<sub>2</sub>: 1.0 * 2<sup>(-3)</sup>, (0.001)<sub>2</sub>
</li>
</ul>
</li>
<li>1/10 = 0.1
<ul class="org-ul">
<li>B<sub>10</sub>: 1 * 10<sup>(-1)</sup>
</li>
<li>B<sub>2</sub>: .00011001100&#x2026;
<ul class="org-ul">
<li>2<sup>(-4)</sup> + 2<sup>(-5)</sup> = 2/32 + 1/32 = 3/32 = 0.9375
</li>
<li>2<sup>(-4)</sup> + 2<sup>(-5)</sup> + 2<sup>(-8)</sup> + 2<sup>(-9)</sup> = 1/16 + 1/32 + 1/256 + 1/512 = 0.9960938
</li>
</ul>
</li>
</ul>
</li>

<li>计算机字长（位数）是有限的，没办法精确表示无限循环二进制小数。　最终
只能舍入到17位小数。
</li>

<li>所以，浮点数是实数的近似（不精确）表示。
</li>
</ul>
</div>
</li>

<li><a id="sec-2-3-2-3" name="sec-2-3-2-3"></a>奇怪的结果<br  /><div class="outline-text-5" id="text-2-3-2-3">
<ul class="org-ul">
<li>了解浮点数原理，有助于理解程序可能出现的奇怪结果
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">s</span> = 0.0
<span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>10<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">s</span> += 0.1
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">print(s)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'%.17f'</span><span style="color: #8abeb7;">)</span> % s<span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">range([start,]stop[,step])</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#22914;&#20309;&#26597;&#30475;&#19968;&#20010;&#20989;&#25968;&#65292;&#24403;&#28982;&#26159;&#27714;&#21161;&#21862;&#65281; help(range)</span>
</pre>
</div>
<p>
0.99999999999999989
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> math
<span style="color: #f0c674;">a</span> = math.sqrt<span style="color: #c5c8c6;">(</span>2<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>a * a == 2<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">abs</span><span style="color: #8abeb7;">(</span>a * a - 2.0<span style="color: #8abeb7;">)</span> &lt; 0.00001<span style="color: #c5c8c6;">)</span>
</pre>
</div>
<p>
False
True
</p>

<ul class="org-ul">
<li>避免用很小的小数做除数，避免两个相近的浮点数相减、相除，那样会损失精
度，造成结果失真。
</li>
<li>科学计算和数值分析，一般不直接用python原生功能，而应import numpy使用
专用数值计算API。
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-2-3-3" class="outline-4">
<h4 id="sec-2-3-3"><span class="section-number-4">2.3.3</span> 复数</h4>
<div class="outline-text-4" id="text-2-3-3">
<ul class="org-ul">
<li>python 支持复数运算
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">a</span> = 3 + 4j
<span style="color: #f0c674;">b</span> = 5 + 6j
<span style="color: #f0c674;">c</span> = a + b
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> 运算符</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li>数字称为算子operand，参与运算的数，被操作的数
</li>
<li>运算符operator就是运算的方式，操作的动作。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#25968;&#23383;&#36816;&#31639;&#31526;&#65292;&#25353;&#20248;&#20808;&#32423;&#21319;&#24207;&#25490;&#24207;</span>
53672+ 235253
10 - 3
10 * 3
10 / 3 <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#30495;&#38500;&#27861;</span>
10 // 3 <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27714;&#25972;&#21830;</span>
-3
10 % 3
<span style="color: #b294bb;">abs</span><span style="color: #c5c8c6;">(</span>-10<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">int</span><span style="color: #c5c8c6;">(</span>10.3<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">float</span><span style="color: #c5c8c6;">(</span>10<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">complex</span><span style="color: #c5c8c6;">(</span>10, 3<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">divmod</span><span style="color: #c5c8c6;">(</span>10,3<span style="color: #c5c8c6;">)</span> <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">the pair(10 // 3, 10 % 3)</span>
<span style="color: #b294bb;">pow</span><span style="color: #c5c8c6;">(</span>10,3<span style="color: #c5c8c6;">)</span>
x ** y

-3 ** 2
<span style="color: #c5c8c6;">(</span>-3<span style="color: #c5c8c6;">)</span> ** 2

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20851;&#31995;&#36816;&#31639;&#31526;</span>
10 &lt; 3
10 &lt;= 3
10 &gt; 3
10 &gt;= 3
10 == 3
10 != 3

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#36923;&#36753;&#65288;&#24067;&#23572;&#65289;&#36816;&#31639;&#31526;</span>
<span style="color: #f0c674;">x</span> = <span style="color: #81a2be;">True</span>
<span style="color: #f0c674;">y</span> = <span style="color: #81a2be;">False</span>

x <span style="color: #b5bd68;">or</span> y
x <span style="color: #b5bd68;">and</span> y
<span style="color: #b5bd68;">not</span> x

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#25104;&#21592;&#27979;&#35797;&#36816;&#31639;&#31526; membership</span>
<span style="color: #8abeb7;">'a'</span> <span style="color: #b5bd68;">in</span> <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'a'</span>,<span style="color: #8abeb7;">'b'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#23545;&#35937;&#21516;&#19968;&#27979;&#35797;&#65288;&#22320;&#22336;&#65289;</span>
<span style="color: #f0c674;">p</span> = <span style="color: #81a2be;">None</span>
<span style="color: #f0c674;">q</span> = <span style="color: #81a2be;">None</span>
p <span style="color: #b5bd68;">is</span> q

<span style="color: #f0c674;">a</span> = 2
<span style="color: #f0c674;">b</span> = 2
<span style="color: #f0c674;">c</span> = 2.0
a <span style="color: #b5bd68;">is</span> b
a <span style="color: #b5bd68;">is</span> c
b <span style="color: #b5bd68;">is</span> <span style="color: #b5bd68;">not</span> c

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#38598;&#21512;&#36816;&#31639;&#31526; &#20132;&#38598;&amp; &#24182;&#38598;| &#23545;&#31216;&#24046;&#38598;^</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20301;&#36816;&#31639;&#31526; | ^ &amp; &lt;&lt; &gt;&gt; ~</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> 初识字符串</h3>
<div class="outline-text-3" id="text-2-5">
<ul class="org-ul">
<li>字符串(strings)，是不可变字符序列(sequence)，和数字一样，是值，以单、双、三引号作为界定符。
<ul class="org-ul">
<li>三引号字符串可以跨行
</li>
<li>字符串可以连接 concatenation "Hello, " + "world!"
</li>
<li>str()将值转为字符串string
</li>
<li>input()接受用户输入的字符
</li>
<li>在python3中，字符串以Unicode编码
</li>
</ul>
</li>
<li>The principal built-int types are numerics, sequences, mappings,
classes, instances and exceptions.
</li>
</ul>
</div>

<div id="outline-container-sec-2-5-1" class="outline-4">
<h4 id="sec-2-5-1"><span class="section-number-4">2.5.1</span> 字符的转义 escape</h4>
<div class="outline-text-4" id="text-2-5-1">
<ul class="org-ul">
<li>转义符\。有一种字符串称为原生字符串(raw stings)，原生字符串前缀r，忽
视转义符，原样输出字符串中的字符。原生字符串简化某些繁琐的转义。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Hello, \nworld!'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">path</span> = <span style="color: #8abeb7;">'c:\nowhere'</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>path<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">cpath</span> = <span style="color: #8abeb7;">'c:\\program files\\fnord\\foo\\bar\\baz\\frozz\\bozz'</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>cpath<span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20351;&#29992;raw string&#21487;&#31616;&#21270;&#27492;&#31181;&#32321;&#29712;&#30340;&#36716;&#20041;&#65292; &#21407;&#29983;&#23383;&#31526;&#20018;&#20013;&#23383;&#31526;&#29031;&#21407;&#26679;&#36755;&#20986;</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>r<span style="color: #8abeb7;">'c:\nowhere'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">rpath</span> = r<span style="color: #8abeb7;">'c:\program files\fnord\foo\bar\baz\frozz\bozz'</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>rpath<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>r<span style="color: #8abeb7;">'Let\'s go!'</span><span style="color: #c5c8c6;">)</span> <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21407;&#29983;&#23383;&#31526;&#20018;&#20013;\&#27809;&#26377;&#36716;&#20041;&#65292;&#21407;&#26679;&#26174;&#31034;&#12290;</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">print(r'This is illegal\') # &#27492;&#21477;&#38750;&#27861;</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>r<span style="color: #8abeb7;">'c:\program files\foo\bar''\\'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-5-2" class="outline-4">
<h4 id="sec-2-5-2"><span class="section-number-4">2.5.2</span> 课后阅读</h4>
<div class="outline-text-4" id="text-2-5-2">
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/ASCII">ASCII</a>
</li>
<li><a href="https://www.unicode.org/standard/WhatIsUnicode.html">Unicode</a>
</li>
<li><a href="https://en.wikipedia.org/wiki/UTF-8">utf-8</a>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> 变量</h3>
<div class="outline-text-3" id="text-2-6">
<ul class="org-ul">
<li>变量(variables)是一个指代某值(目前：数字、字符串)的名字
</li>
<li>变量最常见操作x = 3，称为赋值assignment或绑定binding
<ul class="org-ul">
<li>将变量赋予值后，可用变量代替值参与运算: 10 + x
</li>
</ul>
</li>
<li>变量优势在于可以在不关心其值的情况下，令其参与运算。
</li>
<li>python不需要事先声明变量名及类型，赋值、绑定即声明，python解释器根据
赋值或运算推断变量类型
</li>
<li>先赋值后使用
</li>
<li>允许多个变量指向同一个值
<ul class="org-ul">
<li>变量/值，名/实
</li>
<li>某人张三，可以两名指此人（张三、老张、那人，或化名李四）
</li>
<li>不可一名指两人（重名,歧义，二义性），消歧，增加命名空间namespace、
或域scope。1班张三，2班张三。
</li>
<li>x人行必有我师， y人成虎, 桃园z结义
</li>
</ul>
</li>
<li>变量命名规则
<ul class="org-ul">
<li>变量以字母或下划线开头，下划线开头变量在python中有特定含义
</li>
<li>变量中不能有空格及常用标点符号
</li>
<li>不能使用关键字作为变量名
</li>
<li>建议不要使用系统内置的模块名、类型名、函数名及已导入的模块名及其成
员名，预防重名引起的混淆
</li>
<li>变量区分大小写case sensitive
</li>
</ul>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> keyword  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">python&#20851;&#38190;&#23383;</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>keyword.kwlist<span style="color: #c5c8c6;">)</span>
</pre>
</div>
<p>
['and', 'as', 'assert', 'break', 'class', 'continue', 'def', 'del',
'elif', 'else', 'except', 'exec', 'finally', 'for', 'from', 'global',
'if', 'import', 'in', 'is', 'lambda', 'not', 'or', 'pass', 'print',
'raise', 'return', 'try', 'while', 'with', 'yield']
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b294bb;">dir</span><span style="color: #c5c8c6;">(</span>__builtins__<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-7" class="outline-3">
<h3 id="sec-2-7"><span class="section-number-3">2.7</span> 表达式和语句</h3>
<div class="outline-text-3" id="text-2-7">
<ul class="org-ul">
<li>直观理解， expression = operands + operators　表达式expression由算子
和算符组合构成。
</li>
<li>An expression <b>is</b> something. 表达式是某值，可以求值(evaluate)2 + 2，
此表达式值为4，若设x = 2,表达式　x * 3值为6。
</li>
<li>A statement <b>does</b> something. x = 2是语句。 语句是python解释器可以执行
的合法指令。语句做某些事情，改变某些情况, 如此语句执行后，变量x被绑
定到2这个值上。
</li>
<li>目前接触到两个语句
<ul class="org-ul">
<li>赋值
</li>
<li>import
</li>
<li>print在python2中是语句，在python3中是函数。
</li>
</ul>
</li>
</ul>
</div>

<div id="outline-container-sec-2-7-1" class="outline-4">
<h4 id="sec-2-7-1"><span class="section-number-4">2.7.1</span> python独特赋值语句</h4>
<div class="outline-text-4" id="text-2-7-1">
</div><ol class="org-ol"><li><a id="sec-2-7-1-1" name="sec-2-7-1-1"></a>序列解包赋值 sequence unpacking or iterable unpacking<br  /><div class="outline-text-5" id="text-2-7-1-1">
<ul class="org-ul">
<li>x, y, z = 1, 2, 3
</li>
<li>values = 1, 2, 3 x, y, z = values
</li>
<li># x, y, z = 1, 2
</li>
<li># x, y ,z  = 1, 2, 3, 4
</li>
</ul>
</div>
</li>

<li><a id="sec-2-7-1-2" name="sec-2-7-1-2"></a>链式赋值 chained assignment, 将某值绑定到若干变量的捷径<br  /><div class="outline-text-5" id="text-2-7-1-2">
<ul class="org-ul">
<li>x = y = z = 22
</li>
</ul>
</div>
</li>

<li><a id="sec-2-7-1-3" name="sec-2-7-1-3"></a>增量赋值 augmented assignment<br  /><div class="outline-text-5" id="text-2-7-1-3">
<ul class="org-ul">
<li>x=2, x += 1, x *= 3
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-2-7-2" class="outline-4">
<h4 id="sec-2-7-2"><span class="section-number-4">2.7.2</span> 介绍两个语句</h4>
<div class="outline-text-4" id="text-2-7-2">
</div><ol class="org-ol"><li><a id="sec-2-7-2-1" name="sec-2-7-2-1"></a>pass<br  /><div class="outline-text-5" id="text-2-7-2-1">
<ul class="org-ul">
<li>什么也不做。作用是占位。
</li>
<li>例：
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">if</span> name ==<span style="color: #8abeb7;">'Adam'</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Hello'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">elif</span> <span style="color: #f0c674;">name</span> = <span style="color: #8abeb7;">'Bob'</span>:
    <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Not finished yet...to be continued</span>
<span style="color: #b5bd68;">elif</span> <span style="color: #f0c674;">name</span> = <span style="color: #8abeb7;">'Charlie'</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Access Denied'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>这样的代码无法调试，更不会运行，因在python中空语句块非法。因此，常用
技巧是，用pass占那个空语句块的位置，先让程序运行起来。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">if</span> name ==<span style="color: #8abeb7;">'Adam'</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Hello'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">elif</span> <span style="color: #f0c674;">name</span> = <span style="color: #8abeb7;">'Bob'</span>:
    <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Not finished yet...to be continued</span>
    <span style="color: #b5bd68;">pass</span>
<span style="color: #b5bd68;">elif</span> <span style="color: #f0c674;">name</span> = <span style="color: #8abeb7;">'Charlie'</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Access Denied'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-2-7-2-2" name="sec-2-7-2-2"></a>del<br  /><div class="outline-text-5" id="text-2-7-2-2">
<ul class="org-ul">
<li>删除对象
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = 1
<span style="color: #b5bd68;">del</span> x
x

<span style="color: #f0c674;">x</span>  = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'Hello'</span>, <span style="color: #8abeb7;">'world'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">y</span> = x
<span style="color: #f0c674;">y</span><span style="color: #c5c8c6;">[</span>1<span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'Python'</span>
x
<span style="color: #b5bd68;">del</span> x
y
</pre>
</div>

<ul class="org-ul">
<li>del仅删除名name, 而没删除值value。程序无法删除值。当值没有用时，
python解释器会自动回收释放没用的值。
</li>
<li>garbage collection
</li>
<li>reference count
</li>
</ul>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-2-8" class="outline-3">
<h3 id="sec-2-8"><span class="section-number-3">2.8</span> 初识函数和模块</h3>
<div class="outline-text-3" id="text-2-8">
</div><div id="outline-container-sec-2-8-1" class="outline-4">
<h4 id="sec-2-8-1"><span class="section-number-4">2.8.1</span> 函数</h4>
<div class="outline-text-4" id="text-2-8-1">
<ul class="org-ul">
<li>一个函数( functions)就是一小段程序，执行特定功能。
<ul class="org-ul">
<li>python自带大量函数可完成许多工作，另有数量庞大的第三方工具包提供了
更多的函数
</li>
<li>如果这些还不够用，程序员可以编写自己的函数完成特定的工作
</li>
<li>Python自带的标准函数称为内置(built-in)函数。
</li>
<li>例： 2 ** 3 可用pow(2,3)函数代替
</li>
</ul>
</li>
<li>使用函数的方法是调用(calling, invoke)函数，调用函数同时提供参数
(parameters),得到返回值(return value)。 
<ul class="org-ul">
<li>pow(2, 3),2、3是传递给函数的参数，8是返回值。 
</li>
<li>print(x)返回值就是输出内容
</li>
</ul>
</li>
<li>由于函数返回值，因此函数是一种表达式，可以将函数调用语句和运算符组合，
创建功能更丰富的表达式。 10 + pow(2, 3*5) / 3.0
</li>
</ul>

<p>
<a href="https://docs.python.org/3/library/functions.html">python内置函数表</a>
</p>
</div>
</div>

<div id="outline-container-sec-2-8-2" class="outline-4">
<h4 id="sec-2-8-2"><span class="section-number-4">2.8.2</span> 模块 modules</h4>
<div class="outline-text-4" id="text-2-8-2">
<ul class="org-ul">
<li>对于非内置函数，使用import语句引入模块，通过语法格式module.function
使用特定函数。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">import &#29992;&#27861;&#65306;</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">1.</span>
<span style="color: #b5bd68;">import</span> math
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>math.floor<span style="color: #8abeb7;">(</span>32.9<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">2.</span>
<span style="color: #b5bd68;">from</span> math <span style="color: #b5bd68;">import</span> sqrt
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">3. from math import *</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>sqrt<span style="color: #8abeb7;">(</span>9<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">print(sqrt(-1))</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">4.</span>
<span style="color: #b5bd68;">import</span> cmath <span style="color: #b5bd68;">as</span> cm
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>cm.sqrt<span style="color: #8abeb7;">(</span>-1<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">5. wield usage</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">kind of binding</span>
<span style="color: #b5bd68;">from</span> math <span style="color: #b5bd68;">import</span> sqrt <span style="color: #b5bd68;">as</span> st1
<span style="color: #b5bd68;">from</span> xmath <span style="color: #b5bd68;">import</span> sqrt <span style="color: #b5bd68;">as</span> st2
</pre>
</div>

<ul class="org-ul">
<li>自定义模块可有绝对引入 (absolute import) 和相对引入 (relative
import)。
<ul class="org-ul">
<li>import ecommerce.products
</li>
<li>from .database import Database
</li>
<li>from ..database import Database
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-2-9" class="outline-3">
<h3 id="sec-2-9"><span class="section-number-3">2.9</span> 小结</h3>
<div class="outline-text-3" id="text-2-9">
<ul class="org-ul">
<li>需掌握的概念Concepts: Numbers, Strings, Variables, Operator,
Operand, Expressions, Statements, Functions, Modules, Assignment,
binding,import
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 第三章　控制流：选择与循环</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> python代码风格</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">fibs</span><span style="color: #c5c8c6;">(</span>num<span style="color: #c5c8c6;">)</span>:
    <span style="color: #8abeb7;">"""</span>
<span style="color: #8abeb7;">    This is a Fibnacci function</span>
<span style="color: #8abeb7;">    """</span>
    <span style="color: #f0c674;">result</span> = <span style="color: #c5c8c6;">[</span>0, 1<span style="color: #c5c8c6;">]</span>
    <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>num-2<span style="color: #c5c8c6;">)</span>:
        result.append<span style="color: #c5c8c6;">(</span>result<span style="color: #8abeb7;">[</span>-2<span style="color: #8abeb7;">]</span> + result<span style="color: #8abeb7;">[</span>-1<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">return</span> result  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">This is a comment</span>
</pre>
</div>

<ul class="org-ul">
<li>python有几个突出特点：
<ul class="org-ul">
<li>不使用分号（;）做语句结束符
</li>
<li>不使用成对花括号({})作为边界符， 而是使用缩进(Indentation)，一般是
4个空格（不推荐1个tab），界定语句块。 写程序就好像语文作文
(literate programming)一样。
</li>
<li>不要忽略冒号(:)
</li>
<li># 为注释符
</li>
</ul>
</li>
<li>或曰：写程序就是填空。
</li>
</ul>

<pre class="example">
def 函数名(参数列表):
    """
    docstring： 函数说明，说明函数功能，使用何种算法，参数个数、类型，返回值等。
    """
    #  注释

    代码块（函数体）
    1. 输入 input
    2. 处理
    3. 输出

    return 返回值
</pre>
<p>
<a href="https://www.python.org/dev/peps/pep-0008/">
Python推荐编码风格</a>
</p>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> 语句块</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li>块(block)是一组语句,当条件表达式值为“真”时执行，或在循环中执行若干次。
</li>
<li>冒号表明语句块起点，缩进界定语句块，所有连续、同缩进格式的语句属于同
一个语句块。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> 条件表达式</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li>python中，单个常量、变量或任意合法表达式都可作为条件表达式，而条件表
达式与运算符组合形成更复杂的条件表达式。由此，几乎所有python合法表达
式都可以作为条件表达式。 这些表达式的值就是条件表达式的值。
</li>
<li>条件表达式值必居其一:
<ul class="org-ul">
<li>“假”： Fasle, 0, 0.0, 0j, None, 空列表[],空元组(),空集合，空字典{}，
空字符串''，空range或其他空iterable对象
</li>
<li>“真”: 其他
</li>
</ul>
</li>
<li>程序可以根据条件表达式的值，决定是否执行某个语句块。
</li>
</ul>
</div>

<div id="outline-container-sec-3-3-1" class="outline-4">
<h4 id="sec-3-3-1"><span class="section-number-4">3.3.1</span> 条件表达式的组合</h4>
<div class="outline-text-4" id="text-3-3-1">
<ul class="org-ul">
<li>((a &gt; 10) and &lt; (a &lt; 20))
</li>
<li>组合后，其值依然“真”、“假”必居其一。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-3-2" class="outline-4">
<h4 id="sec-3-3-2"><span class="section-number-4">3.3.2</span> 辨析 == 和 is</h4>
<div class="outline-text-4" id="text-3-3-2">
<ul class="org-ul">
<li>== 相等运算符 the euqality operator
</li>
<li>is 同一运算符 the identity operator， 似乎与==相类，注意区别。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"foo"</span> == <span style="color: #8abeb7;">"foo"</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"foo"</span> == <span style="color: #8abeb7;">"bar"</span><span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">x</span> = <span style="color: #f0c674;">y</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">z</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3<span style="color: #c5c8c6;">]</span>
x == y
x == z
x <span style="color: #b5bd68;">is</span> y
x <span style="color: #b5bd68;">is</span> z
</pre>
</div>

<ul class="org-ul">
<li>is 判断的是同一性(identity)，而不是（值）相等性(equality)。 x和y被绑
定到同一列表，z被绑定到另一个列表，该列表恰与xy列表值相等。 尽管值等，
但z与xy不是同一对象。
</li>
<li>xy与z代表的列表相等equal， 但不同non-identical。
</li>
<li>用法： 用==判断两个对象值是否相等，用is判断两个对象是否同一identical。
</li>
<li>在CPython实现中，python的identical指x、y存储了同一个对象的内存地址。
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> 分支结构（选择结构）</h3>
<div class="outline-text-3" id="text-3-4">
</div><div id="outline-container-sec-3-4-1" class="outline-4">
<h4 id="sec-3-4-1"><span class="section-number-4">3.4.1</span> 单分支</h4>
<div class="outline-text-4" id="text-3-4-1">
<pre class="example">
if 表达式：
    语句块
</pre>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">x = input('Input two integers:')</span>
<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">(</span>3, 10<span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">x = (10, 3)</span>
<span style="color: #f0c674;">a</span>, <span style="color: #f0c674;">b</span> = x  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">unpacking</span>
<span style="color: #b5bd68;">if</span> a &gt; b:
    <span style="color: #f0c674;">a</span>, <span style="color: #f0c674;">b</span> = b,a
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>a,b<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">name</span> = <span style="color: #b294bb;">input</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'What is your name?'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">if</span> name.endswith<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Michael'</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Hello, Mr. Michael"</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-4-2" class="outline-4">
<h4 id="sec-3-4-2"><span class="section-number-4">3.4.2</span> 双分支</h4>
<div class="outline-text-4" id="text-3-4-2">
<pre class="example">
if 表达式：
    语句块1
else:  #   else clauses
    语句块2
</pre>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">name</span> = <span style="color: #b294bb;">input</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'What is your name?'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">name = 'c'</span>
<span style="color: #b5bd68;">if</span> name.endswith<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Michael'</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Hello, Mr. Michael"</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">else</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Hello, stranger"</span><span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">chTest</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'1'</span>, <span style="color: #8abeb7;">'2'</span>, <span style="color: #8abeb7;">'3'</span>, <span style="color: #8abeb7;">'4'</span>, <span style="color: #8abeb7;">'5'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">a</span> = <span style="color: #8abeb7;">'6'</span>

<span style="color: #b5bd68;">if</span> a <span style="color: #b5bd68;">in</span> chTest:
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">if a not in chTest:</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>a<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">else</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>chTest<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-4-3" class="outline-4">
<h4 id="sec-3-4-3"><span class="section-number-4">3.4.3</span> 多分支</h4>
<div class="outline-text-4" id="text-3-4-3">
<ul class="org-ul">
<li>如果需要检查多条件需要用到elif子句。
</li>
</ul>
<pre class="example">
if 表达式1：
    语句块1
elif 表达式2:  #   elif clauses
    语句块2
elif 表达式3:
    :
    :
    :
else:
    语句块n
</pre>
<ul class="org-ul">
<li>python 不支持switch case关键字，多分支结构用if..elif..else代替。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">num</span> = <span style="color: #b294bb;">int</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">input</span><span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'Enter a number: '</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">if</span> num &gt; 0:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'The number is positive'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">elif</span> num &lt; 0:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'The number is negative'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">else</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'The number is zero'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-4-4" class="outline-4">
<h4 id="sec-3-4-4"><span class="section-number-4">3.4.4</span> 分支嵌套</h4>
<div class="outline-text-4" id="text-3-4-4">
<pre class="example">
if 表达式1：
    语句块1
    if 表达式2:
        语句块2
    else:
        语句块3
else:
    if 表达式4:
        语句块4
</pre>

<ul class="org-ul">
<li>使用嵌套结构一定严格、清晰控制不同级别语句块的缩进量，缩进量决定着语
句块的从属关系，影响着程序的执行路径和逻辑功能。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">name</span> = <span style="color: #b294bb;">input</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'What is your name?'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">name = 'c'</span>
<span style="color: #b5bd68;">if</span> name.endswith<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Adam):</span>
<span style="color: #8abeb7;">    if name.startswith('</span>Mr.<span style="color: #8abeb7;">'):</span>
<span style="color: #8abeb7;">        print("Hello, Mr. Adam")</span>
<span style="color: #8abeb7;">    elif name.startswith('</span>Mrs.<span style="color: #8abeb7;">'):</span>
<span style="color: #8abeb7;">        print("Hello, Mrs. Adam")</span>
<span style="color: #8abeb7;">    else:</span>
<span style="color: #8abeb7;">        print("Hello, Adam")</span>
<span style="color: #8abeb7;">else:</span>
<span style="color: #8abeb7;">    print("Hello, stranger")</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-4-5" class="outline-4">
<h4 id="sec-3-4-5"><span class="section-number-4">3.4.5</span> 断言 assertions</h4>
<div class="outline-text-4" id="text-3-4-5">
<ul class="org-ul">
<li>assert语句断言某表达式（通常是布尔表达式）为真，并附言解释为何如此。
当该表达式为假时，assert爆出异常，并终止程序。
</li>
<li>assert逻辑上等价于if not condition，用于测试。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">age</span> = 10
<span style="color: #b5bd68;">assert</span> 0 &lt; age &lt; 100
<span style="color: #f0c674;">age</span> = -1
<span style="color: #b5bd68;">assert</span> 0 &lt; age &lt; 100, <span style="color: #8abeb7;">'Age is between 0 and 100.'</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">if not 0&lt;age&lt;100 then raise exception '...'</span>
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="sec-3-4-5-1" name="sec-3-4-5-1"></a>阅读<br  /><div class="outline-text-5" id="text-3-4-5-1">
<ul class="org-ul">
<li><a href="https://docs.pytest.org/en/latest/assert.html">The writing and reporting of assertions in tests</a>
</li>
<li><a href="https://cacm.acm.org/magazines/2014/2/171689-mars-code/abstract">mars code</a>
</li>
</ul>
</div>
</li>

<li><a id="sec-3-4-5-2" name="sec-3-4-5-2"></a>自学了解<br  /><div class="outline-text-5" id="text-3-4-5-2">
<p>
<a href="https://github.com/pyclectic/pyassert">
pyassert</a>
</p>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> 循环</h3>
<div class="outline-text-3" id="text-3-5">
</div><div id="outline-container-sec-3-5-1" class="outline-4">
<h4 id="sec-3-5-1"><span class="section-number-4">3.5.1</span> while</h4>
<div class="outline-text-4" id="text-3-5-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = 1
<span style="color: #b5bd68;">while</span> x &lt;= 100:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>
    <span style="color: #f0c674;">x</span> += 1

<span style="color: #f0c674;">name</span> = <span style="color: #8abeb7;">''</span>
<span style="color: #b5bd68;">while</span> <span style="color: #b5bd68;">not</span> name:
    <span style="color: #f0c674;">name</span> = <span style="color: #b294bb;">input</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Please enter your name: '</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Hello, %s!'</span> % name<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-5-2" class="outline-4">
<h4 id="sec-3-5-2"><span class="section-number-4">3.5.2</span> for</h4>
<div class="outline-text-4" id="text-3-5-2">
<ul class="org-ul">
<li>python风格for循环： for var in iterable/range
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">words</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'this'</span>, <span style="color: #8abeb7;">'is'</span>, <span style="color: #8abeb7;">'an'</span>, <span style="color: #8abeb7;">'ex'</span>, <span style="color: #8abeb7;">'parrot'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #b5bd68;">for</span> word <span style="color: #b5bd68;">in</span> words:
     <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>word<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">numbers</span> = <span style="color: #c5c8c6;">[</span>0, 1, 2, 3, 4, 5, 6, 7, 8, 9<span style="color: #c5c8c6;">]</span>
<span style="color: #b5bd68;">for</span> number <span style="color: #b5bd68;">in</span> numbers:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>number<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">for</span> number <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>1, 101<span style="color: #c5c8c6;">)</span>:
    <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">This is more compact than the while loop above.</span>
    <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20195;&#26367; for (i=1, i &lt;=100, i++)</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>number<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-5-3" class="outline-4">
<h4 id="sec-3-5-3"><span class="section-number-4">3.5.3</span> break和continue</h4>
<div class="outline-text-4" id="text-3-5-3">
<ul class="org-ul">
<li>用break语句,退出当前循环,使得整个循环提前结束
</li>
<li>用continue语句，终止本次循环，忽略continue之后的所有语句，直接回到循
环顶端，提前进入下一次循环
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">i</span> = 1
<span style="color: #b5bd68;">while</span> i &lt; 10:
    <span style="color: #f0c674;">i</span> += 1
    <span style="color: #b5bd68;">if</span> <span style="color: #c5c8c6;">(</span>i % 2<span style="color: #c5c8c6;">)</span> &gt; 0:  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#38750;&#20598;&#25968;&#26102;&#36339;&#36807;&#36755;&#20986;</span>
        <span style="color: #b5bd68;">continue</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>i<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#36755;&#20986;&#20598;&#25968;</span>

<span style="color: #f0c674;">i</span> = 1
<span style="color: #b5bd68;">while</span> Ture:  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#26080;&#38480;&#24490;&#29615;</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>i<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#36755;&#20986;1~10</span>
    <span style="color: #f0c674;">i</span> += 1
    <span style="color: #b5bd68;">if</span> i &gt; 10:  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#22823;&#20110;10&#36339;&#20986;&#24490;&#29615;</span>
        <span style="color: #b5bd68;">break</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">for reading </span>
<span style="color: #b5bd68;">for</span> n <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>100, 1, -1<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>2, n<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">if</span> n % i == 0:
            <span style="color: #b5bd68;">break</span>
    <span style="color: #b5bd68;">else</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>n<span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">break</span>

<span style="color: #b5bd68;">while</span> i &lt; 10:
   <span style="color: #b5bd68;">if</span> i % 2 == 0:
        <span style="color: #b5bd68;">continue</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>i, end=<span style="color: #8abeb7;">' '</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #f0c674;">i</span> += 1
</pre>
</div>

<ul class="org-ul">
<li>循环可带else子句
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">count</span> = 0
<span style="color: #b5bd68;">while</span> count &lt; 5:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"%d is less than 5."</span> % count<span style="color: #c5c8c6;">)</span>
    <span style="color: #f0c674;">count</span> += 1
<span style="color: #b5bd68;">else</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"%d is no less than 5."</span> % 5<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> 再识python代码风格</h3>
<div class="outline-text-3" id="text-3-6">
</div><div id="outline-container-sec-3-6-1" class="outline-4">
<h4 id="sec-3-6-1"><span class="section-number-4">3.6.1</span> 阅读：</h4>
<div class="outline-text-4" id="text-3-6-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> this
</pre>
</div>

<pre class="example">
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those!
</pre>
</div>
</div>

<div id="outline-container-sec-3-6-2" class="outline-4">
<h4 id="sec-3-6-2"><span class="section-number-4">3.6.2</span> 课后自学</h4>
<div class="outline-text-4" id="text-3-6-2">
</div><ol class="org-ol"><li><a id="sec-3-6-2-1" name="sec-3-6-2-1"></a>readability<br  /><div class="outline-text-5" id="text-3-6-2-1">
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/550861/improving-code-readability">https://stackoverflow.com/questions/550861/improving-code-readability</a>
</li>
<li><a href="https://blog.codinghorror.com/code-smells/">https://blog.codinghorror.com/code-smells/</a>
</li>
<li><a href="https://en.wikipedia.org/wiki/Readability#Popular_readability_formulas">https://en.wikipedia.org/wiki/Readability#Popular_readability_formulas</a>
</li>
</ul>
</div>
</li>

<li><a id="sec-3-6-2-2" name="sec-3-6-2-2"></a>literate programming<br  /><div class="outline-text-5" id="text-3-6-2-2">
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Literate_programming">https://en.wikipedia.org/wiki/Literate_programming</a>
</li>
<li><a href="http://howardism.org/Technical/Emacs/literate-programming-tutorial.html">http://howardism.org/Technical/Emacs/literate-programming-tutorial.html</a>
</li>
<li><a href="./misc/Knuth1992-LiterateProgramming.djvu">Knuth1992</a>
</li>
<li><a href="file:///.misc/Knuth1992-LiterateProgramming">Knuth1983</a>
</li>
</ul>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-3-7" class="outline-3">
<h3 id="sec-3-7"><span class="section-number-3">3.7</span> 课上练习</h3>
<div class="outline-text-3" id="text-3-7">
<ul class="org-ul">
<li>阅读并理解代码。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python">  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">excercise 1.</span>
  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#35745;&#31639;1 + 2 + 3 + ... + 100&#30340;&#20540;</span>
  <span style="color: #f0c674;">s</span> = 0
  <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>1, 101<span style="color: #c5c8c6;">)</span>:
      <span style="color: #f0c674;">s</span> = s + i
  <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>s<span style="color: #c5c8c6;">)</span>
  <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">sum</span><span style="color: #8abeb7;">(</span><span style="color: #b294bb;">range</span><span style="color: #f0c674;">(</span>1, 101<span style="color: #f0c674;">)</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">excercise 2.</span>
  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27714;1-100&#38388;&#33021;&#21516;&#26102;&#34987;7&#25972;&#38500;&#65292;&#19981;&#33021;&#34987;5&#25972;&#38500;&#30340;&#25152;&#26377;&#25972;&#25968;</span>
  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#37027;&#21516;&#26102;&#33021;&#34987;7&#21644;5&#25972;&#38500;&#30340;&#25972;&#25968;&#21602;&#65311;</span>
  <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>1, 101<span style="color: #c5c8c6;">)</span>:
      <span style="color: #b5bd68;">if</span> <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">(</span>i % 7<span style="color: #8abeb7;">)</span> == 0<span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">and</span> <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">(</span>i % 5<span style="color: #8abeb7;">)</span> != 0<span style="color: #c5c8c6;">)</span>:
          <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>i<span style="color: #c5c8c6;">)</span>

  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">excercise 3.</span>
  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27700;&#20185;&#33457;&#25968;&#36755;&#20986;&#8220;&#27700;&#20185;&#33457;&#25968;&#8221;&#65292;&#25152;&#35859;&#27700;&#20185;&#33457;&#25968;&#65292;&#25351;3&#20301;&#21313;&#36827;&#21046;&#25968;&#65292;&#20854;&#21508;&#20301;&#25968;&#23383;&#31435;&#26041;</span>
  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20043;&#21644;&#31561;&#20110;&#35813;&#25968;&#65292;&#20363;&#22914; 153 = 1^3 + 5^3 + 3^3</span>

  <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>100, 1000<span style="color: #c5c8c6;">)</span>:
      <span style="color: #f0c674;">ge</span> = i % 10
      <span style="color: #f0c674;">shi</span>  = i // 10 % 10
      <span style="color: #f0c674;">bai</span> = i // 100
      <span style="color: #b5bd68;">if</span> <span style="color: #c5c8c6;">(</span>ge**3 + shi**3 + bai**3<span style="color: #c5c8c6;">)</span>  == i:
          <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>i<span style="color: #c5c8c6;">)</span>

  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">excercise 4.</span>
  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27714;&#24179;&#22343;&#20998;</span>
  <span style="color: #f0c674;">score</span> = <span style="color: #c5c8c6;">[</span>70, 90, 78, 85, 97, 94, 65, 80<span style="color: #c5c8c6;">]</span>
  <span style="color: #f0c674;">s</span> = 0
  <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> score:
      <span style="color: #f0c674;">s</span> += i
  <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>s / <span style="color: #b294bb;">len</span><span style="color: #8abeb7;">(</span>score<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

  <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">sum</span><span style="color: #8abeb7;">(</span>score<span style="color: #8abeb7;">)</span> / <span style="color: #b294bb;">len</span><span style="color: #8abeb7;">(</span>score<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">exercise 5.</span>
  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#36755;&#20986;99&#20056;&#27861;&#34920;</span>
  <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>1, 10<span style="color: #c5c8c6;">)</span>:
      <span style="color: #b5bd68;">for</span> j <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>1,10<span style="color: #c5c8c6;">)</span>:
          <span style="color: #b5bd68;">if</span> <span style="color: #c5c8c6;">(</span>j&lt;=i<span style="color: #c5c8c6;">)</span>:  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#35843;&#25972;&#26684;&#24335;</span>
              <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>j, <span style="color: #8abeb7;">'*'</span>, i, <span style="color: #8abeb7;">'='</span>, i*j, <span style="color: #8abeb7;">' '</span>, end=<span style="color: #8abeb7;">''</span><span style="color: #c5c8c6;">)</span>
      <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#36755;&#20986;&#31354;&#34892;</span>

  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">exercise 6.</span>
  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27714;200&#20197;&#20869;&#33021;&#34987;17&#38500;&#30340;&#26368;&#22823;&#27491;&#25972;&#25968;</span>
  <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>200, 0, -1<span style="color: #c5c8c6;">)</span>:
      <span style="color: #b5bd68;">if</span> <span style="color: #c5c8c6;">(</span>i % 17<span style="color: #c5c8c6;">)</span> == 0:
          <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>i<span style="color: #c5c8c6;">)</span>
          <span style="color: #b5bd68;">break</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">exercise 7.</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21028;&#26029;&#19968;&#20010;&#25968;&#26159;&#21542;&#20026;&#32032;&#25968;</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#36941;&#21382;N&#33021;&#21542;&#33021;&#34987;&#20174;2&#21040;sqrt(N)&#20043;&#38388;&#30340;&#32032;&#25968;&#25972;&#38500;&#12290;&#33509;&#19981;&#33021;&#21017;&#20026;&#32032;&#25968;&#12290;</span>
<span style="color: #b5bd68;">import</span> math

<span style="color: #f0c674;">n</span> = <span style="color: #b294bb;">int</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">input</span><span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'Input an integer:'</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">m</span> = math.ceil<span style="color: #c5c8c6;">(</span>math.sqrt<span style="color: #8abeb7;">(</span>n<span style="color: #8abeb7;">)</span> + 1<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>2, m<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">if</span> <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">(</span>n % i<span style="color: #8abeb7;">)</span> == 0<span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">and</span> <span style="color: #c5c8c6;">(</span>i &lt; n<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'No'</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">break</span>
<span style="color: #b5bd68;">else</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Yes'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">excercise 8.</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#40481;&#20820;&#21516;&#31548;&#38382;&#39064;&#65292; &#35774;&#20849;&#26377;&#40481;&#20820;30&#21482;&#65292;&#26597;&#26377;90&#21482;&#33050;&#65292;&#38382;&#40481;&#20820;&#21508;&#22810;&#23569;&#21482;&#65311;</span>
<span style="color: #b5bd68;">for</span> chick <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>0, 31<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">if</span> <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">(</span>2 * chick<span style="color: #8abeb7;">)</span> + <span style="color: #8abeb7;">(</span><span style="color: #f0c674;">(</span>30 - chick<span style="color: #f0c674;">)</span> * 4<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span> == 90:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Chicks:'</span>, chick, <span style="color: #8abeb7;">'Rabits:'</span>, <span style="color: #8abeb7;">(</span>30 - chick<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-8" class="outline-3">
<h3 id="sec-3-8"><span class="section-number-3">3.8</span> 课后作业</h3>
<div class="outline-text-3" id="text-3-8">
<ol class="org-ol">
<li>编写程序，运行后用户输入4为整数年份，判断是否为闰年。 判断闰年算法
如下： 
<ul class="org-ul">
<li>如果年份能被400整除，是闰年
</li>
<li>如果年份能被4整除，但不能被100整除，也是闰年。
</li>
</ul>
</li>
<li>编写程序，用户从键盘输入小于1000的整数，程序对其进行因式分解。
<ul class="org-ul">
<li>例： 10 = 2 × 5， 60 = 2 × 2 × 3 × 5
</li>
</ul>
</li>
<li>编写程序，实现分段函数计算，如下表:
</li>
</ol>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> 分段函数</caption>

<colgroup>
<col  class="left" />

<col  class="right" />
</colgroup>
<tbody>
<tr>
<td class="left">x</td>
<td class="right">y</td>
</tr>

<tr>
<td class="left">x&lt;0</td>
<td class="right">0</td>
</tr>

<tr>
<td class="left">0 &le; x &lt; 5</td>
<td class="right">x</td>
</tr>

<tr>
<td class="left">5 &le; x &lt; 10</td>
<td class="right">3x-5</td>
</tr>

<tr>
<td class="left">10 &le; x &lt; 20</td>
<td class="right">0.5x-2</td>
</tr>

<tr>
<td class="left">20 &le; x</td>
<td class="right">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 第四章　高级数据类型</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> python内置数据类型</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li><a href="https://docs.python.org/3/reference/datamodel.html">python数据模型</a> 详尽说明了python各种数据类型。
</li>
<li>数据结构： 按某种方式，将数据元素组织成为有结构（数据元素之间有明确
关系）的数据集合。程序设计语言中的数据结构的类型一般称为数据类型
(Data Type)。
</li>
<li>python主要内置数据类型有：
<ul class="org-ul">
<li>数字，含整数、浮点数、复数
</li>
<li>序列
</li>
<li>映射
</li>
<li>类
</li>
<li>实例
</li>
<li>异常
</li>
</ul>
</li>
<li>亦有不太常用内置数据类型，如集合等。
</li>
<li>python最基本的数据类型是序列(sequence)。序列中每个数据元素都被赋予一
个整数，表示它的位置（亦称索引index)，索引从0开始计数。通过索引可以
访问并使用到该数据元素。
</li>
<li>python3有<a href="https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range">几种基本内置序列类型</a>：
<ul class="org-ul">
<li>列表 lists
</li>
<li>元组 tuples
</li>
<li>字符串 stings
</li>
<li>range objects
</li>
</ul>
</li>
<li>列表适用范围广，几乎适用于所有情况，元组适用范围要窄一些。
</li>
<li>除序列外，python还有一种称为映射(mapping)的数据类型。只有一种内置映
射类型: 字典(dictionary)。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> 列表</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li>当希望使用组合数据时，序列即派上用场。本节以列表为序列例。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'ZhangSan'</span>, 20<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">ls</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'LiSi'</span>, 19<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">database</span> = <span style="color: #c5c8c6;">[</span>zs, ls<span style="color: #c5c8c6;">]</span>
database
</pre>
</div>
</div>

<div id="outline-container-sec-4-2-1" class="outline-4">
<h4 id="sec-4-2-1"><span class="section-number-4">4.2.1</span> 创建与删除列表</h4>
<div class="outline-text-4" id="text-4-2-1">
<ul class="org-ul">
<li>列表是可改变的 mutable, 即可修改其数据元素。
<ul class="org-ul">
<li>列表以[]为界定符，以,为分隔符
</li>
<li>使用=将变量赋值给列表即可创建列表对象，事实上，是先创建列表对象，
再将变量绑定到列表
</li>
</ul>
</li>
</ul>
<p>
　+ 使用list()函数可将其他类型（迭代对象类型iterable）的数据转换为列表
</p>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#21015;&#34920;</span>
<span style="color: #f0c674;">a_list</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'a'</span>,<span style="color: #8abeb7;">'b'</span>,<span style="color: #8abeb7;">'mpilgrim'</span>,<span style="color: #8abeb7;">'z'</span>,<span style="color: #8abeb7;">'example'</span>,2018<span style="color: #c5c8c6;">]</span> <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#21015;&#34920;&#32452;&#21512;&#20102;&#23383;&#31526;&#20018;&#21644;&#25968;&#23383;&#12290;</span>
<span style="color: #f0c674;">b_list</span> = <span style="color: #c5c8c6;">[]</span> <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#31354;&#21015;&#34920;&#65292;&#31354;&#21015;&#34920;&#20316;&#20026;&#26465;&#20214;&#34920;&#36798;&#24335;&#65292;&#20854;&#20540;&#20026;False</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20351;&#29992;&#21015;&#34920;&#20316;&#20026;&#26465;&#20214;&#34920;&#36798;&#24335;&#65292;&#29992;&#20110;&#31243;&#24207;&#20998;&#25903;&#32467;&#26500;</span>
<span style="color: #b5bd68;">if</span> b_list:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'True'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">else</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'False'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20351;&#29992;list()&#21019;&#24314;&#21015;&#34920;</span>
<span style="color: #f0c674;">c_list</span> = <span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">(</span>3, 5, 7, 9, 11<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#23558;&#20803;&#32452;&#23545;&#35937;&#36716;&#25442;&#20026;&#21015;&#34920;&#23545;&#35937;</span>
<span style="color: #f0c674;">d_list</span> = <span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>1, 10, 2<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#23558;range&#23545;&#35937;&#36716;&#25442;&#20026;&#21015;&#34920;</span>
<span style="color: #f0c674;">e_list</span> = <span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'hello, world!'</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#23558;&#23383;&#31526;&#20018;&#36716;&#25442;&#20026;&#21015;&#34920;</span>
<span style="color: #f0c674;">f_list</span> = <span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#31354;&#21015;&#34920;</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#35299;&#32465;&#21464;&#37327;&#65292;&#21516;&#26102;&#21024;&#38500;&#23545;&#35937;</span>
<span style="color: #b5bd68;">del</span> a_list  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21024;&#38500;&#21015;&#34920;&#32465;&#23450;&#30340;&#21464;&#37327;&#65292;&#22914;&#26524;&#35813;&#21464;&#37327;&#25351;&#21521;&#30340;&#21015;&#34920;&#23545;&#35937;&#27809;&#26377;&#32465;&#23450;&#20854;&#20182;</span>
            <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21464;&#37327;&#65292;&#23558;&#21516;&#26102;&#21024;&#38500;&#21015;&#34920;&#23545;&#35937;&#12290;</span>
a_list      <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#25253;&#38169; NameError: name 'a_list' is not defined&#65292;&#25253;&#38169;&#20869;&#23481;&#20026;&#21517;&#23383;</span>
            <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#19981;&#23384;&#22312;&#65292;&#27809;&#35828;&#21015;&#34920;&#19981;&#23384;&#22312;&#65292;&#24847;&#25351;a_list&#27809;&#26377;&#32465;&#23450;&#20219;&#20309;&#20540;&#12290;</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#35299;&#32465;&#21464;&#37327;&#65292;&#32780;&#27809;&#26377;&#21024;&#38500;&#23545;&#35937;</span>
<span style="color: #f0c674;">g_list</span> = d_list
<span style="color: #b5bd68;">del</span> d_list  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21024;&#38500;&#21464;&#37327;</span>
d_list
g_list      <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#30001;&#20110;g_list&#19982;&#35813;&#21015;&#34920;&#23545;&#35937;&#32465;&#23450;&#65292;&#22240;&#27492;&#65292;d_list&#21464;&#37327;&#35299;&#32465;&#21024;&#38500;&#20102;</span>
            <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#35813;&#21015;&#34920;&#23545;&#35937;&#27809;&#26377;&#21024;&#38500;&#65292;&#36890;&#36807;g_list&#20381;&#28982;&#21487;&#20197;&#35775;&#38382;&#20351;&#29992;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-2-2" class="outline-4">
<h4 id="sec-4-2-2"><span class="section-number-4">4.2.2</span> 常用序列操作</h4>
<div class="outline-text-4" id="text-4-2-2">
<ul class="org-ul">
<li>这些操作适用于所有序列，当然适用于列表和字符串。
<ul class="org-ul">
<li>索引
</li>
<li>切片
</li>
<li>增加
</li>
<li>倍增
</li>
<li>归属
</li>
</ul>
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-4-2-2-1" name="sec-4-2-2-1"></a>索引 Indexing<br  /><div class="outline-text-5" id="text-4-2-2-1">
<ul class="org-ul">
<li>序列中所有元素都索引编号，从0起始。
</li>
<li>使用元素的索引编号，取得元素值,称为索引。索引可以取负值。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">greeting</span> = <span style="color: #8abeb7;">'hello'</span>
greeting<span style="color: #c5c8c6;">[</span>0<span style="color: #c5c8c6;">]</span>
greeting<span style="color: #c5c8c6;">[</span>-1<span style="color: #c5c8c6;">]</span>

<span style="color: #f0c674;">a_list</span> = <span style="color: #c5c8c6;">[</span>3, 4, 5, 7<span style="color: #c5c8c6;">]</span>
a_list<span style="color: #c5c8c6;">[</span>4<span style="color: #c5c8c6;">]</span> <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">out of range</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-2-2" name="sec-4-2-2-2"></a>切片 Slicing<br  /><div class="outline-text-5" id="text-4-2-2-2">
<ul class="org-ul">
<li>使用索引访问单个元素，使用切片可以访问连续数个元素
</li>
<li>一般使用两个索引，中间一个冒号
<ul class="org-ul">
<li>注意序列从0计数
</li>
<li>切片第一个索引的元素在，而第二个索引元素不在访问范围内
</li>
<li>第一个索引位置要在第二个索引前，颠倒了，只能得到空序列。
</li>
<li>切片可以使用3个数字，第三个称为步长number[0:10:2]
</li>
</ul>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">tag</span> = <span style="color: #8abeb7;">'&lt;a href="http://www.python.org"&gt;Python web site&lt;/a&gt;'</span>
tag<span style="color: #c5c8c6;">[</span>9:30<span style="color: #c5c8c6;">]</span>
tag<span style="color: #c5c8c6;">[</span>32:-4<span style="color: #c5c8c6;">]</span>

<span style="color: #f0c674;">numbers</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3, 4, 5, 6, 7, 8, 9, 10<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>3:6<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>0:1<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>7:10<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>-3:-1<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>-3:0<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>-3:<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>:3<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>:<span style="color: #c5c8c6;">]</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">if the leftmost index comes later in the sequence than the second</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">one, the results is always an empty sequence.</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20999;&#29255;&#27493;&#38271;</span>
numbers<span style="color: #c5c8c6;">[</span>0:10:1<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>0:10:2<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>3:6:3<span style="color: #c5c8c6;">]</span>
number<span style="color: #c5c8c6;">[</span>::4<span style="color: #c5c8c6;">]</span>
number<span style="color: #c5c8c6;">[</span>8:3:-1<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>10:0:-2<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>0:10:-2<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>::-2<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>5::-2<span style="color: #c5c8c6;">]</span>
numbers<span style="color: #c5c8c6;">[</span>:5:-2<span style="color: #c5c8c6;">]</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python">  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">print out a date, given year, month, and day as numbers</span>
  <span style="color: #f0c674;">months</span> = <span style="color: #c5c8c6;">[</span>
  <span style="color: #8abeb7;">'January'</span>,
  <span style="color: #8abeb7;">'February'</span>,
  <span style="color: #8abeb7;">'March'</span>,
  <span style="color: #8abeb7;">'April'</span>,
  <span style="color: #8abeb7;">'May'</span>,
  <span style="color: #8abeb7;">'June'</span>,
  <span style="color: #8abeb7;">'July'</span>,
  <span style="color: #8abeb7;">'August'</span>,
  <span style="color: #8abeb7;">'September'</span>,
  <span style="color: #8abeb7;">'October'</span>,
  <span style="color: #8abeb7;">'November'</span>,
  <span style="color: #8abeb7;">'December'</span>
  <span style="color: #c5c8c6;">]</span>

  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">A list with one ending for each number form 1 to 31</span>
  <span style="color: #f0c674;">endings</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'st'</span>, <span style="color: #8abeb7;">'nd'</span>, <span style="color: #8abeb7;">'rd'</span><span style="color: #c5c8c6;">]</span> + 17 * <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'th'</span><span style="color: #c5c8c6;">]</span> \
          + <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'st'</span>, <span style="color: #8abeb7;">'nd'</span>, <span style="color: #8abeb7;">'rd'</span><span style="color: #c5c8c6;">]</span> + 7 * <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'th'</span><span style="color: #c5c8c6;">]</span> \
          <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'st'</span><span style="color: #c5c8c6;">]</span>

<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">year = input('Year:')</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">month = input('Month(1-12):')</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">day = inpu('Day(1-31):')</span>

  <span style="color: #f0c674;">year</span> = 1974
  <span style="color: #f0c674;">month</span> = 8
  <span style="color: #f0c674;">day</span> = 16

  <span style="color: #f0c674;">month_number</span> = <span style="color: #b294bb;">int</span><span style="color: #c5c8c6;">(</span>month<span style="color: #c5c8c6;">)</span>
  <span style="color: #f0c674;">day_number</span> = <span style="color: #b294bb;">int</span><span style="color: #c5c8c6;">(</span>day<span style="color: #c5c8c6;">)</span>

  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Remember to substract 1 from month and day to get a correct index</span>
  <span style="color: #f0c674;">month_name</span> = months<span style="color: #c5c8c6;">[</span>month_number - 1<span style="color: #c5c8c6;">]</span>
  <span style="color: #f0c674;">ordinal</span> = <span style="color: #b294bb;">str</span><span style="color: #c5c8c6;">(</span>day<span style="color: #c5c8c6;">)</span> + endings<span style="color: #c5c8c6;">[</span>day_number - 1<span style="color: #c5c8c6;">]</span>

  <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>month_name + <span style="color: #8abeb7;">' '</span> + ordinal + <span style="color: #8abeb7;">','</span> + <span style="color: #b294bb;">str</span><span style="color: #8abeb7;">(</span>year<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-2-3" name="sec-4-2-2-3"></a>增加 Adding<br  /><div class="outline-text-5" id="text-4-2-2-3">
<ul class="org-ul">
<li>用+可以拼接(concatenate)序列。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #c5c8c6;">[</span>1, 2, 3<span style="color: #c5c8c6;">]</span> + <span style="color: #c5c8c6;">[</span>4, 5, 6<span style="color: #c5c8c6;">]</span>
<span style="color: #8abeb7;">'Hello, '</span> + <span style="color: #8abeb7;">'world!'</span>
<span style="color: #c5c8c6;">[</span>1, 2, 3<span style="color: #c5c8c6;">]</span> + <span style="color: #8abeb7;">'world!'</span> <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">TypeError</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27880;&#24847;&#65306;&#23613;&#31649;&#21015;&#34920;&#21644;&#23383;&#31526;&#20018;&#37117;&#26159;&#24207;&#21015;&#65292;&#20294;&#19981;&#33021;&#25340;&#25509;&#19981;&#21516;&#31867;&#22411;&#30340;&#24207;&#21015;&#12290;</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-2-4" name="sec-4-2-2-4"></a>倍增 Multiplication<br  /><div class="outline-text-5" id="text-4-2-2-4">
<ul class="org-ul">
<li>使用*倍增原序列。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8abeb7;">'python'</span> * 5
<span style="color: #c5c8c6;">[</span>42<span style="color: #c5c8c6;">]</span> * 10
<span style="color: #c5c8c6;">[</span><span style="color: #81a2be;">None</span><span style="color: #c5c8c6;">]</span> * 10
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">[] &#31354;&#21015;&#34920;&#27809;&#26377;&#20540;</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">None &#34920;&#31034;&#26377;&#19968;&#20010;&#20540;&#65292;&#36825;&#20010;&#20540;&#24847;&#21619;&#30528;&#8220;&#26080;&#8221;</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">prints a sentence in a centered "box" of correct width</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">sentence = input('Input a Sentence:')</span>
<span style="color: #f0c674;">sentence</span> = <span style="color: #8abeb7;">'He is a very naughty boy.'</span>

<span style="color: #f0c674;">screen_width</span> = 80
<span style="color: #f0c674;">text_width</span> = <span style="color: #b294bb;">len</span><span style="color: #c5c8c6;">(</span>sentence<span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">box_width</span> = text_width + 6
<span style="color: #f0c674;">left_margin</span> = <span style="color: #c5c8c6;">(</span>screen_width - box_width<span style="color: #c5c8c6;">)</span> // 2

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">()</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">' '</span> * left_margin + <span style="color: #8abeb7;">'+'</span>  + <span style="color: #8abeb7;">'-'</span> * <span style="color: #8abeb7;">(</span>box_width - 2<span style="color: #8abeb7;">)</span> + <span style="color: #8abeb7;">'+'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">' '</span> * left_margin + <span style="color: #8abeb7;">'|'</span>  + <span style="color: #8abeb7;">' '</span> * text_width      + <span style="color: #8abeb7;">'    |'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">' '</span> * left_margin + <span style="color: #8abeb7;">'|'</span>  +       sentence        + <span style="color: #8abeb7;">'    |'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">' '</span> * left_margin + <span style="color: #8abeb7;">'|'</span>  + <span style="color: #8abeb7;">' '</span> * text_width      + <span style="color: #8abeb7;">'    |'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">' '</span> * left_margin + <span style="color: #8abeb7;">'+'</span>  + <span style="color: #8abeb7;">'-'</span> * <span style="color: #8abeb7;">(</span>box_width - 2<span style="color: #8abeb7;">)</span> + <span style="color: #8abeb7;">'+'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-2-5" name="sec-4-2-2-5"></a>归属 Membership<br  /><div class="outline-text-5" id="text-4-2-2-5">
<ul class="org-ul">
<li>使用in检查元素是否在序列中，返回布尔值。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">p</span> = <span style="color: #8abeb7;">'rw'</span>
<span style="color: #8abeb7;">'w'</span> <span style="color: #b5bd68;">in</span> p
<span style="color: #8abeb7;">'x'</span> <span style="color: #b5bd68;">in</span> p
<span style="color: #8abeb7;">'x'</span> <span style="color: #b5bd68;">not</span> <span style="color: #b5bd68;">in</span> p

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Check a user name and PIN code</span>
<span style="color: #f0c674;">database</span> = <span style="color: #c5c8c6;">[</span>
<span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'albert'</span>, <span style="color: #8abeb7;">'1234'</span><span style="color: #8abeb7;">]</span>,
<span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'dilbert'</span>, <span style="color: #8abeb7;">'4242'</span><span style="color: #8abeb7;">]</span>,
<span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'smith'</span> <span style="color: #8abeb7;">'7524'</span><span style="color: #8abeb7;">]</span>,
<span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'jones'</span>, <span style="color: #8abeb7;">'9843]</span>
<span style="color: #8abeb7;">]</span>

<span style="color: #8abeb7;"># username = input('</span>User Name: <span style="color: #8abeb7;">')</span>
<span style="color: #8abeb7;"># pin = input('</span>PIN code: <span style="color: #8abeb7;">')</span>

<span style="color: #8abeb7;">username = '</span>jones<span style="color: #8abeb7;">'</span>
<span style="color: #8abeb7;">pin = '</span>9843<span style="color: #8abeb7;">'</span>

<span style="color: #8abeb7;">if [username, pin] in database:</span>
<span style="color: #8abeb7;">    print('</span>Access granted!<span style="color: #8abeb7;">')</span>
<span style="color: #8abeb7;">else:</span>
<span style="color: #8abeb7;">    print('</span>Access denied!<span style="color: #8abeb7;">')</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-2-6" name="sec-4-2-2-6"></a>有用的内置函数<br  /><div class="outline-text-5" id="text-4-2-2-6">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">numbers</span> = <span style="color: #c5c8c6;">[</span>100, 34, 678<span style="color: #c5c8c6;">]</span>
<span style="color: #b294bb;">len</span><span style="color: #c5c8c6;">(</span>numbers<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">max</span><span style="color: #c5c8c6;">(</span>numbers<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">min</span><span style="color: #c5c8c6;">(</span>numbers<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">zip</span><span style="color: #c5c8c6;">()</span>
<span style="color: #b294bb;">enumerate</span><span style="color: #c5c8c6;">()</span>
<span style="color: #b294bb;">reversed</span><span style="color: #c5c8c6;">(</span>seq<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">sorted</span><span style="color: #c5c8c6;">(</span>seq<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">tuple</span><span style="color: #c5c8c6;">(</span>seq<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li></ol>
</div>

<div id="outline-container-sec-4-2-3" class="outline-4">
<h4 id="sec-4-2-3"><span class="section-number-4">4.2.3</span> 添加、修改、删除列表元素</h4>
<div class="outline-text-4" id="text-4-2-3">
<ul class="org-ul">
<li>列表作为序列一种，除上面常用操作外，特别之处在于列表可修改(mutable)。
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-4-2-3-1" name="sec-4-2-3-1"></a>基本操作<br  /><ol class="org-ol"><li><a id="sec-4-2-3-1-1" name="sec-4-2-3-1-1"></a>赋值<br  /><div class="outline-text-6" id="text-4-2-3-1-1">
<ul class="org-ul">
<li>给某个索引位置赋值。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[</span>1, 1, 1<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">x</span><span style="color: #c5c8c6;">[</span>1<span style="color: #c5c8c6;">]</span> = 2
x
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-3-1-2" name="sec-4-2-3-1-2"></a>删除元素<br  /><div class="outline-text-6" id="text-4-2-3-1-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b294bb;">len</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">del</span> x<span style="color: #c5c8c6;">[</span>1<span style="color: #c5c8c6;">]</span>
x
<span style="color: #b294bb;">len</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>删除元素后，该元素消失，列表长度改变。
</li>
</ul>
</div>
</li>

<li><a id="sec-4-2-3-1-3" name="sec-4-2-3-1-3"></a>切片赋值<br  /><div class="outline-text-6" id="text-4-2-3-1-3">
<ul class="org-ul">
<li>切片赋值是给若干个连续位置赋值。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">name</span> = <span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'perl'</span><span style="color: #c5c8c6;">)</span>
name
<span style="color: #f0c674;">name</span><span style="color: #c5c8c6;">[</span>2:<span style="color: #c5c8c6;">]</span> = <span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'ar'</span><span style="color: #c5c8c6;">)</span>
name

<span style="color: #f0c674;">a</span> = <span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Perl'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">a</span><span style="color: #c5c8c6;">[</span>1:<span style="color: #c5c8c6;">]</span> = <span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'ython'</span><span style="color: #c5c8c6;">)</span>
a
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#30456;&#24403;&#20110;&#25554;&#20837;&#26032;&#20803;&#32032;</span>

<span style="color: #f0c674;">n</span> = <span style="color: #c5c8c6;">[</span>1, 5<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">n</span><span style="color: #c5c8c6;">[</span>1:1<span style="color: #c5c8c6;">]</span> = <span style="color: #c5c8c6;">[</span>2, 3, 4<span style="color: #c5c8c6;">]</span>
n

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20063;&#21487;&#29992;&#20110;&#21024;&#38500;&#20803;&#32032;</span>
<span style="color: #f0c674;">n</span><span style="color: #c5c8c6;">[</span>1:4<span style="color: #c5c8c6;">]</span> = <span style="color: #c5c8c6;">[]</span> <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#31561;&#20215;&#20110; del n[1:4]</span>
n
</pre>
</div>
</div>
</li></ol>
</li></ol>
</div>

<div id="outline-container-sec-4-2-4" class="outline-4">
<h4 id="sec-4-2-4"><span class="section-number-4">4.2.4</span> 列表方法</h4>
<div class="outline-text-4" id="text-4-2-4">
<ul class="org-ul">
<li>方法是紧密依附(绑定)某对象的函数。列表函数依附的对象是列表对象。调用方法语
法为：object.method(arguments)
</li>
<li>列表方法能访问和修改列表内容
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-4-2-4-1" name="sec-4-2-4-1"></a>append<br  /><div class="outline-text-5" id="text-4-2-4-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">lst</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3<span style="color: #c5c8c6;">]</span>
lst.append<span style="color: #c5c8c6;">(</span>4<span style="color: #c5c8c6;">)</span>
lst
</pre>
</div>

<ul class="org-ul">
<li>append方法是所谓“就地改变(change the list in place)”。这意味这，该方
法没有返回一个新的修改过的列表对象，而是直接修改原列表对象。
<ul class="org-ul">
<li>快、节省空间，但丢失了原对象
</li>
</ul>
</li>
</ul>
</div>
</li>

<li><a id="sec-4-2-4-2" name="sec-4-2-4-2"></a>count<br  /><div class="outline-text-5" id="text-4-2-4-2">
<ul class="org-ul">
<li>计算元素出现的次数。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'to'</span>, <span style="color: #8abeb7;">'be'</span>, <span style="color: #8abeb7;">'or'</span>, <span style="color: #8abeb7;">'not'</span>, <span style="color: #8abeb7;">'to'</span>, <span style="color: #8abeb7;">'be'</span><span style="color: #c5c8c6;">]</span>.count<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'to)</span>

<span style="color: #8abeb7;">x = [[1,2], 1, 1, [2, 1, [1, 2]]]</span>
<span style="color: #8abeb7;">x.count(1)</span>
<span style="color: #8abeb7;">x.count([1, 2])</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-4-3" name="sec-4-2-4-3"></a>extend<br  /><div class="outline-text-5" id="text-4-2-4-3">
<ul class="org-ul">
<li>extend允许一次增加若干新元素。
</li>
<li>原列表对象扩展为新列表对象
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">a</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">b</span> = <span style="color: #c5c8c6;">[</span>4, 5, 6<span style="color: #c5c8c6;">]</span>
a.extend<span style="color: #c5c8c6;">(</span>b<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">a&#34987;&#20462;&#25913;&#20102;&#65292;&#19981;&#20877;&#26159;&#21407;&#26469;&#20540;&#65292;&#22240;&#27492;&#31216;&#20026;&#23601;&#22320;&#20462;&#25913;in place.</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27604;&#36739;</span>
a + b
a  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">a&#27809;&#26377;&#25913;&#21464;</span>
<span style="color: #f0c674;">a</span> = a + b <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#25913;&#21464;&#20102;&#65292;&#30456;&#24403;&#20110;&#23558;a&#32465;&#23450;&#21040;a + b&#20540;</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21487;&#20197;&#29992;&#20999;&#29255;&#36171;&#20540;&#23454;&#29616;extend&#21151;&#33021;</span>
<span style="color: #f0c674;">a</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">b</span> = <span style="color: #c5c8c6;">[</span>4, 5, 6<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">a</span><span style="color: #c5c8c6;">[</span><span style="color: #b294bb;">len</span><span style="color: #8abeb7;">(</span>a<span style="color: #8abeb7;">)</span>:<span style="color: #c5c8c6;">]</span> = b
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-4-4" name="sec-4-2-4-4"></a>index<br  /><div class="outline-text-5" id="text-4-2-4-4">
<ul class="org-ul">
<li>index（）方法可以获取指定元素首次出现的下标，若不存在则抛出异常（报
错），即以值求索引
</li>
<li>与以索引求值互为反操作
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">knights</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'we'</span>, <span style="color: #8abeb7;">'are'</span>, <span style="color: #8abeb7;">'the'</span>, <span style="color: #8abeb7;">'knights'</span>, <span style="color: #8abeb7;">'who'</span>, <span style="color: #8abeb7;">'we'</span>,<span style="color: #8abeb7;">'say'</span>, <span style="color: #8abeb7;">'ni'</span><span style="color: #c5c8c6;">]</span>
knights.index<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'we'</span><span style="color: #c5c8c6;">)</span>
knights.index<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'herring'</span><span style="color: #c5c8c6;">)</span>
knights.index<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'who'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#23545;&#27604;</span>
knights<span style="color: #c5c8c6;">[</span>4<span style="color: #c5c8c6;">]</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-4-5" name="sec-4-2-4-5"></a>insert<br  /><div class="outline-text-5" id="text-4-2-4-5">
<ul class="org-ul">
<li>将一个对象插入到列表中。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">numbers</span> = <span style="color: #c5c8c6;">[</span>1,2,3,4,5,6,7<span style="color: #c5c8c6;">]</span>
numbers.insert<span style="color: #c5c8c6;">(</span>3, <span style="color: #8abeb7;">'four'</span><span style="color: #c5c8c6;">)</span>
numbers

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21487;&#20197;&#29992;&#20999;&#29255;&#36171;&#20540;&#23454;&#29616;insert&#21151;&#33021;</span>
<span style="color: #f0c674;">numbers</span><span style="color: #c5c8c6;">[</span>3:3<span style="color: #c5c8c6;">]</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'Five'</span><span style="color: #c5c8c6;">]</span>
numbers
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-4-6" name="sec-4-2-4-6"></a>pop<br  /><div class="outline-text-5" id="text-4-2-4-6">
<ul class="org-ul">
<li>pop从列表删除一个元素（默认是最后一个），并返回这个元素的值
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3<span style="color: #c5c8c6;">]</span>
x.pop<span style="color: #c5c8c6;">()</span>
x
x.pop<span style="color: #c5c8c6;">(</span>0<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#31227;&#38500;&#25351;&#23450;&#20803;&#32032;</span>
x
</pre>
</div>

<ul class="org-ul">
<li>pop方法是列表方法中唯一一个既修改列表又返回值（非None值）的方法
</li>
<li>pop方法可用于实现栈
</li>
</ul>
</div>
</li>

<li><a id="sec-4-2-4-7" name="sec-4-2-4-7"></a>remove<br  /><div class="outline-text-5" id="text-4-2-4-7">
<ul class="org-ul">
<li>删除某值，只删除第一次出现的该元素值
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'to'</span>, <span style="color: #8abeb7;">'be'</span>, <span style="color: #8abeb7;">'or'</span>, <span style="color: #8abeb7;">'not'</span>, <span style="color: #8abeb7;">'to'</span>, <span style="color: #8abeb7;">'be'</span><span style="color: #c5c8c6;">]</span>
x.remove<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'be'</span><span style="color: #c5c8c6;">)</span>
x
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27880;&#24847;&#31532;&#20108;&#20010;be&#20173;&#22312;</span>
</pre>
</div>

<ul class="org-ul">
<li>这种方法称为“就地改变而不返回值(nonreturning in-place changing)”，与
pop正相反，它修改了列表，但不返回值。这种静默修改，不会给出提示，容
易让人忽略列表发生的改变。
</li>
</ul>
</div>
</li>

<li><a id="sec-4-2-4-8" name="sec-4-2-4-8"></a>reverse<br  /><div class="outline-text-5" id="text-4-2-4-8">
<ul class="org-ul">
<li>倒转列表
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3<span style="color: #c5c8c6;">]</span>
x.reverse<span style="color: #c5c8c6;">()</span>
x
</pre>
</div>
</div>
</li>

<li><a id="sec-4-2-4-9" name="sec-4-2-4-9"></a>sort<br  /><div class="outline-text-5" id="text-4-2-4-9">
<ul class="org-ul">
<li>sort方法是就地排序，排序后改变了原列表。与函数sorted对比，sorted是生
成新列表对象。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[</span>4, 6, 2, 1, 7, 9<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">y</span> = x.sort<span style="color: #c5c8c6;">()</span>
x
y <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">None</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">sort &#25913;&#21464;&#20102;&#36820;&#22238;&#20540;None,a&#24471;&#21040;&#30340;&#32467;&#26524;&#26159;&#25490;&#22909;&#24207;&#30340;x&#21644;&#20540;&#20026;None&#30340;y</span>

<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[</span>4, 6, 2, 1, 7, 9<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">y</span> = x<span style="color: #c5c8c6;">[</span>:<span style="color: #c5c8c6;">]</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#23558;x&#30340;&#19968;&#20221;&#25335;&#36125;&#32465;&#23450;&#21040;y&#65292;&#20877;&#25490;&#24207;&#12290;x&#20445;&#25345;&#19981;&#21464;&#65292;&#21516;&#26102;&#24471;&#21040;&#25490;&#24207;&#30340;x</span>
          <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">x[:]&#26159;&#20999;&#29255;&#25805;&#20316;&#65292;&#21019;&#24314;&#19968;&#20221;x&#30340;&#25335;&#36125;</span>
y.sort<span style="color: #c5c8c6;">()</span>
x
y
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">y = x&#26159;&#19981;&#34892;&#30340;&#65292;&#36825;&#30456;&#24403;&#20110;&#23558;x,y&#32465;&#23450;&#21040;&#21516;&#19968;&#20010;&#21015;&#34920;&#23545;&#35937;&#12290;</span>
<span style="color: #f0c674;">y</span>=x
y.sort<span style="color: #c5c8c6;">()</span>
x
y

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21478;&#19968;&#31181;&#20445;&#25345;&#21407;&#21015;&#34920;&#19981;&#21464;&#65292;&#21448;&#24471;&#21040;&#19968;&#20010;&#35813;&#21015;&#34920;&#25490;&#24207;&#32467;&#26524;&#30340;&#26041;&#24335;&#26159;&#20351;&#29992;sorted&#20989;&#25968;</span>
x
<span style="color: #f0c674;">y</span> = <span style="color: #b294bb;">sorted</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>
x
y
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="sec-4-2-4-9-1" name="sec-4-2-4-9-1"></a>高级排序 advanced sorting<br  /><div class="outline-text-6" id="text-4-2-4-9-1">
<ul class="org-ul">
<li>sort()方法有两个可选参数（optional arguments）: key, reverse。这两个
是关键字参数(key arguments)。设置这两个参数可以改变sort()方法的行为。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'aardvark'</span>, <span style="color: #8abeb7;">'abalone'</span>, <span style="color: #8abeb7;">'acme'</span>, <span style="color: #8abeb7;">'add'</span>, <span style="color: #8abeb7;">'aerate'</span><span style="color: #c5c8c6;">]</span>
x.sort<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#40664;&#35748;&#25490;&#24207;&#65292;&#23383;&#20856;&#24207;</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'aardvark'</span>, <span style="color: #8abeb7;">'abalone'</span>, <span style="color: #8abeb7;">'acme'</span>, <span style="color: #8abeb7;">'add'</span>, <span style="color: #8abeb7;">'aerate'</span><span style="color: #c5c8c6;">]</span>
x.sort<span style="color: #c5c8c6;">(</span>key=<span style="color: #b294bb;">len</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#23558;len&#20989;&#25968;&#21517;&#31216;&#36171;&#20110;&#21442;&#25968;key&#65292;&#27714;&#20803;&#32032;&#38271;&#24230;&#65292;&#25353;&#20803;&#32032;&#38271;&#24230;&#21319;&#24207;&#25490;&#24207;</span>
                 <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">high-order function</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[</span>4, 6, 2, 1, 7, 9<span style="color: #c5c8c6;">]</span>
x.sort<span style="color: #c5c8c6;">(</span>reverse=<span style="color: #81a2be;">True</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#23558;&#24067;&#23572;&#20540;&#36171;&#20110;reverse,&#23558;&#21015;&#34920;&#38477;&#24207;&#25490;&#24207;</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'aardvark'</span>, <span style="color: #8abeb7;">'abalone'</span>, <span style="color: #8abeb7;">'acme'</span>, <span style="color: #8abeb7;">'add'</span>, <span style="color: #8abeb7;">'aerate'</span><span style="color: #c5c8c6;">]</span>
x.sort<span style="color: #c5c8c6;">(</span>key=<span style="color: #b294bb;">len</span>, reverse=<span style="color: #81a2be;">True</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26082;&#25351;&#23450;&#25353;&#38271;&#24230;&#25490;&#24207;&#65292;&#21448;&#25351;&#23450;&#25490;&#24207;&#26041;&#24335;&#20026;&#38477;&#24207;</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li></ol>
</li></ol>
</div>

<div id="outline-container-sec-4-2-5" class="outline-4">
<h4 id="sec-4-2-5"><span class="section-number-4">4.2.5</span> 列表推导</h4>
<div class="outline-text-4" id="text-4-2-5">
<ul class="org-ul">
<li>列表是python的workhorse，而在列表技术中，列表推导(list
comprehensione，来源于Haskell)是开发应用最多的技术之一
</li>
<li>列表推导就一个目的：生成列表
</li>
<li>其技术功能类似循环，又非常简洁，在很多地方替代了循环
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">example 1.</span>
<span style="color: #f0c674;">alist</span> = <span style="color: #c5c8c6;">[</span>x*x <span style="color: #b5bd68;">for</span> x <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>10<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">]</span>

<span style="color: #f0c674;">al</span> = <span style="color: #c5c8c6;">[]</span>
   <span style="color: #b5bd68;">for</span> x <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>10<span style="color: #c5c8c6;">)</span>:
       al.append<span style="color: #c5c8c6;">(</span>x*x<span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">2. &#24102;&#26465;&#20214;&#30340;&#21015;&#34920;&#25512;&#23548;</span>
<span style="color: #f0c674;">b_list</span> = <span style="color: #c5c8c6;">[</span>x*x <span style="color: #b5bd68;">for</span> x <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>10<span style="color: #8abeb7;">)</span> <span style="color: #b5bd68;">if</span> x%3 == 0<span style="color: #c5c8c6;">]</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">3.&#29983;&#25104;&#22797;&#21512;&#20803;&#32032;&#30340;&#25512;&#23548;</span>
<span style="color: #f0c674;">c_list</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">(</span>x, y<span style="color: #8abeb7;">)</span> <span style="color: #b5bd68;">for</span> x <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>3<span style="color: #8abeb7;">)</span> <span style="color: #b5bd68;">for</span> y <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>3<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">]</span>

<span style="color: #f0c674;">result</span> = <span style="color: #c5c8c6;">[]</span>
<span style="color: #b5bd68;">for</span> x <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>3<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">for</span> y <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>3<span style="color: #c5c8c6;">)</span>:
        result.append<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">(</span>x, y<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">4. &#21452;&#21015;&#34920;&#25353;&#29305;&#23450;&#26465;&#20214;&#34920;&#36798;&#24335;&#32452;&#25104;&#22797;&#21512;&#20803;&#32032;&#21015;&#34920;</span>
<span style="color: #f0c674;">girls</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'alice'</span>, <span style="color: #8abeb7;">'bernice'</span>, <span style="color: #8abeb7;">'clarice'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">boys</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'chris'</span>, <span style="color: #8abeb7;">'arnold'</span>, <span style="color: #8abeb7;">'bob'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #c5c8c6;">[</span>b+<span style="color: #8abeb7;">'+'</span>+g <span style="color: #b5bd68;">for</span> b <span style="color: #b5bd68;">in</span> boys <span style="color: #b5bd68;">for</span> g <span style="color: #b5bd68;">in</span> girls <span style="color: #b5bd68;">if</span> b<span style="color: #8abeb7;">[</span>0<span style="color: #8abeb7;">]</span>==g<span style="color: #8abeb7;">[</span>0<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">]</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">5. &#23884;&#22871;&#21015;&#34920;&#24179;&#38138;</span>
<span style="color: #f0c674;">vec</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">[</span>1,2,3<span style="color: #8abeb7;">]</span>, <span style="color: #8abeb7;">[</span>4,5,6<span style="color: #8abeb7;">]</span>, <span style="color: #8abeb7;">[</span>7,8,9<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">]</span>
<span style="color: #c5c8c6;">[</span>num <span style="color: #b5bd68;">for</span> elem <span style="color: #b5bd68;">in</span> vec <span style="color: #b5bd68;">for</span> num <span style="color: #b5bd68;">in</span> elem<span style="color: #c5c8c6;">]</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">6. &#29983;&#25104;100&#20197;&#20869;&#25152;&#26377;&#32032;&#25968;</span>
<span style="color: #b5bd68;">import</span> math
<span style="color: #c5c8c6;">[</span>p <span style="color: #b5bd68;">for</span> p <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>2, 100<span style="color: #8abeb7;">)</span> <span style="color: #b5bd68;">if</span> 0 <span style="color: #b5bd68;">not</span> <span style="color: #b5bd68;">in</span> <span style="color: #8abeb7;">[</span>p%d <span style="color: #b5bd68;">for</span> d <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #f0c674;">(</span>2, <span style="color: #b294bb;">int</span><span style="color: #b5bd68;">(</span>math.sqrt<span style="color: #81a2be;">(</span>p<span style="color: #81a2be;">)</span> + 1<span style="color: #b5bd68;">)</span><span style="color: #f0c674;">)</span><span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">]</span>
</pre>
</div>

<ul class="org-ul">
<li>注意：6的算法尽管紧凑，但可读性差。这种情况下，首选使用循环描述算法，
清晰简洁。因此，并不需要将所有循环都改为列表推导。
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> 元组</h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li>元组和列表一样也是序列数据类型，区别之处在于，元组的内容不可改变
(immutable)
</li>
<li>元组以()为界定符,以逗号(,)为分隔符
</li>
<li>创建单元素元组，必须元素后加“，”,创建元组的符号中，逗号是关键，仅有
括号不起作用
</li>
<li>tuple unpakcing: x, y, z = 1, 2, 3
</li>
<li>元组没有类似列表的方法
</li>
</ul>
</div>

<div id="outline-container-sec-4-3-1" class="outline-4">
<h4 id="sec-4-3-1"><span class="section-number-4">4.3.1</span> 创建元组</h4>
<div class="outline-text-4" id="text-4-3-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">at</span> = <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'a'</span>,<span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">atu</span> = <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'a'</span>, <span style="color: #8abeb7;">'b'</span>, <span style="color: #8abeb7;">'mpilgrim'</span>, <span style="color: #8abeb7;">'z'</span>, <span style="color: #8abeb7;">'example'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">autp</span> = <span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#31354;&#20803;&#32452;</span>

<span style="color: #f0c674;">a</span> = <span style="color: #c5c8c6;">(</span>3<span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">a</span> = 3,  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#21333;&#20803;&#32032;&#20803;&#32452;&#65292;&#24517;&#39035;&#20803;&#32032;&#21518;&#21152;&#8220;&#65292;&#8221;</span>
        <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#20803;&#32452;&#30340;&#31526;&#21495;&#20013;&#65292;&#36887;&#21495;&#26159;&#20851;&#38190;&#65292;&#20165;&#26377;&#25324;&#21495;&#19981;&#36215;&#20316;&#29992;</span>
<span style="color: #f0c674;">a</span> = 1, 2

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27604;&#36739;&#19979;&#38754;&#20004;&#21477;</span>
3 * <span style="color: #c5c8c6;">(</span>40+2<span style="color: #c5c8c6;">)</span>
3 * <span style="color: #c5c8c6;">(</span>40+2,<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">tuple</span><span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'abcdefg'</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">al</span> = <span style="color: #c5c8c6;">[</span>-1 ,-4, 6, 7.5, -2.3, 9, -11<span style="color: #c5c8c6;">]</span>
<span style="color: #b294bb;">tuple</span><span style="color: #c5c8c6;">(</span>al<span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">s</span> = <span style="color: #b294bb;">tuple</span>

<span style="color: #b5bd68;">del</span> s  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#21024;&#38500;&#20803;&#32452;</span>
       <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#21482;&#33021;&#21024;&#38500;&#20803;&#32452;&#65292;&#19981;&#33021;&#21024;&#38500;&#20803;&#32452;&#20803;&#32032;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-3-2" class="outline-4">
<h4 id="sec-4-3-2"><span class="section-number-4">4.3.2</span> 元组操作</h4>
<div class="outline-text-4" id="text-4-3-2">
<ul class="org-ul">
<li>可用索引和切片访问元组元素。
</li>
<li>元组用途：
</li>
</ul>
<p>
　+ 可用作映射的键
</p>
<ul class="org-ul">
<li>可用作内置函数和方法的返回值
</li>
<li>元组中数据一旦定义就不允许更改。访问和处理元组速度比列表快， 如果定
义一系列常量值，主要用于遍历元组元素，而不需要对元素进行修改，那么一
般建议使用元组而不用列表
</li>
</ul>
</div>
<ol class="org-ol"><li><a id="sec-4-3-2-1" name="sec-4-3-2-1"></a>特殊情况<br  /><div class="outline-text-5" id="text-4-3-2-1">
<ul class="org-ul">
<li>虽元组元素不可改变，但若元组元素为可变序列，如列表，情况有所不同。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">[</span>1, 2<span style="color: #8abeb7;">]</span>, 3<span style="color: #c5c8c6;">)</span>
x<span style="color: #c5c8c6;">[</span>0<span style="color: #c5c8c6;">][</span>0<span style="color: #c5c8c6;">]</span> = 5
x

x<span style="color: #c5c8c6;">[</span>0<span style="color: #c5c8c6;">]</span>.append<span style="color: #c5c8c6;">(</span>8<span style="color: #c5c8c6;">)</span>
x
</pre>
</div>
</div>
</li>

<li><a id="sec-4-3-2-2" name="sec-4-3-2-2"></a>序列解包<br  /><div class="outline-text-5" id="text-4-3-2-2">
<ul class="org-ul">
<li>表达式和语句一节，讲过序列解包，再看几个例子。可以对列表、元组等序列
类型进行解包
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">keys</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'a'</span>, <span style="color: #8abeb7;">'b'</span>, <span style="color: #8abeb7;">'c'</span>, <span style="color: #8abeb7;">'d'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">values</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3, 4<span style="color: #c5c8c6;">]</span>
<span style="color: #b5bd68;">for</span> k, v <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">zip</span><span style="color: #c5c8c6;">(</span>keys, values<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>k, v<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">vt</span> = <span style="color: #c5c8c6;">(</span>Fasle, 3.5, <span style="color: #8abeb7;">'exp'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #c5c8c6;">(</span>x, y, z<span style="color: #c5c8c6;">)</span> = vt
</pre>
</div>
</div>
</li></ol>
</div>

<div id="outline-container-sec-4-3-3" class="outline-4">
<h4 id="sec-4-3-3"><span class="section-number-4">4.3.3</span> 生成器推导式</h4>
<div class="outline-text-4" id="text-4-3-3">
<ul class="org-ul">
<li>generator comprehension生成器推导式与列表推导式非常接近，区别处，生
成器使用圆括号，而不是方括号
</li>
<li>列表推导式的结果是列表对象
</li>
<li>生成器推导式的结果却不是列表，也不是元组，而是一个生成器对象
</li>
<li>生成器是较新的技术
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">g</span> = <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">(</span>i+2<span style="color: #8abeb7;">)</span>**2 <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>10<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
g
<span style="color: #b294bb;">tuple</span><span style="color: #c5c8c6;">(</span>g<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">(</span>g<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">g</span> = <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">(</span>i+2<span style="color: #8abeb7;">)</span>**2 <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>10<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
g.__next__<span style="color: #c5c8c6;">()</span>
g.__next__<span style="color: #c5c8c6;">()</span>
<span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> g:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>i, end=<span style="color: #8abeb7;">''</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> 字典</h3>
<div class="outline-text-3" id="text-4-4">
<ul class="org-ul">
<li>序列中每个数据元素都有数字索引编号，可通过索引访问元素。与此形成对比，
映射中数据元素没有数字索引编号，而使用名字（键）作为索引来访问元素
</li>
<li>字典是映射数据类型。
</li>
<li>字典是无序的“键：值”对(key：value pairs)集合，要求键值唯一，不重复。
字典键只能由不可修改数据类型(immutable)充任，比如字符串、数字、元组
</li>
<li>但如果元组的元素是可改变数据类型的元素，比如，元组的元素是列表，那么
这种元组不能充任键
</li>
<li>列表不能充任键。因为，以可改变类型充任键，意味着键值可以修改，一旦修
改键值，无法保证与字典中的其他键值不冲突，无法保证键值唯一。
</li>
</ul>
</div>

<div id="outline-container-sec-4-4-1" class="outline-4">
<h4 id="sec-4-4-1"><span class="section-number-4">4.4.1</span> 字典用场</h4>
<div class="outline-text-4" id="text-4-4-1">
<ul class="org-ul">
<li>字典的用法是通过查找键，进而查到值
</li>
<li>变量即保存在由名字：值组成的字典中
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">a</span> = <span style="color: #c5c8c6;">(</span>1, 2, 3, 4, 5<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#20840;&#23616;&#21464;&#37327;</span>
<span style="color: #f0c674;">b</span> = <span style="color: #8abeb7;">'Hello, world.'</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#20840;&#23616;&#21464;&#37327;</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">demo</span><span style="color: #c5c8c6;">()</span>:
    <span style="color: #f0c674;">a</span> = 3            <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#23616;&#37096;&#21464;&#37327;</span>
    <span style="color: #f0c674;">b</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3<span style="color: #c5c8c6;">]</span>    <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#23616;&#37096;&#21464;&#37327;</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'locals:'</span>, <span style="color: #b294bb;">locals</span><span style="color: #8abeb7;">()</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'globals:'</span>, <span style="color: #b294bb;">globals</span><span style="color: #8abeb7;">()</span><span style="color: #c5c8c6;">)</span>

demo<span style="color: #c5c8c6;">()</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-4-2" class="outline-4">
<h4 id="sec-4-4-2"><span class="section-number-4">4.4.2</span> 创建和使用</h4>
<div class="outline-text-4" id="text-4-4-2">
<ul class="org-ul">
<li>例： 有一本电话簿如下。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">names</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'Alice'</span>, <span style="color: #8abeb7;">'Beth'</span>, <span style="color: #8abeb7;">'Cecil'</span>, <span style="color: #8abeb7;">'Dee-Dee'</span>, <span style="color: #8abeb7;">'Earl'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">numbers</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'2341'</span>, <span style="color: #8abeb7;">'9102'</span>, <span style="color: #8abeb7;">'3158'</span>, <span style="color: #8abeb7;">'0142'</span>, <span style="color: #8abeb7;">'5551'</span> <span style="color: #c5c8c6;">]</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26597;&#25214;&#26576;&#20154;&#30005;&#35805;&#21495;</span>
numbers<span style="color: #c5c8c6;">[</span>names.index<span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'Cecil'</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">]</span>
</pre>
</div>

<ul class="org-ul">
<li>查找方式看上去很繁琐，人们熟悉的查找方式是用键（名字）找值（电话号），
形如：phonebook['Cecil']
</li>
<li>使用字典可以达到这种效果
</li>
<li>字典的键：值对，称为项(items)。字典由项组成。
</li>
<li>字典界定符为花括号{}，键值用冒号(：)分隔，项用逗号(，)分隔
</li>
<li>键必须唯一，值不必唯一
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#23383;&#20856;</span>
<span style="color: #f0c674;">phonebook</span> = <span style="color: #c5c8c6;">{</span><span style="color: #8abeb7;">'Alice'</span>: <span style="color: #8abeb7;">'2341'</span>, <span style="color: #8abeb7;">'Beth'</span>:<span style="color: #8abeb7;">'9102'</span>, <span style="color: #8abeb7;">'Cecil'</span>: <span style="color: #8abeb7;">'3258'</span>, <span style="color: #8abeb7;">'Dee-Dee'</span>: <span style="color: #8abeb7;">'0142'</span>, <span style="color: #8abeb7;">'Earl'</span>: <span style="color: #8abeb7;">'5551'</span><span style="color: #c5c8c6;">}</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26597;&#25214;&#26576;&#20154;&#30005;&#35805;&#21495;</span>
phonebook<span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'Cecil'</span><span style="color: #c5c8c6;">]</span>
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="sec-4-4-2-1" name="sec-4-4-2-1"></a>dict函数<br  /><div class="outline-text-5" id="text-4-4-2-1">
<ul class="org-ul">
<li>使用dict函数可以用其他字典或（键，值）对序列创建字典。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">items</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'name'</span>, <span style="color: #8abeb7;">'Adam'</span><span style="color: #8abeb7;">)</span>, <span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'age'</span>, 42<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">d</span> = <span style="color: #b294bb;">dict</span><span style="color: #c5c8c6;">(</span>items<span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">d = dict(name='Adam', age=42) &#20351;&#29992;&#20851;&#38190;&#23383;&#21442;&#25968;</span>
d
d<span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'name'</span><span style="color: #c5c8c6;">]</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21478;&#19968;&#31181;&#21019;&#24314;&#26041;&#24335;</span>
<span style="color: #f0c674;">k</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'a'</span>, <span style="color: #8abeb7;">'b'</span>, <span style="color: #8abeb7;">'c'</span>, <span style="color: #8abeb7;">'d'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">v</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3, 4<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">di</span> = <span style="color: #b294bb;">dict</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">zip</span><span style="color: #8abeb7;">(</span>k,v<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
di

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#31354;&#23383;&#20856;</span>
<span style="color: #f0c674;">x</span> = <span style="color: #b294bb;">dict</span><span style="color: #c5c8c6;">()</span>
<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">{}</span>
</pre>
</div>
</div>
</li></ol>
</div>

<div id="outline-container-sec-4-4-3" class="outline-4">
<h4 id="sec-4-4-3"><span class="section-number-4">4.4.3</span> 字典操作</h4>
<div class="outline-text-4" id="text-4-4-3">
<ul class="org-ul">
<li>len(d) 返回项个数
</li>
<li>d[k] 返回键k对应的值
</li>
<li>d[k] = v 将值v与键k对应起来。
</li>
<li>del d[k] 根据键k删除项
</li>
<li>k in d 检查以k为键的项是否归属与字典d
</li>
<li>字典与列表区别：
<ul class="org-ul">
<li>字典的键不必是整数，可以是任何不可修改类型的数据
</li>
<li>自动增长，依据键给项赋值时，只要字典中尚没有该键，python会自动给字
典创建一项。列表，如果超出索引范围，无法赋值
</li>
<li>字典归属操作，查找的是键，而非值。列表归属操作v in l查找的是列表的
值，而不是列表的索引编号
</li>
</ul>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#33258;&#21160;&#22686;&#38271;&#31034;&#20363; </span>
<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[]</span>
<span style="color: #f0c674;">x</span><span style="color: #c5c8c6;">[</span>42<span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'Foobar'</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">IndexError</span>

<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">{}</span>
<span style="color: #f0c674;">x</span><span style="color: #c5c8c6;">[</span>42<span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'Foobar'</span>
x
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">A simple database</span>

<span style="color: #f0c674;">people</span> = <span style="color: #c5c8c6;">{</span>
    <span style="color: #8abeb7;">'Alice'</span>: <span style="color: #8abeb7;">{</span>
        <span style="color: #8abeb7;">'phone'</span>: <span style="color: #8abeb7;">'2341'</span>,
        <span style="color: #8abeb7;">'addr'</span>: <span style="color: #8abeb7;">'Foo drive 23'</span>
    <span style="color: #8abeb7;">}</span>,

    <span style="color: #8abeb7;">'Beth'</span>: <span style="color: #8abeb7;">{</span>
        <span style="color: #8abeb7;">'phone'</span>: <span style="color: #8abeb7;">'9102'</span>,
        <span style="color: #8abeb7;">'addr'</span>: <span style="color: #8abeb7;">'Bar street 42'</span>
    <span style="color: #8abeb7;">}</span>,

    <span style="color: #8abeb7;">'Cecil'</span>: <span style="color: #8abeb7;">{</span>
        <span style="color: #8abeb7;">'phone'</span>: <span style="color: #8abeb7;">'3158'</span>,
        <span style="color: #8abeb7;">'addr'</span>: <span style="color: #8abeb7;">'Baz avenue 90'</span>
    <span style="color: #8abeb7;">}</span>
<span style="color: #c5c8c6;">}</span>

<span style="color: #f0c674;">labels</span> = <span style="color: #c5c8c6;">{</span>
    <span style="color: #8abeb7;">'phone'</span>: <span style="color: #8abeb7;">'phone number'</span>,
    <span style="color: #8abeb7;">'addr'</span>: <span style="color: #8abeb7;">'address'</span>
<span style="color: #c5c8c6;">}</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">name = input('Name:')</span>
<span style="color: #f0c674;">name</span> = <span style="color: #8abeb7;">'Cecil'</span>
<span style="color: #f0c674;">request</span> = <span style="color: #b294bb;">input</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Phone number(p) or address(a)?'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">if</span> request == <span style="color: #8abeb7;">'p'</span>:
    <span style="color: #f0c674;">key</span> = <span style="color: #8abeb7;">'phone'</span>
<span style="color: #b5bd68;">if</span> request == <span style="color: #8abeb7;">'a'</span>:
    <span style="color: #f0c674;">key</span> = <span style="color: #8abeb7;">'addr'</span>

<span style="color: #b5bd68;">if</span> name <span style="color: #b5bd68;">in</span> people:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"%s's %s is %s."</span> % <span style="color: #8abeb7;">(</span>name, labels<span style="color: #f0c674;">[</span>key<span style="color: #f0c674;">]</span>, people<span style="color: #f0c674;">[</span>name<span style="color: #f0c674;">][</span>key<span style="color: #f0c674;">]</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="sec-4-4-3-0-1" name="sec-4-4-3-0-1"></a>字典推导式<br  /><div class="outline-text-6" id="text-4-4-3-0-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #c5c8c6;">{</span>i:<span style="color: #b294bb;">str</span><span style="color: #8abeb7;">(</span>i<span style="color: #8abeb7;">)</span> <span style="color: #b5bd68;">for</span> i <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>1, 5<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">}</span>

<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'A'</span>, <span style="color: #8abeb7;">'B'</span>, <span style="color: #8abeb7;">'C'</span>, <span style="color: #8abeb7;">'D'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">y</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'Alice'</span>, <span style="color: #8abeb7;">'Bob'</span>, <span style="color: #8abeb7;">'Cecil'</span>, <span style="color: #8abeb7;">'David'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #c5c8c6;">{</span>i:j <span style="color: #b5bd68;">for</span> i,j <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">zip</span><span style="color: #8abeb7;">(</span>x,y<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">}</span>
</pre>
</div>
</div>
</li></ol>
</div>

<div id="outline-container-sec-4-4-4" class="outline-4">
<h4 id="sec-4-4-4"><span class="section-number-4">4.4.4</span> 字典方法</h4>
<div class="outline-text-4" id="text-4-4-4">
<ul class="org-ul">
<li>讲几个，余下自学。
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-4-4-4-1" name="sec-4-4-4-1"></a>clear<br  /><div class="outline-text-5" id="text-4-4-4-1">
<ul class="org-ul">
<li>清除所有字典项。这是个就地(in-place)操作，返回None
</li>
<li>比较下面的例子
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">example 1.</span>
<span style="color: #f0c674;">d</span> = <span style="color: #c5c8c6;">{}</span>
<span style="color: #f0c674;">d</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'name'</span><span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'Adam'</span>
<span style="color: #f0c674;">d</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'age'</span><span style="color: #c5c8c6;">]</span> = 39
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>d<span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">rv</span> = d.clear<span style="color: #c5c8c6;">()</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>rv<span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">example 2.</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">first scenario</span>
<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">{}</span>
<span style="color: #f0c674;">y</span> = x
<span style="color: #f0c674;">x</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'key'</span><span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'value'</span>
y
<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">{}</span>
y

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">second scenario</span>
<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">{}</span>
<span style="color: #f0c674;">y</span> = x
<span style="color: #f0c674;">x</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'key'</span><span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'value'</span>
y
x.clear<span style="color: #c5c8c6;">()</span>
y
</pre>
</div>

<ul class="org-ul">
<li>如果目的是删除字典的所有项，必须使用clear方法。
</li>
</ul>
</div>
</li>

<li><a id="sec-4-4-4-2" name="sec-4-4-4-2"></a>copy<br  /><div class="outline-text-5" id="text-4-4-4-2">
<ul class="org-ul">
<li>浅复制(shallow copy),原复件不同，值却相同
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">{</span><span style="color: #8abeb7;">'usrname'</span>:<span style="color: #8abeb7;">'admin'</span>, <span style="color: #8abeb7;">'machines'</span>:<span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'foo'</span>, <span style="color: #8abeb7;">'bar'</span>, <span style="color: #8abeb7;">'baz'</span><span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">}</span>
<span style="color: #f0c674;">y</span> = x.copy<span style="color: #c5c8c6;">()</span>
<span style="color: #f0c674;">y</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'username'</span><span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'mlh'</span>
y<span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'machine'</span><span style="color: #c5c8c6;">]</span>.remove<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'bar'</span><span style="color: #c5c8c6;">)</span>
y
x
</pre>
</div>

<ul class="org-ul">
<li>如果替换复件中的值，原件不受影响，如username。如果修改值（就地修改，
而非替换），则原件受影响，如machines。因为他们的值存储在同一个位置
</li>
<li>避免出现浅复制问题的办法是进行深复制(deep copy)， 拷贝值，同时拷贝值
里面嵌套包含的值
</li>
<li>copy模块中的deepcopy函数完成深复制任务
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">from</span> copy <span style="color: #b5bd68;">import</span> deepcopy

<span style="color: #f0c674;">d</span> = <span style="color: #c5c8c6;">{}</span>
<span style="color: #f0c674;">d</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'names'</span><span style="color: #c5c8c6;">]</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'Albert'</span>, <span style="color: #8abeb7;">'Bob'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">c</span> = d.copy<span style="color: #c5c8c6;">(</span>d<span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">dc</span> = deepcopy<span style="color: #c5c8c6;">(</span>d<span style="color: #c5c8c6;">)</span>
d<span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'name'</span><span style="color: #c5c8c6;">]</span>.append<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Clive'</span><span style="color: #c5c8c6;">)</span>
c
dc
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="sec-4-4-4-2-1" name="sec-4-4-4-2-1"></a>阅读<br  /><div class="outline-text-6" id="text-4-4-4-2-1">
<ul class="org-ul">
<li><a href="https://docs.python.org/2/library/copy.html">辨析深浅复制1</a>
</li>
<li><a href="https://www.quora.com/What-is-deep-copy-and-shallow-copy-in-Python">辨析深浅复制2</a>
</li>
</ul>
</div>
</li></ol>
</li>

<li><a id="sec-4-4-4-3" name="sec-4-4-4-3"></a>fromkeys<br  /><div class="outline-text-5" id="text-4-4-4-3">
<ul class="org-ul">
<li>fromkeys根据给定的键，创建新字典，这些键对应的值默认均为None
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #c5c8c6;">{}</span>.fromkeys<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'name'</span>, <span style="color: #8abeb7;">'age'</span><span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b294bb;">dict</span>.fromkeys<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'name'</span>, <span style="color: #8abeb7;">'age'</span><span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#25552;&#20379;&#33258;&#23450;&#20041;&#40664;&#35748;&#20540;</span>
<span style="color: #b294bb;">dict</span>.fromkeys<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'name'</span>, <span style="color: #8abeb7;">'age'</span><span style="color: #8abeb7;">]</span>, <span style="color: #8abeb7;">'(unknown)'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-4-4-4" name="sec-4-4-4-4"></a>get<br  /><div class="outline-text-5" id="text-4-4-4-4">
<ul class="org-ul">
<li>get是访问字典项的方法，它的特点是忽视错误(forgiving way)
</li>
<li>一般，如果访问的项不在字典里，会报错。而get方法不报错，还可以自定义错误提示
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">d</span> = <span style="color: #c5c8c6;">{}</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>d<span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'name'</span><span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">KeyError</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>d.get<span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'name'</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">No exception</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>d.get<span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'name'</span>, <span style="color: #8abeb7;">'N/A'</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#25552;&#20379;&#33258;&#23450;&#20041;&#38169;&#35823;&#25552;&#31034;&#35821;</span>

<span style="color: #f0c674;">d</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'name'</span><span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'Eric'</span>
d.get<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'name'</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#39033;&#22312;&#23383;&#20856;&#20013;&#65292;&#27491;&#24120;&#35775;&#38382;</span>
</pre>
</div>

<ul class="org-ul">
<li>上个程序的修改版本
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">A simple database</span>

<span style="color: #f0c674;">people</span> = <span style="color: #c5c8c6;">{</span>
    <span style="color: #8abeb7;">'Alice'</span>: <span style="color: #8abeb7;">{</span>
        <span style="color: #8abeb7;">'phone'</span>: <span style="color: #8abeb7;">'2341'</span>,
        <span style="color: #8abeb7;">'addr'</span>: <span style="color: #8abeb7;">'Foo drive 23'</span>
    <span style="color: #8abeb7;">}</span>,

    <span style="color: #8abeb7;">'Beth'</span>: <span style="color: #8abeb7;">{</span>
        <span style="color: #8abeb7;">'phone'</span>: <span style="color: #8abeb7;">'9102'</span>,
        <span style="color: #8abeb7;">'addr'</span>: <span style="color: #8abeb7;">'Bar street 42'</span>
    <span style="color: #8abeb7;">}</span>,

    <span style="color: #8abeb7;">'Cecil'</span>: <span style="color: #8abeb7;">{</span>
        <span style="color: #8abeb7;">'phone'</span>: <span style="color: #8abeb7;">'3158'</span>,
        <span style="color: #8abeb7;">'addr'</span>: <span style="color: #8abeb7;">'Baz avenue 90'</span>
    <span style="color: #8abeb7;">}</span>
<span style="color: #c5c8c6;">}</span>

<span style="color: #f0c674;">labels</span> = <span style="color: #c5c8c6;">{</span>
    <span style="color: #8abeb7;">'phone'</span>: <span style="color: #8abeb7;">'phone number'</span>,
    <span style="color: #8abeb7;">'addr'</span>: <span style="color: #8abeb7;">'address'</span>
<span style="color: #c5c8c6;">}</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">name = input('Name:')</span>
<span style="color: #f0c674;">name</span> = <span style="color: #8abeb7;">'Cecil'</span>
<span style="color: #f0c674;">request</span> = <span style="color: #b294bb;">input</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Phone number(p) or address(a)?'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">if</span> request == <span style="color: #8abeb7;">'p'</span>:
    <span style="color: #f0c674;">key</span> = <span style="color: #8abeb7;">'phone'</span>
<span style="color: #b5bd68;">if</span> request == <span style="color: #8abeb7;">'a'</span>:
    <span style="color: #f0c674;">key</span> = <span style="color: #8abeb7;">'addr'</span>

<span style="color: #969896; font-style: italic;">####</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Use get to provide default values:</span>
<span style="color: #f0c674;">person</span> = people.get<span style="color: #c5c8c6;">(</span>name, <span style="color: #8abeb7;">{}</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">label</span> = labels.get<span style="color: #c5c8c6;">(</span>key, key<span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">result</span> = person.get<span style="color: #c5c8c6;">(</span>key, <span style="color: #8abeb7;">'not available'</span><span style="color: #c5c8c6;">)</span>


<span style="color: #b5bd68;">if</span> name <span style="color: #b5bd68;">in</span> people:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"%s's %s is %s."</span> % <span style="color: #8abeb7;">(</span>name, label, result<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-4-4-5" name="sec-4-4-4-5"></a>has<sub>key</sub><br  /><div class="outline-text-5" id="text-4-4-4-5">
<ul class="org-ul">
<li>has<sub>key方法检查字典中是否有某个键。</sub> d.has<sub>key</sub>(k) 等价于k in d
</li>
<li>面对多个方法、函数、编程方式可用时，选用适用即可
</li>
<li>学多种实现方式是为了读懂别人的代码
</li>
<li>当其他程序员使用按他们兴趣选出的方法、函数，我们能通过读懂代码，理解
他们的意图
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">d</span> = <span style="color: #c5c8c6;">{}</span>
d.has_key<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'name'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">d</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'name'</span><span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'Eric'</span>
d.has_key<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'name'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-4-4-6" name="sec-4-4-4-6"></a>items and iteritems<br  /><div class="outline-text-5" id="text-4-4-4-6">
<ul class="org-ul">
<li>items返回一个列表，该列表包含字典所有项，返回值没有特定顺序
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">d</span> = <span style="color: #c5c8c6;">{</span>
    <span style="color: #8abeb7;">'title'</span>: <span style="color: #8abeb7;">'Python Web Site'</span>,
    <span style="color: #8abeb7;">'usl'</span>: <span style="color: #8abeb7;">'http://www.python.org'</span>,
    <span style="color: #8abeb7;">'spam'</span>: 0
<span style="color: #c5c8c6;">}</span>

d.items<span style="color: #c5c8c6;">()</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">iteritems&#26041;&#27861;&#21151;&#33021;&#22522;&#26412;&#30456;&#21516;&#65292;&#21482;&#19981;&#36807;&#36820;&#22238;&#20540;&#19981;&#26159;&#21015;&#34920;&#65292;&#32780;&#26159;&#24490;&#29615;&#23545;&#35937;(iterator)&#12290;</span>
<span style="color: #f0c674;">it</span> = d.iteritem<span style="color: #c5c8c6;">()</span>
it
<span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">(</span>it<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#23558;itertor&#36716;&#25442;&#20026;list</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-4-4-7" name="sec-4-4-4-7"></a>keys and iterkeys<br  /><div class="outline-text-5" id="text-4-4-4-7">
<ul class="org-ul">
<li>keys返回一个列表，列表内包含字典的键。iterkeys返回包含字典键的
iterator
</li>
</ul>
</div>
</li>

<li><a id="sec-4-4-4-8" name="sec-4-4-4-8"></a>pop<br  /><div class="outline-text-5" id="text-4-4-4-8">
<ul class="org-ul">
<li>pop根据键返回对应的值，同时从字典中删除该项
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">d</span> = <span style="color: #c5c8c6;">{</span><span style="color: #8abeb7;">'x'</span>:1, <span style="color: #8abeb7;">'y'</span>:2<span style="color: #c5c8c6;">}</span>
d.pop<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'x'</span><span style="color: #c5c8c6;">)</span>
d
</pre>
</div>
</div>
</li>

<li><a id="sec-4-4-4-9" name="sec-4-4-4-9"></a>popitem<br  /><div class="outline-text-5" id="text-4-4-4-9">
<ul class="org-ul">
<li>popitem从字典中弹出一个值，与list.pop不同处，popitem弹出的值，没有特
定顺序，随意弹出字典一个项
</li>
<li>如果想逐一弹出并处理字典项， popitem正当此用
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">d</span> = <span style="color: #c5c8c6;">{</span>
    <span style="color: #8abeb7;">'title'</span>: <span style="color: #8abeb7;">'Python Web Site'</span>,
    <span style="color: #8abeb7;">'usl'</span>: <span style="color: #8abeb7;">'http://www.python.org'</span>,
    <span style="color: #8abeb7;">'spam'</span>: 0
<span style="color: #c5c8c6;">}</span>
d.popitem<span style="color: #c5c8c6;">()</span>
d
</pre>
</div>
</div>
</li>

<li><a id="sec-4-4-4-10" name="sec-4-4-4-10"></a>setdefault<br  /><div class="outline-text-5" id="text-4-4-4-10">
<ul class="org-ul">
<li>setdefault从字典中据键取值，当键在字典中不存在时，setdefault可以给该
键一个默认值
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">d</span> = <span style="color: #c5c8c6;">{}</span>
d.setdefault<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'name'</span>, <span style="color: #8abeb7;">'N/A'</span><span style="color: #c5c8c6;">)</span>
d
<span style="color: #f0c674;">d</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'name'</span><span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'Gumby'</span>
d.setdefault<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'name'</span>, <span style="color: #8abeb7;">'N/A'</span><span style="color: #c5c8c6;">)</span>
d
</pre>
</div>
</div>
</li>

<li><a id="sec-4-4-4-11" name="sec-4-4-4-11"></a>update<br  /><div class="outline-text-5" id="text-4-4-4-11">
<ul class="org-ul">
<li>update根据键更新字典值
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">d</span> = <span style="color: #c5c8c6;">{</span>
    <span style="color: #8abeb7;">'title'</span>: <span style="color: #8abeb7;">'Python Web Site'</span>,
    <span style="color: #8abeb7;">'usl'</span>: <span style="color: #8abeb7;">'http://www.python.org'</span>,
    <span style="color: #8abeb7;">'changed'</span>: <span style="color: #8abeb7;">'Jan 30 11:15:15 Met 2018'</span>
<span style="color: #c5c8c6;">}</span>

<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">{</span><span style="color: #8abeb7;">'title'</span>: <span style="color: #8abeb7;">'Python Language Website'</span><span style="color: #c5c8c6;">}</span>
d.update<span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>
d
</pre>
</div>
</div>
</li>

<li><a id="sec-4-4-4-12" name="sec-4-4-4-12"></a>values and itervalues<br  /><div class="outline-text-5" id="text-4-4-4-12">
<ul class="org-ul">
<li>values返回一个列表， 列表包含字典的值
</li>
<li>itervalues返回包含值的iterator
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">d</span> = <span style="color: #c5c8c6;">{}</span>
<span style="color: #f0c674;">d</span><span style="color: #c5c8c6;">[</span>1<span style="color: #c5c8c6;">]</span> = 1
<span style="color: #f0c674;">d</span><span style="color: #c5c8c6;">[</span>2<span style="color: #c5c8c6;">]</span> = 2
<span style="color: #f0c674;">d</span><span style="color: #c5c8c6;">[</span>3<span style="color: #c5c8c6;">]</span> = 3
<span style="color: #f0c674;">d</span><span style="color: #c5c8c6;">[</span>4<span style="color: #c5c8c6;">]</span> = 1
d.values<span style="color: #c5c8c6;">()</span>
</pre>
</div>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> 集合</h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li>集合中元素是无序的，且元素不重复，唯一
</li>
<li>使用花括号{}做界定符
</li>
</ul>
</div>

<div id="outline-container-sec-4-5-1" class="outline-4">
<h4 id="sec-4-5-1"><span class="section-number-4">4.5.1</span> 创建、修改、删除</h4>
<div class="outline-text-4" id="text-4-5-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">a</span> = <span style="color: #c5c8c6;">{</span>3, 5<span style="color: #c5c8c6;">}</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#38598;&#21512;</span>
<span style="color: #f0c674;">aset</span> = <span style="color: #b294bb;">set</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>8, 14<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#29992;set()&#21019;&#24314;&#38598;&#21512;</span>

<span style="color: #f0c674;">bset</span> = <span style="color: #b294bb;">set</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">[</span>0, 1, 2, 3, 0, 1, 2, 3, 7, 8<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span> <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#22914;&#26524;&#21407;&#26469;&#25968;&#25454;&#20013;&#23384;&#22312;&#37325;&#22797;&#20803;</span>
                                           <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#32032;&#65292;&#36716;&#20026;&#38598;&#21512;&#26102;&#21482;&#20445;&#30041;&#19968;&#20010;</span>
<span style="color: #f0c674;">c</span> = <span style="color: #b294bb;">set</span><span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#31354;&#38598;&#21512;</span>

<span style="color: #f0c674;">a</span> = <span style="color: #c5c8c6;">{</span>1, 4, 2, 3<span style="color: #c5c8c6;">}</span>
a.pop<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#24377;&#20986;&#20803;&#32032;</span>
a.add<span style="color: #c5c8c6;">(</span>7<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#28155;&#21152;&#20803;&#32032;</span>
a.remove<span style="color: #c5c8c6;">(</span>3<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#21024;&#38500;&#25351;&#23450;&#20803;&#32032;</span>
a.clear<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#28165;&#31354;&#38598;&#21512;&#20803;&#32032;</span>

<span style="color: #b5bd68;">del</span> a  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#21024;&#38500;&#38598;&#21512;&#23545;&#35937;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-5-2" class="outline-4">
<h4 id="sec-4-5-2"><span class="section-number-4">4.5.2</span> 集合操作</h4>
<div class="outline-text-4" id="text-4-5-2">
<ul class="org-ul">
<li>集合支持交、并、差集等运算
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">a</span> = <span style="color: #b294bb;">set</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">[</span>8, 9, 10, 11, 12, 13<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">b</span> = <span style="color: #b294bb;">set</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">[</span>0, 1, 2, 3, 7, 8<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>

a | b  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#24182;&#38598;</span>
a.union<span style="color: #c5c8c6;">(</span>b<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#24182;&#38598;</span>
a &amp; b  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#20132;&#38598;</span>
a.intersection<span style="color: #c5c8c6;">(</span>b<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20132;&#38598;</span>
a.difference<span style="color: #c5c8c6;">(</span>b<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#24046;&#38598;</span>
a.symmetric_difference<span style="color: #c5c8c6;">(</span>b<span style="color: #c5c8c6;">)</span>   <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#23545;&#31216;&#24046;&#38598;</span>

<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">{</span>1, 2, 3<span style="color: #c5c8c6;">}</span>
<span style="color: #f0c674;">y</span> = <span style="color: #c5c8c6;">{</span>1, 2, 5<span style="color: #c5c8c6;">}</span>
<span style="color: #f0c674;">z</span> = <span style="color: #c5c8c6;">{</span>1, 2, 3, 4<span style="color: #c5c8c6;">}</span>

<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#27604;&#36739;&#38598;&#21512;&#22823;&#23567;</span>
x &lt; y
x &lt; z
y &lt; z

<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#27979;&#35797;&#26159;&#21542;&#20026;&#23376;&#38598;</span>
x.issubset<span style="color: #c5c8c6;">(</span>y<span style="color: #c5c8c6;">)</span>
x.issubset<span style="color: #c5c8c6;">(</span>z<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">a</span> = <span style="color: #b294bb;">set</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">[</span>8, 9, 10, 11, 12, 13<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">b</span> = <span style="color: #b294bb;">set</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">[</span>0, 1, 2, 3, 7, 8<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>

a | b
a.union<span style="color: #c5c8c6;">(</span>b<span style="color: #c5c8c6;">)</span>
a &amp; b
a.intersection<span style="color: #c5c8c6;">(</span>b<span style="color: #c5c8c6;">)</span>
a.difference<span style="color: #c5c8c6;">(</span>b<span style="color: #c5c8c6;">)</span>
a.symmetric_difference<span style="color: #c5c8c6;">(</span>b<span style="color: #c5c8c6;">)</span> 

<span style="color: #f0c674;">x</span> = <span style="color: #c5c8c6;">{</span>1, 2, 3<span style="color: #c5c8c6;">}</span>
<span style="color: #f0c674;">y</span> = <span style="color: #c5c8c6;">{</span>1, 2, 5<span style="color: #c5c8c6;">}</span>
<span style="color: #f0c674;">z</span> = <span style="color: #c5c8c6;">{</span>1, 2, 3, 4<span style="color: #c5c8c6;">}</span>

x &lt; y
x &lt; z
y &lt; z
x.issubset<span style="color: #c5c8c6;">(</span>y<span style="color: #c5c8c6;">)</span>
s.issubset<span style="color: #c5c8c6;">(</span>z<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>应用例子，取100个介于0-9999之间的随机数。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">from</span> random <span style="color: #b5bd68;">import</span> randint
<span style="color: #f0c674;">listRandom</span> = <span style="color: #c5c8c6;">[</span>randint<span style="color: #8abeb7;">(</span>0, 9999<span style="color: #8abeb7;">)</span> <span style="color: #b5bd68;">for</span> i <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>100<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">]</span>

<span style="color: #f0c674;">noRepeat</span> = <span style="color: #c5c8c6;">[]</span>
<span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> listRandom:
    <span style="color: #b5bd68;">if</span> i <span style="color: #b5bd68;">not</span> <span style="color: #b5bd68;">in</span> noRepeat:
        noRepeat.append<span style="color: #c5c8c6;">(</span>i<span style="color: #c5c8c6;">)</span>

<span style="color: #b294bb;">len</span><span style="color: #c5c8c6;">(</span>listRandom<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">len</span><span style="color: #c5c8c6;">(</span>noRepeat<span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#22914;&#26524;&#29992;&#38598;&#21512;&#65292;&#19968;&#34892;&#20195;&#30721;&#21363;&#21487;</span>
<span style="color: #f0c674;">newSet</span> = <span style="color: #b294bb;">set</span><span style="color: #c5c8c6;">(</span>listRandom<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> 再识字符串</h3>
<div class="outline-text-3" id="text-4-6">
<ul class="org-ul">
<li>字符串是不可修改序列数据类型。Strings are immutable sequence of
Unicode points.
</li>
</ul>
</div>

<div id="outline-container-sec-4-6-1" class="outline-4">
<h4 id="sec-4-6-1"><span class="section-number-4">4.6.1</span> 基本操作</h4>
<div class="outline-text-4" id="text-4-6-1">
<ul class="org-ul">
<li>所有序列操作索引、切片、倍增、归属、求长度、最大、最小值等均适用于字
符串。因为字符串是不可修改类型，所有赋值操作均不适用。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">website</span> = <span style="color: #8abeb7;">'http://www.python.org'</span>
<span style="color: #f0c674;">website</span><span style="color: #c5c8c6;">[</span>-3:<span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'com'</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Type error</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-6-2" class="outline-4">
<h4 id="sec-4-6-2"><span class="section-number-4">4.6.2</span> 字符串的格式化</h4>
<div class="outline-text-4" id="text-4-6-2">
</div><ol class="org-ol"><li><a id="sec-4-6-2-1" name="sec-4-6-2-1"></a>传统方式<br  /><div class="outline-text-5" id="text-4-6-2-1">
<ul class="org-ul">
<li>字符串格式化适用格式化操作符， 百分号(%)
<ul class="org-ul">
<li>百分号左侧放待格式化字符串，右侧，放置待格式化的值
</li>
<li>值可以是单个值，如字符串、数字，也可以是元组和字典
</li>
<li>元组最常用
</li>
</ul>
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b294bb;">format</span> = <span style="color: #8abeb7;">"Hello, %s. %s enough for ya?"</span>
<span style="color: #f0c674;">values</span> = <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'world'</span>, <span style="color: #8abeb7;">'Hot'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">format</span> % values<span style="color: #c5c8c6;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>%s是格式字符，常见如%d, %e, %f, %%等。
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">s</span> = <span style="color: #8abeb7;">"Pi with three decimals: %.3f"</span>
<span style="color: #b5bd68;">from</span> math <span style="color: #b5bd68;">import</span> pi
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>s % pi<span style="color: #c5c8c6;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>%s部分称为转换部分(conversion specifiers)。完整的转换部分包括5个成分，
其成分顺序对输出字符串有决定影响。
<ul class="org-ul">
<li>% 标识转换部分开始
</li>
<li>转换标志flag
<ul class="org-ul">
<li>表示左对齐
</li>
<li>表示数值带符号
</li>
</ul>
</li>
<li>最小宽度
</li>
<li>.精度
</li>
<li>转换类型
</li>
</ul>
</li>
<li>例:
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #8abeb7;">'Price of eggs: $%d'</span> % 42
<span style="color: #8abeb7;">'Hexadecimal price of eggs: %x'</span> % 42
<span style="color: #b5bd68;">from</span> math <span style="color: #b5bd68;">import</span> pi 
<span style="color: #8abeb7;">'Pi: %f...'</span> % pi
<span style="color: #8abeb7;">'Very inexact estimate of pi: %i'</span> % pi  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#24102;&#31526;&#21495;&#25972;&#25968;%i, %d</span>
<span style="color: #8abeb7;">'Using str: %s'</span> % 42

<span style="color: #8abeb7;">'%10f'</span> % pi  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#23485;&#24230;10</span>
<span style="color: #8abeb7;">'%10.2f'</span> % pi  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#23485;&#24230;10&#65292;&#31934;&#24230;2&#20301;&#23567;&#25968;</span>
<span style="color: #8abeb7;">'%.2f'</span> % pi  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#40664;&#35748;&#23485;&#24230;&#65292;&#31934;&#24230;2&#20301;&#23567;&#25968;</span>
<span style="color: #8abeb7;">'%.5s'</span> % <span style="color: #8abeb7;">'Guido van Rossum'</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21487;&#20197;&#20351;&#29992; * &#20316;&#20026;&#23485;&#24230;&#12289;&#31934;&#24230;&#25110;a&#20860;&#26377;&#65292;&#24102;*&#24773;&#20917;&#19979;&#65292;&#35813;&#20540;&#20174;&#20803;&#32452;&#20013;&#35835;&#21462;</span>
<span style="color: #8abeb7;">'%.*s'</span> % <span style="color: #c5c8c6;">(</span>5, <span style="color: #8abeb7;">'Guido van Rossum)</span>

<span style="color: #8abeb7;">'</span>010.2f<span style="color: #8abeb7;">' % pi  #&#23485;&#24230;&#31934;&#24230;&#20540;&#21069;&#65292;&#21487;&#32622;flag&#65292;&#21462;0,-,+&#25110;&#31354;&#26684;&#12290;0&#34920;&#31034;&#29992;0&#21344;&#20301;</span>
<span style="color: #8abeb7;">'</span>%-10.2f<span style="color: #8abeb7;">' % pi  # - &#34920;&#31034;&#24038;&#23545;&#40784;</span>
<span style="color: #8abeb7;">print(('</span>% 5d<span style="color: #8abeb7;">' %10) + '</span>\n<span style="color: #8abeb7;">' + ('</span>% 5d<span style="color: #8abeb7;">' % -10))  # &#27491;&#25968;&#21069;&#32622;&#19968;&#31354;&#26684;&#65292;&#20197;&#20415;&#19982;&#36127;&#25968;&#23545;&#40784;</span>
<span style="color: #8abeb7;">print(('</span>%+5d<span style="color: #8abeb7;">' %10) + '</span>\n<span style="color: #8abeb7;">' + ('</span>%+5d<span style="color: #8abeb7;">' % -10))  # +&#34920;&#31034;&#27491;&#25968;&#24102;&#27491;&#21495;</span>
</pre>
</div>

<ul class="org-ul">
<li>综合例子,自行阅读理解
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">print a formatted price list with a given width</span>

<span style="color: #f0c674;">width</span> = <span style="color: #b294bb;">int</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">input</span><span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'Please enter width: '</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">price_width</span> = 10
<span style="color: #f0c674;">item_width</span> = width - price_width

<span style="color: #f0c674;">header_format</span> = <span style="color: #8abeb7;">'%-*s%*s'</span>
<span style="color: #b294bb;">format</span>        = <span style="color: #8abeb7;">'%-*s%*.2f'</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'='</span> * width<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>header_format % <span style="color: #8abeb7;">(</span>item_width, <span style="color: #8abeb7;">'Item'</span>, price_width, <span style="color: #8abeb7;">'Price'</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'-'</span> * width<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">format</span> % <span style="color: #8abeb7;">(</span>item_width, <span style="color: #8abeb7;">'Apples'</span>, price_width, 0.4<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">format</span> % <span style="color: #8abeb7;">(</span>item_width, <span style="color: #8abeb7;">'Pears'</span>, price_width, 0.5<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">format</span> % <span style="color: #8abeb7;">(</span>item_width, <span style="color: #8abeb7;">'Cantaloupes'</span>, price_width, 1.92<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">format</span> % <span style="color: #8abeb7;">(</span>item_width, <span style="color: #8abeb7;">'Dried Apricots (16 oz.)'</span>, price_width, 8<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">format</span> % <span style="color: #8abeb7;">(</span>item_width, <span style="color: #8abeb7;">'Prunes (4 libs.)'</span>, price_width, 12<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'='</span> * width<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-6-2-2" name="sec-4-6-2-2"></a>新方式<br  /><div class="outline-text-5" id="text-4-6-2-2">
<ul class="org-ul">
<li>目前，python社区推荐使用str.format()方法格式化字符串
</li>
<li>该方法使用{}和:，代替传统的%，格式化字符串
</li>
<li>该方法可以使用位置、参数名字格式化，支持序列解包等
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20363;&#23376;&#21462;&#33258; https://docs.python.org/3.6/library/string.html#template-strings</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26681;&#25454;&#20301;&#32622;&#26684;&#24335;&#21270;</span>
<span style="color: #8abeb7;">'{0}, {1}, {2}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'a'</span>, <span style="color: #8abeb7;">'b'</span>, <span style="color: #8abeb7;">'c'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #8abeb7;">'{}, {}, {}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'a'</span>, <span style="color: #8abeb7;">'b'</span>, <span style="color: #8abeb7;">'c'</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">3.1+ only</span>

<span style="color: #8abeb7;">'{2}, {1}, {0}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'a'</span>, <span style="color: #8abeb7;">'b'</span>, <span style="color: #8abeb7;">'c'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #8abeb7;">'{2}, {1}, {0}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span>*<span style="color: #8abeb7;">'abc'</span><span style="color: #c5c8c6;">)</span>      <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">unpacking argument sequence</span>

<span style="color: #8abeb7;">'{0}{1}{0}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'abra'</span>, <span style="color: #8abeb7;">'cad'</span><span style="color: #c5c8c6;">)</span>   <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">arguments' indices can be repeated</span>


<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26681;&#25454;&#21442;&#25968;&#21517;&#23383;&#26684;&#24335;&#21270;</span>
<span style="color: #8abeb7;">'Coordinates: {latitude}, {longitude}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span>latitude=<span style="color: #8abeb7;">'37.24N'</span>, longitude=<span style="color: #8abeb7;">'-115.81W'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">coord</span> = <span style="color: #c5c8c6;">{</span><span style="color: #8abeb7;">'latitude'</span>: <span style="color: #8abeb7;">'37.24N'</span>, <span style="color: #8abeb7;">'longitude'</span>: <span style="color: #8abeb7;">'-115.81W'</span><span style="color: #c5c8c6;">}</span>
<span style="color: #8abeb7;">'Coordinates: {latitude}, {longitude}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span>**coord<span style="color: #c5c8c6;">)</span>


<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26684;&#24335;&#21270;&#21442;&#25968;&#23646;&#24615;</span>
<span style="color: #f0c674;">c</span> = 3-5j
<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'The complex number {0} is formed from the real part {0.real} '</span>
 <span style="color: #8abeb7;">'and the imaginary part {0.imag}.'</span><span style="color: #c5c8c6;">)</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span>c<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Point</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, x, y<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.x, <span style="color: #b5bd68;">self</span>.y = x, y
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__str__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">return</span> <span style="color: #8abeb7;">'Point({self.x}, {self.y})'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>=<span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b294bb;">str</span><span style="color: #c5c8c6;">(</span>Point<span style="color: #8abeb7;">(</span>4, 2<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26684;&#24335;&#21270;&#21442;&#25968;&#20803;&#32032;</span>
<span style="color: #f0c674;">coord</span> = <span style="color: #c5c8c6;">(</span>3, 5<span style="color: #c5c8c6;">)</span>
<span style="color: #8abeb7;">'X: {0[0]};  Y: {0[1]}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span>coord<span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26174;&#31034;&#23383;&#31526;&#20018;</span>
<span style="color: #8abeb7;">"repr() shows quotes: {!r}; str() doesn't: {!s}"</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'test1'</span>, <span style="color: #8abeb7;">'test2'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#23545;&#40784;&#25991;&#26412;&#65292;&#25351;&#23450;&#23485;&#24230;</span>
<span style="color: #8abeb7;">'{:&lt;30}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'left aligned'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #8abeb7;">'{:&gt;30}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'right aligned'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #8abeb7;">'{:^30}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'centered'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #8abeb7;">'{:*^30}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'centered'</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">use '*' as a fill char</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26174;&#31034;&#28014;&#28857;&#25968;&#12289;&#31526;&#21495;</span>
<span style="color: #8abeb7;">'{:+f}; {:+f}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span>3.14, -3.14<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">show it always</span>

<span style="color: #8abeb7;">'{: f}; {: f}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span>3.14, -3.14<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">show a space for positive numbers</span>

<span style="color: #8abeb7;">'{:-f}; {:-f}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span>3.14, -3.14<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">show only the minus -- same as '{:f}; {:f}'</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20351;&#29992;,&#20316;&#20026;&#21315;&#20998;&#20301;&#20998;&#20301;&#31526;</span>
<span style="color: #8abeb7;">'{:,}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span>1234567890<span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26174;&#31034;&#26085;&#26399;</span>
<span style="color: #b5bd68;">import</span> datetime
<span style="color: #f0c674;">d</span> = datetime.datetime<span style="color: #c5c8c6;">(</span>2010, 7, 4, 12, 15, 58<span style="color: #c5c8c6;">)</span>
<span style="color: #8abeb7;">'{:%Y-%m-%d %H:%M:%S}'</span>.<span style="color: #b294bb;">format</span><span style="color: #c5c8c6;">(</span>d<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-6-2-3" name="sec-4-6-2-3"></a>字典的格式化<br  /><div class="outline-text-5" id="text-4-6-2-3">
<ul class="org-ul">
<li>phonebook = {'Alice': '2341', 'Beth':'9102', 'Cecil': '3258',
'Dee-Dee': '0142', 'Earl': '5551'}
</li>
</ul>
<ul class="org-ul">
<li>print("Cecil's phone number is %(Cecil)s." % phonebook)
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-4-6-3" class="outline-4">
<h4 id="sec-4-6-3"><span class="section-number-4">4.6.3</span> 字符串方法</h4>
<div class="outline-text-4" id="text-4-6-3">
<ul class="org-ul">
<li>字符串的方法比列表方法更丰富
</li>
<li>使用格式： object.method(argument)
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-4-6-3-1" name="sec-4-6-3-1"></a>find<br  /><div class="outline-text-5" id="text-4-6-3-1">
<ul class="org-ul">
<li>在字符串中查找子字符串，找到返回子串的第一个字符索引，没找到返回-1
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8abeb7;">'With a moo-moo here, and a moo-moo there'</span>.find<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'moo'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">title</span> = <span style="color: #8abeb7;">'Monty Python'</span>s Flying circus<span style="color: #8abeb7;">'</span>
<span style="color: #8abeb7;">title.find('</span>Monty<span style="color: #cc6666;">)</span>
title.find<span style="color: #cc6666;">(</span><span style="color: #8abeb7;">'Flying'</span><span style="color: #cc6666;">)</span>
title.find<span style="color: #cc6666;">(</span><span style="color: #8abeb7;">'Zirquss'</span><span style="color: #cc6666;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>自学: rfind, index, rindex, count, startswith, endswith
</li>
</ul>
</div>
</li>

<li><a id="sec-4-6-3-2" name="sec-4-6-3-2"></a>join<br  /><div class="outline-text-5" id="text-4-6-3-2">
<ul class="org-ul">
<li>非常重要的方法，与split互为反操作,连接序列元素
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">seq</span> = <span style="color: #c5c8c6;">[</span>1, 2, 3, 4, 5<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">sep</span> = <span style="color: #8abeb7;">'+'</span>
sep.join<span style="color: #c5c8c6;">(</span>seq<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">type error</span>

<span style="color: #f0c674;">seq</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'1'</span>, <span style="color: #8abeb7;">'2'</span>, <span style="color: #8abeb7;">'3'</span>, <span style="color: #8abeb7;">'4'</span>, <span style="color: #8abeb7;">'5'</span><span style="color: #c5c8c6;">]</span>
sep.join<span style="color: #c5c8c6;">(</span>seq<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">dirs</span> = <span style="color: #8abeb7;">''</span>, <span style="color: #8abeb7;">'usr'</span>, <span style="color: #8abeb7;">'bin'</span>, <span style="color: #8abeb7;">'env'</span>
<span style="color: #8abeb7;">'/'</span>.join<span style="color: #c5c8c6;">(</span>dirs<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'C:'</span> + <span style="color: #8abeb7;">'\\'</span>.join<span style="color: #8abeb7;">(</span>dirs<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
pirnt<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'\'.join(dirs))  # how about this?</span>


<span style="color: #8abeb7;">''.join(seq)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-4-6-3-3" name="sec-4-6-3-3"></a>lower<br  /><div class="outline-text-5" id="text-4-6-3-3">
<ul class="org-ul">
<li>返回字符串小写形式
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8abeb7;">'Trodheim Hammer Dance'</span>.lower<span style="color: #c5c8c6;">()</span>

<span style="color: #b5bd68;">if</span> <span style="color: #8abeb7;">'Gumby'</span> <span style="color: #b5bd68;">in</span> <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'gumby'</span>, <span style="color: #8abeb7;">'smith'</span>, <span style="color: #8abeb7;">'jone'</span><span style="color: #c5c8c6;">]</span>: 
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Found it!'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">name</span> = <span style="color: #8abeb7;">'Gumby'</span>
<span style="color: #f0c674;">names</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'gumby'</span>, <span style="color: #8abeb7;">'smith'</span>, <span style="color: #8abeb7;">'jones'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #b5bd68;">if</span> name.lower<span style="color: #c5c8c6;">()</span> <span style="color: #b5bd68;">in</span> names: 
    <span style="color: #b5bd68;">print</span> <span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Found it!'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>自学:　islower, capitalize, swapcase, title, istitle, upper, isupper
</li>
</ul>
</div>
</li>

<li><a id="sec-4-6-3-4" name="sec-4-6-3-4"></a>replace<br  /><div class="outline-text-5" id="text-4-6-3-4">
<ul class="org-ul">
<li>替换字符串。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8abeb7;">'This is a test'</span>.replace<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'is'</span>, <span style="color: #8abeb7;">'eez'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>自学: translate, expandtabs
</li>
</ul>
</div>
</li>

<li><a id="sec-4-6-3-5" name="sec-4-6-3-5"></a>split<br  /><div class="outline-text-5" id="text-4-6-3-5">
<ul class="org-ul">
<li>非常重要方法，与join互为反操作，将字符串分割为序列
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8abeb7;">'1+2+3+4+5'</span>.split<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'+'</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#25351;&#23450;&#20998;&#21106;&#31526;</span>
<span style="color: #8abeb7;">'/usr/bin/env'</span>.split<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'/'</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#25351;&#23450;&#20998;&#21106;&#31526;</span>
<span style="color: #8abeb7;">'Using the defalut'</span>.split<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#40664;&#35748;&#20998;&#38548;&#31526;&#26159;&#31354;&#30333;(whitespace, &#21253;&#25324;spaces, tabs, newlines)</span>
</pre>
</div>

<ul class="org-ul">
<li>自学: rsplit, splitlines
</li>
</ul>
</div>
</li>

<li><a id="sec-4-6-3-6" name="sec-4-6-3-6"></a>strip<br  /><div class="outline-text-5" id="text-4-6-3-6">
<ul class="org-ul">
<li>清除字符串左端和右端空白，或指定字符
</li>
<li>仅清除两端，字符串中间的空白或字符不受影响
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #8abeb7;">'internal whitespace is kept '</span>.strip<span style="color: #c5c8c6;">()</span>
<span style="color: #8abeb7;">'*** SPAM * for * every one!!!***'</span>.strip<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'*!'</span><span style="color: #c5c8c6;">)</span> <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#25351;&#23450;&#28165;&#38500;&#30340;&#23383;&#31526;</span>
</pre>
</div>

<ul class="org-ul">
<li>自学: lstrip, rstrip
</li>
</ul>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> 其他高级数据结构</h3>
<div class="outline-text-3" id="text-4-7">
<ul class="org-ul">
<li>堆 import heapq
</li>
<li>队列 import Queue
</li>
<li>栈和链表， 用列表模拟
</li>
<li>其他高级数据类型 import collectoins<a href="https://docs.python.org/3/library/collections.html?highlight=collections#module-collections">容器类型。</a>
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> 第五章　抽象－－函数</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>本章学习如何将语句组织成函数
</li>
<li>函数作用，即一次编写，反复使用reuse，避免重复写代码
</li>
</ul>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> 缘由</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">fibs</span> = <span style="color: #c5c8c6;">[</span>0, 1<span style="color: #c5c8c6;">]</span>
<span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>8<span style="color: #c5c8c6;">)</span>:
    fibs.append<span style="color: #c5c8c6;">(</span>fibs<span style="color: #8abeb7;">[</span>-2<span style="color: #8abeb7;">]</span> + fibs<span style="color: #8abeb7;">[</span>-1<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>

fibs

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21487;&#26159;&#21448;&#24819;&#31639;&#26356;&#22810;&#30340;fib&#25968;</span>
fibs <span style="color: #c5c8c6;">[</span>0, 1<span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">num</span> = <span style="color: #b294bb;">int</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">input</span><span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'How many Fibonacci numbers do you want?'</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>num -2<span style="color: #c5c8c6;">)</span>:
    fibs.append<span style="color: #c5c8c6;">(</span>fibs<span style="color: #8abeb7;">[</span>-2<span style="color: #8abeb7;">]</span> + fibs<span style="color: #8abeb7;">[</span>-1<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>fibs<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>代码重复了，每次使用都要重复编写，重复劳动，而且不利于维护
</li>
<li>对程序员而言：lazyness is virtue。懒是站在巨人肩膀上，不做无谓的重复
工作
</li>
<li>主要手段：代码重用(reusable)
</li>
<li>SpaceX都重用火箭，可见此概念之有用！
</li>
<li>我们希望如下，即得结果
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">num</span> = <span style="color: #b294bb;">input</span><span style="color: #c5c8c6;">(</span>...<span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>fibs<span style="color: #8abeb7;">(</span>num<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> 抽象和结构</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li>实现代码重用的方式之一是抽象。抽象是使人能理解计算机程序的关键步骤
</li>
<li>再多的代码，计算机都无所谓，越详细越好，人却不行
</li>
<li>人必须用抽象，分治的方式降低复杂度
<ul class="org-ul">
<li>比如问路。如果回答：向前走１０步，向左转９０度，走５步，再向右转４
７度，走１２３步。你会找到路么？
</li>
<li>一般的回答是：下个路口左转，再个路口右转，直走就到了
</li>
<li>含义：人知道怎么走，怎么转，走多少，转多少，不清楚的是方向
</li>
</ul>
</li>
<li>设计程序也应该用这种方式，抽象一点
<ul class="org-ul">
<li>比如，程序完成如下任务：下载网页，统计网页中的词频，输出词与对应的频率。这理解起来很
容易
</li>
<li>转成python:
</li>
</ul>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">page</span> = download_page<span style="color: #c5c8c6;">()</span>
<span style="color: #f0c674;">freqs</span> = compute_frequencies<span style="color: #c5c8c6;">(</span>page<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">for</span> word, freq <span style="color: #b5bd68;">in</span> freqs:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>word, freq<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>抽象的意义在于，向使用者隐藏所有实现细节，仅提供函数签名作为接口（或称：使用协议）
<ul class="org-ul">
<li>函数签名function signature
</li>
<li>接口（或使用协议）interface(protocol)。python中协议，指控制行为的规则
</li>
</ul>
</li>
<li>设计程序时，首先告诉计算机做什么，而暂不考虑如何做。如何做要放到另外的地方，函数定义中
</li>
<li>另一方面，注意，伪码与python语言的转换十分自然流畅
</li>
<li>函数的结构：顺序、分支、循环
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> 定义和调用</h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li>函数设计可以调用的call，调用后，函数执行某些都做，返回值。在python中
可以调用的事物称为可调用的(callable)。函数是典型的callable
</li>
<li>七个可调用类型Seven callable types:
<ul class="org-ul">
<li>user-defined functions
</li>
<li>built-in functions
</li>
<li>built-in methods
</li>
<li>methods
</li>
<li>classes
</li>
<li>Class instances
</li>
<li>Generator functions
</li>
</ul>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> math
<span style="color: #f0c674;">x</span>  = 1
<span style="color: #f0c674;">y</span> = math.sqrt  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27880;&#24847;&#27809;&#26377;&#25324;&#21495;</span>
x.__call__  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#25253;&#38169;</span>
y.__call__&#12288;<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26816;&#26597;&#26159;&#21542;callable</span>
</pre>
</div>

<ul class="org-ul">
<li>结构化程序设计范式中，最核心的事情就是创建函数和使用函数
</li>
<li>一般，先写代码结构，再填空。以至于有人说，写程序不难，就是填空
</li>
</ul>

<pre class="example">
def 函数名(参数列表):
    """
    docstring： 函数说明，说明函数功能，使用何种算法，参数个数、类型，返回值等。
    """
    #  注释

    代码块（函数体）
    1. 输入 input
    2. 处理
    3. 输出

    return 返回值
</pre>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20989;&#25968;&#30340;&#23450;&#20041;</span>
<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">fibs</span><span style="color: #c5c8c6;">(</span>num<span style="color: #c5c8c6;">)</span>:
    <span style="color: #8abeb7;">"""</span>
<span style="color: #8abeb7;">    &#35745;&#31639;&#26000;&#27874;&#37027;&#22865;&#25968;&#21015;</span>
<span style="color: #8abeb7;">&#12288;&#12288;&#21442;&#25968;num: &#36755;&#20986;&#25968;&#21015;&#38271;&#24230;</span>
<span style="color: #8abeb7;">    """</span>

    <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#65297;&#65294;&#21021;&#22987;&#21270;&#21450;&#36755;&#20837;</span>
    <span style="color: #f0c674;">result</span> = <span style="color: #c5c8c6;">[</span>0, 1<span style="color: #c5c8c6;">]</span>

    <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">2.&#22788;&#29702;</span>
    <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>num - 2<span style="color: #c5c8c6;">)</span>:
        result.append<span style="color: #c5c8c6;">(</span>result<span style="color: #8abeb7;">[</span>-2<span style="color: #8abeb7;">]</span> + result<span style="color: #8abeb7;">[</span>-1<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">3.&#36755;&#20986;</span>

&#12288;&#12288;<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#36820;&#22238;&#20540;</span>
    <span style="color: #b5bd68;">return</span> result

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20989;&#25968;&#30340;&#35843;&#29992;</span>
fibs<span style="color: #c5c8c6;">(</span>10<span style="color: #c5c8c6;">)</span>
fibs<span style="color: #c5c8c6;">(</span>15<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>写docstring背后的理念叫做：程序文档化，即程序是自解释的
self-explaining。
</li>
<li>试下面两个命令。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python">fibs.<span style="color: #b294bb;">__doc__</span>
<span style="color: #b294bb;">help</span><span style="color: #c5c8c6;">(</span>fibs<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>

<div id="outline-container-sec-5-3-1" class="outline-4">
<h4 id="sec-5-3-1"><span class="section-number-4">5.3.1</span> 函数的返回值</h4>
<div class="outline-text-4" id="text-5-3-1">
<ul class="org-ul">
<li>函数可以返回值，也可以不返回值，或者不写return语句，或仅写return带值
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">test</span><span style="color: #c5c8c6;">()</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'This is printed'</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">return</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'This is not'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">x</span> = test<span style="color: #c5c8c6;">()</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">None</span>
</pre>
</div>

<ul class="org-ul">
<li>所有函数都返回值，当什么都不返回时，实际返回的是None值
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-3-2" class="outline-4">
<h4 id="sec-5-3-2"><span class="section-number-4">5.3.2</span> 函数的保存、常见python文件扩展名</h4>
<div class="outline-text-4" id="text-5-3-2">
<ul class="org-ul">
<li>函数保存到py文件中。
<ul class="org-ul">
<li>py: python源文件，文本文件，有解释器解释执行
</li>
<li>pyc: python字节码文件，二进制文件，用于隐藏python源代码和提高运行
速度。python模块第一次被引入时将被编译成字节码文件，以后再次导入
时，优先使用.pyc文件，提高加载和运行模块速度。
</li>
<li>pyw: python源文件，常用于图形界面程序
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-5-4" class="outline-3">
<h3 id="sec-5-4"><span class="section-number-3">5.4</span> 形式参数、实际参数、传值调用、引用调用</h3>
<div class="outline-text-3" id="text-5-4">
<ul class="org-ul">
<li>函数定义时圆括号内用逗号分割形式参数(formal parameters)列表
</li>
<li>函数调用时，调用者向函数传递实际参数(actual parameters or arguments)
</li>
<li>函数通过参数从得到外界值
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">try_to_change</span><span style="color: #c5c8c6;">(</span>n<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">n</span> = <span style="color: #8abeb7;">'Mr.Gumby'</span>

<span style="color: #f0c674;">name</span> = <span style="color: #8abeb7;">'Mrs. Entity'</span>
try_to_change<span style="color: #c5c8c6;">(</span>name<span style="color: #c5c8c6;">)</span>
name
</pre>
</div>

<ul class="org-ul">
<li>同名变量，函数内局部变量屏遮蔽(shadowing)外部的局部变量或全局变量
</li>
<li>字符串本身是不可改变的，如果以可改变数据做参数会怎样呢？
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">change</span><span style="color: #c5c8c6;">(</span>m<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">m</span><span style="color: #c5c8c6;">[</span>0<span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'Mr.Gumby'</span>

<span style="color: #f0c674;">mlist</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'Mrs. Entity'</span>, <span style="color: #8abeb7;">'Mrs. Thing'</span><span style="color: #c5c8c6;">]</span>

change<span style="color: #c5c8c6;">(</span>mlist<span style="color: #c5c8c6;">)</span>

mlist
</pre>
</div>

<ul class="org-ul">
<li>前例是将值赋予局部变量,类似“传值调用(call by value)”
</li>
<li>本例是将列表名字(name)，传给变量m,因此m和mlist两个名字，指向的是同一
个值（列表），修改m指向的列表时，mlist自然改变,类似“引用调用(call by
reference)”
</li>
<li>python传变量方式call by share
</li>
<li>思考: 如何将列表传递改为传值调用？
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5"><span class="section-number-3">5.5</span> 参数类型</h3>
<div class="outline-text-3" id="text-5-5">
</div><div id="outline-container-sec-5-5-1" class="outline-4">
<h4 id="sec-5-5-1"><span class="section-number-4">5.5.1</span> 位置参数</h4>
<div class="outline-text-4" id="text-5-5-1">
<ul class="org-ul">
<li>位置参数 (positional parameters)，位置起重要作用，比参数名字更重要
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">hello1</span><span style="color: #c5c8c6;">(</span>greeting, name<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'%s, %s!'</span> % <span style="color: #8abeb7;">(</span>greeting, name<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">hello2</span><span style="color: #c5c8c6;">(</span>name, greeting<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'%s, %s!'</span> % <span style="color: #8abeb7;">(</span>name, greeting<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">hello3</span><span style="color: #c5c8c6;">(</span>name, greeting<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'%s, %s!'</span> % <span style="color: #8abeb7;">(</span>name, greeting<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

hello1<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'hello'</span>, <span style="color: #8abeb7;">'world'</span><span style="color: #c5c8c6;">)</span>
hello2<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Hello'</span>, <span style="color: #8abeb7;">'world'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>可看出参数名字不甚重要，尽管参数名字不同，这两个函数做的是同一件事
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-5-2" class="outline-4">
<h4 id="sec-5-5-2"><span class="section-number-4">5.5.2</span> 关键字参数</h4>
<div class="outline-text-4" id="text-5-5-2">
<ul class="org-ul">
<li>当参数过多时，容易记错参数的顺序
</li>
<li>为了简化记忆，可以给参数起名字。所谓关键字参数(keyword parameters),
能明确示意参数功能
</li>
<li>此时，顺序不重要了，名字重要
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python">hello1<span style="color: #c5c8c6;">(</span>greeting=<span style="color: #8abeb7;">'hEllo'</span>, name=<span style="color: #8abeb7;">'world'</span><span style="color: #c5c8c6;">)</span>
hello1<span style="color: #c5c8c6;">(</span>name=<span style="color: #8abeb7;">'world'</span>,greeting=<span style="color: #8abeb7;">'hEllo'</span><span style="color: #c5c8c6;">)</span>
hello2<span style="color: #c5c8c6;">(</span>greeting=<span style="color: #8abeb7;">'heLLo'</span>, name=<span style="color: #8abeb7;">'world'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>比如调用函数，store('Mr. Brainsample', 10, 20, 13, 5)一眼很难看出这
是在做什么。如果写法改成，
store(patient='Mr. Brainsample',hour=10,minute=20, day=13, month=5)，
几乎可以猜到该函数完成什么功能了
</li>
<li>关键字参数真正大放异彩之处，是在函数定义时，可定义参数默认值。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">hello4</span><span style="color: #c5c8c6;">(</span>name=<span style="color: #8abeb7;">'world'</span>, greeting=<span style="color: #8abeb7;">'Hello'</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'%s, %s!'</span> % <span style="color: #8abeb7;">(</span>name, greeting<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

hello4<span style="color: #c5c8c6;">()</span>
hello4<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Greetings'</span><span style="color: #c5c8c6;">)</span>
hello4<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Greetings'</span>, <span style="color: #8abeb7;">'universe'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">hello5</span><span style="color: #c5c8c6;">(</span>name, greeting=<span style="color: #8abeb7;">'Hello'</span>, punctuation=<span style="color: #8abeb7;">'!'</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'%s, %s%s'</span> % <span style="color: #8abeb7;">(</span>greeting, name, punctuation<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

hello5<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Mars'</span><span style="color: #c5c8c6;">)</span>
hello5<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Mars'</span>, <span style="color: #8abeb7;">'Howdy'</span><span style="color: #c5c8c6;">)</span>
hello5<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Mars'</span>, <span style="color: #8abeb7;">'Howdy'</span>, <span style="color: #8abeb7;">'...'</span><span style="color: #c5c8c6;">)</span>
hello5<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Mars'</span>, punctuation=<span style="color: #8abeb7;">'.'</span><span style="color: #c5c8c6;">)</span>
hello5<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Mars'</span>, greeting=<span style="color: #8abeb7;">'Top of the morning to ya'</span><span style="color: #c5c8c6;">)</span>
hello5<span style="color: #c5c8c6;">()</span>
</pre>
</div>

<ul class="org-ul">
<li>位置参数和关键字参数可以组合使用，要求，位置参数在前,关键字参数在后
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-5-3" class="outline-4">
<h4 id="sec-5-5-3"><span class="section-number-4">5.5.3</span> 可变长参数</h4>
<div class="outline-text-4" id="text-5-5-3">
<ul class="org-ul">
<li>有时，允许用户提供任意多的参数也有用武之地
</li>
<li>比如，store(data, name1, name2, name3)，此种情况应该允许提供任意多的
名字。为此，要在函数定义中使用可变长参数。一个*加一个参数名字
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">print_params</span><span style="color: #c5c8c6;">(</span>*params<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>params<span style="color: #c5c8c6;">)</span>

print_params<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Testing'</span><span style="color: #c5c8c6;">)</span>
print_params<span style="color: #c5c8c6;">(</span>1, 2, 3<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27880;&#24847;&#32467;&#26524;&#26159;&#19968;&#20010;&#20803;&#32452;</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">print_params_2</span><span style="color: #c5c8c6;">(</span>title, *params<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>title<span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>params<span style="color: #c5c8c6;">)</span>

print_params_2<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Params:'</span>, 1, 2, 3<span style="color: #c5c8c6;">)</span>
print_params_2<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Nothing:'</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#24471;&#21040;&#19968;&#20010;&#31354;&#20803;&#32452;</span>
</pre>
</div>

<ul class="org-ul">
<li>一个*表示“把余下所有的位置参数集到一个元组里”
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python">print_params_2<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Hmm...'</span>, something=42<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">TypeError</span>
</pre>
</div>

<ul class="org-ul">
<li>*对关键字参数不起作用，需要另外一个操作符，收集所有关键字参数
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">print_params_3</span><span style="color: #c5c8c6;">(</span>**params<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>params<span style="color: #c5c8c6;">)</span>

print_params_3<span style="color: #c5c8c6;">(</span>x=1, y=2, z=3<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">print_params_4</span><span style="color: #c5c8c6;">(</span>x, y, z=3, *pospar, **keypar<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x, y, z<span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>pospar<span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>keypar<span style="color: #c5c8c6;">)</span>

print_params_4<span style="color: #c5c8c6;">(</span>1, 2, 3, 4, 5, 6, 7, foo=1, bar=2<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#</span><span style="color: #969896; font-style: italic;">&#12288;&#33021;&#21542;&#35299;&#37322;&#32467;&#26524;&#65311;</span>
</pre>
</div>

<ul class="org-ul">
<li>**将关键字参数集到一个字典里
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-5-4" class="outline-4">
<h4 id="sec-5-5-4"><span class="section-number-4">5.5.4</span> 反向过程</h4>
<div class="outline-text-4" id="text-5-5-4">
<ul class="org-ul">
<li>**的作用是集起参数，反过程是将集合的参数打散分配(distribute)给变量
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">add</span><span style="color: #c5c8c6;">(</span>x, y<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">return</span> x + y

<span style="color: #f0c674;">params</span> = <span style="color: #c5c8c6;">(</span>1, 2<span style="color: #c5c8c6;">)</span>
add<span style="color: #c5c8c6;">(</span>*params<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#22312;&#35843;&#29992;&#26102;&#65292;&#32780;&#19981;&#26159;&#23450;&#20041;&#26102;&#65292;&#32473;&#21442;&#25968;&#21152;*&#65292;&#21363;&#21487;&#23558;&#21442;&#25968;&#20998;&#37197;&#32473;&#21464;</span>
              <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#37327;&#12290; * &#36866;&#29992;&#20110;&#20803;&#32452;&#12289;&#21015;&#34920;</span>

<span style="color: #f0c674;">params</span> = <span style="color: #c5c8c6;">{</span><span style="color: #8abeb7;">'name'</span>: <span style="color: #8abeb7;">'Sir Robin'</span>, <span style="color: #8abeb7;">'greeting'</span>: <span style="color: #8abeb7;">'Well met'</span><span style="color: #c5c8c6;">}</span>
hello3<span style="color: #c5c8c6;">(</span>**params<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">** &#36866;&#29992;&#20110;&#23383;&#20856;</span>


<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#23450;&#20041;&#20989;&#25968;&#21644;&#35843;&#29992;&#20989;&#25968;&#65292;&#20165;&#19968;&#26041;&#20351;&#29992;&#26102;&#65292;&#25165;&#33021;&#20307;&#29616;&#21487;&#21464;&#21442;&#25968;&#20248;&#21183;&#12290;</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27604;&#36739;&#37117;&#20351;&#29992;&#25110;&#37117;&#19981;&#20351;&#29992;&#65292;&#20307;&#29616;&#19981;&#20986;&#20248;&#21183;&#12290;</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">with_stars</span><span style="color: #c5c8c6;">(</span>**kwds<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>kwds<span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'name'</span><span style="color: #8abeb7;">]</span>, <span style="color: #8abeb7;">'is'</span>, kwd<span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'age'</span><span style="color: #8abeb7;">]</span>, <span style="color: #8abeb7;">'years old'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">without_stars</span><span style="color: #c5c8c6;">(</span>kwds<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>kwds<span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'name'</span><span style="color: #8abeb7;">]</span>, <span style="color: #8abeb7;">'is'</span>, kwds<span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'age'</span><span style="color: #8abeb7;">]</span>, <span style="color: #8abeb7;">'years old'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">args</span> = <span style="color: #c5c8c6;">{</span><span style="color: #8abeb7;">'name'</span>: <span style="color: #8abeb7;">'Mr. Adam'</span>, <span style="color: #8abeb7;">'age'</span>: 23<span style="color: #c5c8c6;">}</span>
with_stars<span style="color: #c5c8c6;">(</span>**args<span style="color: #c5c8c6;">)</span>
without_starts<span style="color: #c5c8c6;">(</span>args<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>做练习，阅读理解下面代码
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">story</span><span style="color: #c5c8c6;">(</span>**kwds<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">return</span> <span style="color: #8abeb7;">'Once upon a time, there was a '</span> \
    <span style="color: #8abeb7;">'%(job)s called %(name)s.'</span> % kwds

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">power</span><span style="color: #c5c8c6;">(</span>x, y, *others<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">if</span> others:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Received redundant parameters:'</span>, others<span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">return</span> <span style="color: #b294bb;">pow</span><span style="color: #c5c8c6;">(</span>x,y<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">interval</span><span style="color: #c5c8c6;">(</span>start, stop=<span style="color: #81a2be;">None</span>, step=1<span style="color: #c5c8c6;">)</span>:
    <span style="color: #8abeb7;">'Imitates range() for step &gt; 0'</span>
    <span style="color: #b5bd68;">if</span> stop <span style="color: #b5bd68;">is</span> <span style="color: #81a2be;">None</span>:
        <span style="color: #f0c674;">start</span>, <span style="color: #f0c674;">stop</span> = 0, start
    <span style="color: #f0c674;">result</span> = <span style="color: #c5c8c6;">[]</span>
    <span style="color: #f0c674;">i</span> = start
    <span style="color: #b5bd68;">while</span> i &lt; stop:
        result.append<span style="color: #c5c8c6;">(</span>i<span style="color: #c5c8c6;">)</span>
        <span style="color: #f0c674;">i</span> += step
    <span style="color: #b5bd68;">return</span> result

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>story<span style="color: #8abeb7;">(</span>job=<span style="color: #8abeb7;">'king'</span>, name=<span style="color: #8abeb7;">'Gumby'</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>story<span style="color: #8abeb7;">(</span>name=<span style="color: #8abeb7;">'Sir Robin'</span>, job=<span style="color: #8abeb7;">'brave knight'</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">params</span> = <span style="color: #c5c8c6;">{</span><span style="color: #8abeb7;">'job'</span>: <span style="color: #8abeb7;">'language'</span>, <span style="color: #8abeb7;">'name'</span>:<span style="color: #8abeb7;">'Python'</span><span style="color: #c5c8c6;">}</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>story<span style="color: #8abeb7;">(</span>**params<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">del</span> params<span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'job'</span><span style="color: #c5c8c6;">]</span>
params
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>story<span style="color: #8abeb7;">(</span>job=<span style="color: #8abeb7;">'stroke of genius'</span>, **params<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>


power<span style="color: #c5c8c6;">(</span>2, 3<span style="color: #c5c8c6;">)</span>, power<span style="color: #c5c8c6;">(</span>3, 2<span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">params</span> = <span style="color: #c5c8c6;">(</span>5,<span style="color: #c5c8c6;">)</span> * 2
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>params<span style="color: #c5c8c6;">)</span>
power<span style="color: #c5c8c6;">(</span>*params<span style="color: #c5c8c6;">)</span>

power<span style="color: #c5c8c6;">(</span>3,3, <span style="color: #8abeb7;">'Hello, World'</span><span style="color: #c5c8c6;">)</span>

interval<span style="color: #c5c8c6;">(</span>10<span style="color: #c5c8c6;">)</span>, interval<span style="color: #c5c8c6;">(</span>1,5<span style="color: #c5c8c6;">)</span>, interval<span style="color: #c5c8c6;">(</span>3, 12, 4<span style="color: #c5c8c6;">)</span>

power<span style="color: #c5c8c6;">(</span>*interval<span style="color: #8abeb7;">(</span>3,7<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5-6" class="outline-3">
<h3 id="sec-5-6"><span class="section-number-3">5.6</span> 作用域、命名空间</h3>
<div class="outline-text-3" id="text-5-6">
<ul class="org-ul">
<li>变量是什么？　可以吧变量理解为指向值的名字、标签
</li>
<li>x = 1就好像字典项一样。只不过是一个“无形”字典
</li>
<li>事实上，内置函数vars，其返回值，就是这个描述变量的“无形”字典
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span> = 1
<span style="color: #f0c674;">scope</span> = <span style="color: #b294bb;">vars</span><span style="color: #c5c8c6;">()</span>
scope<span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'x'</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">scope</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'x'</span><span style="color: #c5c8c6;">]</span> += 1
x
</pre>
</div>

<ul class="org-ul">
<li>这种无形的字典称为命名空间(namespace)或作用域(scope)
</li>
<li>全局空间是一个命名空间，每一个函数调用都会创建一个新的命名空间。
</li>
<li>所以，函数的局部变量仅在其局部命名空间中起作用
</li>
<li>传值参数是典型的局部变量
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">output</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">x</span> = 42
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">x</span> = 1
<span style="color: #f0c674;">y</span> = 2
output<span style="color: #c5c8c6;">(</span>y<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>如果要在函数内访问全局变量怎么办？
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">combine</span><span style="color: #c5c8c6;">(</span>param<span style="color: #c5c8c6;">)</span>: <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>param + external<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">external</span> = <span style="color: #8abeb7;">'berry'</span>
combine<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Shrub'</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#36824;&#21487;&#20197;&#22312;&#20989;&#25968;&#20869;&#37325;&#26032;&#32465;&#23450;(rebinding)&#21464;&#37327;&#12290;</span>

<span style="color: #f0c674;">x</span> = 1
<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">change_g</span><span style="color: #c5c8c6;">()</span>:
    <span style="color: #b5bd68;">global</span> x  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#40664;&#35748;&#20989;&#25968;&#20869;&#21464;&#37327;&#37117;&#26159;&#23616;&#37096;&#21464;&#37327;&#65292;&#36890;&#36807;&#37325;&#26032;&#32465;&#23450;&#65292;&#35774;&#20026;&#20840;&#23616;&#21464;&#37327;</span>
    <span style="color: #f0c674;">x</span> = x + 1

change_g<span style="color: #c5c8c6;">()</span>
x
</pre>
</div>

<ul class="org-ul">
<li>尽量减少使用全局变量，尽量不要在函数内绑定全局变量
</li>
<li>频繁使用全局变量是不良编程风格
</li>
</ul>
</div>

<div id="outline-container-sec-5-6-1" class="outline-4">
<h4 id="sec-5-6-1"><span class="section-number-4">5.6.1</span> 递归</h4>
<div class="outline-text-4" id="text-5-6-1">
<ul class="org-ul">
<li>函数可以调用其他函数。而且，函数还可以调用自身（函数），调用自身称为
递归。Recursion: referring to yourself.
</li>
<li>递归关键是识别出两种情况
<ul class="org-ul">
<li>基础情况　A base case　最简单情况，函数直接返回值
</li>
<li>递归情况　A recursive case　调用自身，但规模问题规模减小了
</li>
</ul>
</li>

<li>写递归程序步骤：
1． 写出基础情况和递归情况
2． 阅读代码
<ol class="org-ol">
<li>解释代码
</li>
<li>修改代码
</li>
</ol>
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-5-6-1-1" name="sec-5-6-1-1"></a>阶乘和乘方<br  /><div class="outline-text-5" id="text-5-6-1-1">
<ul class="org-ul">
<li>经典递归例子：阶乘和乘方(Fractorial and Power)
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">frac</span><span style="color: #c5c8c6;">(</span>n<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">result</span> = n
    <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>1, n<span style="color: #c5c8c6;">)</span>:
        <span style="color: #f0c674;">result</span> *= i
    <span style="color: #b5bd68;">return</span> result

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">+ base case: the fractorial of 1 is 1</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">+ recursive case: the fractorial of n greater than 1 is the product of</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">n and the fractorial of n-1</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">frac</span><span style="color: #c5c8c6;">(</span>n<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">if</span> n == 1:
        <span style="color: #b5bd68;">return</span> 1
    <span style="color: #b5bd68;">else</span>:
        <span style="color: #b5bd68;">return</span> n * frac<span style="color: #c5c8c6;">(</span>n-1<span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'n in this level is %d'</span> % n<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">power</span><span style="color: #c5c8c6;">(</span>x, n<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">result</span> = 1
    <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>n<span style="color: #c5c8c6;">)</span>:
        <span style="color: #f0c674;">result</span> *= x
    <span style="color: #b5bd68;">return</span> result

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">+ power(x, 0) is 1 for all number x.</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">+ power(x, n) for n &gt; 0 is the product of x and the power(x, n-1)</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">power</span><span style="color: #c5c8c6;">(</span>x, n<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">if</span> n == 0:
        <span style="color: #b5bd68;">return</span> 1
    <span style="color: #b5bd68;">else</span>:
        <span style="color: #b5bd68;">return</span> x * power<span style="color: #c5c8c6;">(</span>x, n-1<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>递归程序练习: 二分法
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">search</span><span style="color: #c5c8c6;">(</span>sequence, number, lower=0, upper=<span style="color: #81a2be;">None</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">if</span> upper <span style="color: #b5bd68;">is</span> <span style="color: #81a2be;">None</span>:
        <span style="color: #f0c674;">upper</span> = <span style="color: #b294bb;">len</span><span style="color: #c5c8c6;">(</span>sequence<span style="color: #c5c8c6;">)</span> - 1
    <span style="color: #b5bd68;">if</span> lower == upper:
        <span style="color: #b5bd68;">assert</span> number == sequence<span style="color: #c5c8c6;">[</span>upper<span style="color: #c5c8c6;">]</span>
        <span style="color: #b5bd68;">return</span> upper
    <span style="color: #b5bd68;">else</span>:
        <span style="color: #f0c674;">middle</span> = <span style="color: #c5c8c6;">(</span>lower + upper<span style="color: #c5c8c6;">)</span> // 2
        <span style="color: #b5bd68;">if</span> number &gt; sequence<span style="color: #c5c8c6;">[</span>middle<span style="color: #c5c8c6;">]</span>:
            <span style="color: #b5bd68;">return</span> search<span style="color: #c5c8c6;">(</span>sequence, number, middle+1, upper<span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">else</span>:
            <span style="color: #b5bd68;">return</span> search<span style="color: #c5c8c6;">(</span>sequence, number, lower, middle<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">seq</span> = <span style="color: #c5c8c6;">[</span>34, 67, 8, 123, 4, 100, 95<span style="color: #c5c8c6;">]</span>
seq.sort<span style="color: #c5c8c6;">()</span>
seq
search<span style="color: #c5c8c6;">(</span>seq, 34<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-5-7" class="outline-3">
<h3 id="sec-5-7"><span class="section-number-3">5.7</span> lambda　表达式</h3>
<div class="outline-text-3" id="text-5-7">
<ul class="org-ul">
<li>lambda体现了函数式编程范式(functional programming pradigm)风格
</li>
<li>lambda表达式用来声明匿名函数，即不起名，临时使用的小巧函数
</li>
<li>lambda表达式仅可包含一个表达式，不允许复杂语句，可以调用函数，该表达
式计算结果就是返回值
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">f</span> = <span style="color: #b5bd68;">lambda</span> x, y, z: x+y+z
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>f<span style="color: #8abeb7;">(</span>1, 2, 3<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21547;&#26377;&#21442;&#25968;&#40664;&#35748;&#20540;</span>
<span style="color: #f0c674;">g</span> = <span style="color: #b5bd68;">lambda</span> <span style="color: #f0c674;">x</span>, <span style="color: #f0c674;">y</span>=2, 3: x+y+z
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>g<span style="color: #8abeb7;">(</span>1<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#35843;&#29992;&#26102;&#20351;&#29992;&#20851;&#38190;&#23383;&#21442;&#25968;</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>g<span style="color: #8abeb7;">(</span>2, z=4, y=5<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span> 

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#30041;&#24515;</span>
<span style="color: #f0c674;">L</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">(</span><span style="color: #b5bd68;">lambda</span> x: x**2<span style="color: #8abeb7;">)</span>, <span style="color: #8abeb7;">(</span><span style="color: #b5bd68;">lambda</span> x: x**3<span style="color: #8abeb7;">)</span>, <span style="color: #8abeb7;">(</span><span style="color: #b5bd68;">lambda</span> x: x**4<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">]</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>L<span style="color: #8abeb7;">[</span>0<span style="color: #8abeb7;">](</span>2<span style="color: #8abeb7;">)</span>, L<span style="color: #8abeb7;">[</span>1<span style="color: #8abeb7;">](</span>2<span style="color: #8abeb7;">)</span>, L<span style="color: #8abeb7;">[</span>2<span style="color: #8abeb7;">](</span>2<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>注意lambda的变量作用域。总体讲,lambda小巧，但可读性差。有时用好了有奇效
</li>
<li>最新观点（fluent python）认为，generator expression的引入，会显著减
少lambda的使用
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">r</span> = <span style="color: #c5c8c6;">[]</span>
<span style="color: #b5bd68;">for</span> x <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>10<span style="color: #c5c8c6;">)</span>:
    r.append<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">lambda</span>: x**2<span style="color: #c5c8c6;">)</span>&#12288;<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20462;&#25913;&#20026; r.append(lambda n=x: n**2)&#21363;&#24471;&#21040;&#39044;&#24819;&#32467;&#26524;</span>

r<span style="color: #c5c8c6;">[</span>0<span style="color: #c5c8c6;">]()</span>
r<span style="color: #c5c8c6;">[</span>1<span style="color: #c5c8c6;">]()</span> <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">x&#26159;&#22312;lambda&#22806;&#37096;&#20316;&#29992;&#22495;&#23450;&#20041;&#30340;&#65292;&#23545;lambda&#32780;&#35328;&#19981;&#26159;&#23616;&#37096;&#21464;&#37327;&#65292;&#27599;&#27425;&#35843;&#29992;&#37117;&#28165;&#31354;&#21407;&#20540;&#12290;</span>
r  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">r &#26159;lambda&#34920;&#36798;&#24335;&#30340;&#21015;&#34920;&#65292;&#20989;&#25968;&#24335;&#32534;&#31243;&#30340;&#24847;&#24605;&#65292;&#23601;&#26159;evaluate&#65292;&#32780;&#19981;&#26159;assignment</span>
</pre>
</div>
<ul class="org-ul">
<li>自学：函数式编程函数，map, filter, reduce
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-8" class="outline-3">
<h3 id="sec-5-8"><span class="section-number-3">5.8</span> Batteries Included及自学门径</h3>
<div class="outline-text-3" id="text-5-8">
</div><div id="outline-container-sec-5-8-1" class="outline-4">
<h4 id="sec-5-8-1"><span class="section-number-4">5.8.1</span> 模块中的函数</h4>
<div class="outline-text-4" id="text-5-8-1">
<ul class="org-ul">
<li>大家已了解Python基本内容，而python真正强大、吸引人之处在于其内置及海
量的第三方工具包
</li>
<li><a href="https://pypi.python.org/pypi">https://pypi.python.org/pypi</a>
</li>
<li>安装python自带（内置built-in）的工具包称为标准库(standard library)，比如
math, cmath。第三发开发的称为第三方库或扩展库(third-party library)
</li>
<li>任意python程序都能被引入为模块
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">hello2.py</span>
<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">hello</span><span style="color: #c5c8c6;">()</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Hello world!"</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">import</span> hello2
hello2.hello<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">hello()&#20989;&#25968;&#21629;&#21517;&#31354;&#38388;&#20026;hello2&#65292;&#25152;&#20197;&#21487;&#20197;&#36890;&#36807;&#20854;&#31354;&#38388;&#24341;&#29992;&#35813;&#20989;&#25968;&#12290;</span>
</pre>
</div>

<ul class="org-ul">
<li>这就像重名北京.张三，上海.张三。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> sys  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#19982;&#23433;&#35013;&#30340;python&#26377;&#20851;&#30340;&#35774;&#32622;</span>
<span style="color: #b5bd68;">import</span> pprint
pprint.pprint<span style="color: #c5c8c6;">(</span>sys.path<span style="color: #c5c8c6;">)</span>
sys.path.append<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'c:/python'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>import hello2
</li>
<li>模块被引入时基本不做事情，他们主要工作是定义事物，如变量、函数、类等
</li>
<li>定义只要一次就够了，多次引用一个模块，与引用一次效果相当
</li>
<li>引入模块后，该模块会保持其作用域，这就是说，该模块中定义的变量、函数、
类自动成为该模块属性hello2.hello()
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-8-2" class="outline-4">
<h4 id="sec-5-8-2"><span class="section-number-4">5.8.2</span> 在模块中加入测试语句</h4>
<div class="outline-text-4" id="text-5-8-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">hello3.py</span>
<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">hello</span><span style="color: #c5c8c6;">()</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"hello, world!"</span><span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">a test:</span>
hello<span style="color: #c5c8c6;">()</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">The key to avoiding it is "telling" the module whether it's being run</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">as a program on its own or being imported into another program.  To do</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">that,  you need the variable __name__:</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">hello4.py</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">hello4&#21487;&#20197;&#29420;&#31435;&#36816;&#34892;&#65292;&#20063;&#21487;&#20197;&#20316;&#20026;&#27169;&#22359;&#34987;&#20854;&#20182;&#24341;&#29992;</span>
<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">hello</span><span style="color: #c5c8c6;">()</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"hello world!"</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">test</span><span style="color: #c5c8c6;">()</span>:
    hello<span style="color: #c5c8c6;">()</span>

<span style="color: #b5bd68;">if</span> <span style="color: #b294bb;">__name__</span> == <span style="color: #8abeb7;">'__main__'</span>:
    test<span style="color: #c5c8c6;">()</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-8-3" class="outline-4">
<h4 id="sec-5-8-3"><span class="section-number-4">5.8.3</span> 自定义模块在哪里</h4>
<div class="outline-text-4" id="text-5-8-3">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> sys, pprint
pprint.pprint<span style="color: #c5c8c6;">(</span>sys.path<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>一般第三方模块都置入site-packages中，大家可以看看里面都有什么
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-8-4" class="outline-4">
<h4 id="sec-5-8-4"><span class="section-number-4">5.8.4</span> 包</h4>
<div class="outline-text-4" id="text-5-8-4">
<ul class="org-ul">
<li>当模块多起来时，需要组织成包(package)。包是另一种类型的模块，包的不同之处在于它可以包含其他模块
</li>
<li>从操作系统视角看，一个模块是一个文件，一个包是一个文件夹
</li>
<li>一个包能从文件夹变身为python识别的包，它必须包含名为
__init__.py的文件，该文件描述包的内容。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> constants
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>constants.PI<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>阅读：
<ul class="org-ul">
<li><a href="https://github.com/kennethreitz/samplemod">Kenneth Reitz推荐的包结构</a>
</li>
<li><a href="https://stackoverflow.com/questions/193161/what-is-the-best-project-structure-for-a-python-application">Jean-Paul Calderone的推荐</a>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-8-5" class="outline-4">
<h4 id="sec-5-8-5"><span class="section-number-4">5.8.5</span> 自学模块</h4>
<div class="outline-text-4" id="text-5-8-5">
<ul class="org-ul">
<li>当遇到一个模块，自己应尽力了解、探索，对模块有个大致掌握。为后续深入
钻研打个基础
</li>
<li>以copy为例，为了了解copy梗概，我们在解释器提示符(prompt)下，探索该模块
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-5-8-5-1" name="sec-5-8-5-1"></a>dir<br  /><div class="outline-text-5" id="text-5-8-5-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> copy

<span style="color: #b294bb;">dir</span><span style="color: #c5c8c6;">(</span>copy<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>列出模块中的属性、函数、类、变量等。有些名字带下划线，下划线是作者明
示，按python编程惯例，这些名字不应该在模块外使用
</li>
<li>即这些名字代表的函数或类是作者自用的，而不是给用户用的
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #c5c8c6;">[</span> n <span style="color: #b5bd68;">for</span> n <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">dir</span><span style="color: #8abeb7;">(</span>copy<span style="color: #8abeb7;">)</span> <span style="color: #b5bd68;">if</span> <span style="color: #b5bd68;">not</span> n.startswith<span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">'_'</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">]</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#21015;&#34920;&#25512;&#23548;&#24335;</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-5-8-5-2" name="sec-5-8-5-2"></a>__all__<br  /><div class="outline-text-5" id="text-5-8-5-2">
<div class="org-src-container">

<pre class="src src-python">copy.<span style="color: #b294bb;">__all__</span>
</pre>
</div>

<ul class="org-ul">
<li>会得到一个列表，列出可用函数。与上一个列表推导式基本一致。区别在于，
__all__的内容是由作者拟定的
</li>
<li>去看copy.py里面的__all__变量声明
</li>
<li>当使用 from copy import *　得到的正式__all__中列出的函数
</li>
<li>当您自己写模块时，也应在模块中声明__all__变量。明确告诉读者，哪些函数是可
用的，是个好习惯
</li>
</ul>
</div>
</li>

<li><a id="sec-5-8-5-3" name="sec-5-8-5-3"></a>help<br  /><div class="outline-text-5" id="text-5-8-5-3">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b294bb;">help</span><span style="color: #c5c8c6;">(</span>copy.copy<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>help给出的信息，基本够一个程序员正常所需
</li>
</ul>
</div>
</li>

<li><a id="sec-5-8-5-4" name="sec-5-8-5-4"></a>__doc__<br  /><div class="outline-text-5" id="text-5-8-5-4">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>copy.copy.<span style="color: #b294bb;">__doc__</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">copy&#30340;copy&#20989;&#25968;&#30340;__doc__&#23646;&#24615;</span>
</pre>
</div>

<ul class="org-ul">
<li>help一般比doc给出更多关于模块的信息
</li>
</ul>
</div>
</li>

<li><a id="sec-5-8-5-5" name="sec-5-8-5-5"></a>Library Reference<br  /><div class="outline-text-5" id="text-5-8-5-5">
<ul class="org-ul">
<li><a href="https://docs.python.org/3.5/library/index.html">Python Library Reference(for Python 3.5)</a>描述了所有内置库的模块
</li>
<li>遇到问题，尤其是想了解关于python的具体情况时，基本会在这里找到答案
</li>
</ul>
</div>
</li>

<li><a id="sec-5-8-5-6" name="sec-5-8-5-6"></a>__file__<br  /><div class="outline-text-5" id="text-5-8-5-6">
<ul class="org-ul">
<li>真想理解python，真想透彻搞清一个模块，除了阅读源代码，没有其他捷径
</li>
<li>读python源码是第二有效的学习python的方法。第一有效呢？动手写python代码
</li>
<li>如何找到源码文件？
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>copy.__file__<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>到这个文件夹下，直接打开这个文件，开始阅读理解这个模块的工作原理和技
术细节
</li>
</ul>
</div>
</li>

<li><a id="sec-5-8-5-7" name="sec-5-8-5-7"></a>自学以下内置模块<br  /><div class="outline-text-5" id="text-5-8-5-7">
<ul class="org-ul">
<li>sys, os, file input, sets, heapq, collections, time, random, shelve,
</li>
</ul>
<p>
re
</p>
<ul class="org-ul">
<li>functools, difflib, hashlib, csv, timeit, profile, trace,
</li>
</ul>
<p>
datetime, itertools, logging, getopt and optparse, cmd
</p>
<ul class="org-ul">
<li>re实现所谓“正则表达式(regular expression)”，用于匹配字符串，而正则表
达式，本身就可以作为一个专题，用一整本书来探究
<ul class="org-ul">
<li>余晟.正则指引.电子工业出版社，2012
</li>
<li>Jeffrey E.F.Friedl著，余晟译.精通正则表达式.电子工业出版社,2012
</li>
</ul>
</li>
</ul>
</div>
</li></ol>
</div>
</div>
<div id="outline-container-sec-5-9" class="outline-3">
<h3 id="sec-5-9"><span class="section-number-3">5.9</span> <span class="todo NEXT">NEXT</span> 补充练习例子</h3>
<div class="outline-text-3" id="text-5-9">
<ul class="org-ul">
<li>reExample.py
</li>
<li>Mudball.py
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> 第六章　抽象－－对象</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>python是面向对象语言，即它支持面向对象编程
</li>
<li>以C语言为代表的过程式编程重点在编写函数或过程，以处理数据
</li>
<li>面向对象编程，强调创建既包含数据又包含处理功能的对象。每个对象代表了
真实世界的一个客观事物(object)或概念，其处理功能代表了客体之间的关联
互动
</li>
</ul>
</div>

<div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> 一切皆对象</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li>对象是python对数据的进行抽象表达的术语。python程序中，所有数据均表示
为对象或对象间的关系。（这与冯氏“可编程计算机”模型理念一致，而且代码
也是对象）
</li>
<li>每个对象都有一个唯一标识、属于某个数据类型，有一个值
</li>
</ul>

<pre class="example">
Objects are Python’s abstraction for data. All data in a Python
program is represented by objects or by relations between
objects. (In a sense, and in conformance to Von Neumann’s model of
a “stored program computer,” code is also represented by objects.)

dEvery object has an identity, a type and a value.
            -- https://docs.python.org/dev/reference/datamodel.html
</pre>

<ul class="org-ul">
<li>因此在Python中所有事物都是对象。列表是对象，42是对象，模块是对象，函
数是对象
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">foo</span><span style="color: #c5c8c6;">()</span>: <span style="color: #b5bd68;">pass</span>

<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span>foo<span style="color: #c5c8c6;">)</span>, <span style="color: #b294bb;">id</span><span style="color: #c5c8c6;">(</span>foo<span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">(&lt;class 'function'&gt;, 38110760)   #  &#20989;&#25968;&#26159;&#23545;&#35937;</span>
<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span>foo.__code__<span style="color: #c5c8c6;">)</span>, <span style="color: #b294bb;">id</span><span style="color: #c5c8c6;">(</span>foo.__code__<span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">(&lt;class 'code'&gt;, 38111680)  #  &#20195;&#30721;&#26159;&#23545;&#35937;</span>
</pre>
</div>
</div>

<div id="outline-container-sec-6-1-1" class="outline-4">
<h4 id="sec-6-1-1"><span class="section-number-4">6.1.1</span> 数据类型</h4>
<div class="outline-text-4" id="text-6-1-1">
<ul class="org-ul">
<li>一个对象的数据类型定义了该对象数据的取值范围，同时规定了该对象可以完成的动作。
</li>
</ul>
<pre class="example">
…An object’s type determines the operations that the object
supports (e.g., “does it have a length?”) and also defines the
possible values for objects of that type. 
                                        -- ibid.
</pre>

<ul class="org-ul">
<li>事实上数据类型本身也是对象，它的数据类型就是自身，type
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span>42<span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&lt;class 'int'&gt;</span>
<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">type</span><span style="color: #8abeb7;">(</span>42<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&lt;class 'type'&gt;</span>
<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">type</span><span style="color: #8abeb7;">(</span><span style="color: #b294bb;">type</span><span style="color: #f0c674;">(</span>42<span style="color: #f0c674;">)</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&lt;class 'type'&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-1-2" class="outline-4">
<h4 id="sec-6-1-2"><span class="section-number-4">6.1.2</span> 类</h4>
<div class="outline-text-4" id="text-6-1-2">
<ul class="org-ul">
<li>python中，类就是用户自定义的数据类型。
</li>
</ul>
<pre class="example">
Essentially, a class is a mechanism Python gives us to create new
user-defined types from Python code.
</pre>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Joe</span>: 
    <span style="color: #b5bd68;">pass</span>
<span style="color: #f0c674;">j</span> = Joe<span style="color: #c5c8c6;">()</span>
<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span>j<span style="color: #c5c8c6;">)</span>
&lt;<span style="color: #b5bd68;">class</span> <span style="color: #8abeb7;">'__main__.Joe'</span>&gt;
<span style="color: #b294bb;">type</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">type</span><span style="color: #8abeb7;">(</span>j<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
&lt;<span style="color: #b5bd68;">class</span> <span style="color: #8abeb7;">'type'</span>&gt;
</pre>
</div>

<ul class="org-ul">
<li>使用python的语法，及python内置机制，我们创造了一个自定义数据类型Joe。
j是类Joe的实例,意即j是一个对象，它的数据类型是Joe。而类Joe，既是一个
对象，又是一个数据类型。
</li>
<li>术语“类（class）”和“数据类型（ｔｙｐｅ）”是同一个概念的两个名字。为
防混淆，一般称内置数据类型(built-in type)为数据类型，自定义数据类型
</li>
</ul>
<p>
(user-defined type)为类。
</p>
<ul class="org-ul">
<li>类提供了将数据和功能组合在一起，成为新数据类型的方法
</li>
<li>创建一个类，就是创建了某种的对象的新数据类型
</li>
<li>类的实例有自己的属性，描述实例的状态，代表了类的数据方面；类和类的实
例有自己的方法，能修改其状态，代表了类的行为方面。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-1-3" class="outline-4">
<h4 id="sec-6-1-3"><span class="section-number-4">6.1.3</span> 实例</h4>
<div class="outline-text-4" id="text-6-1-3">
<ul class="org-ul">
<li>实例(instance)是对象的同义词。 “实例是某数据类型的对象”(Objects are
instances of types)。所以，42是ｉｎｔ数据类型的实例，即42是一个整型对象
</li>
<li>同理，j是自定义数据类型Joe的一个实例，j是类Joe的一个对象
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-1-4" class="outline-4">
<h4 id="sec-6-1-4"><span class="section-number-4">6.1.4</span> 类的例子</h4>
<div class="outline-text-4" id="text-6-1-4">
<ul class="org-ul">
<li>定义数学意义上，二维平面上的点Point
</li>
<li>二维平面中，视点为一个实体（客体object），用横纵坐标定义，如(0, 0)、
(x, y)
</li>
<li>与点有关的操作有，计算该点到原点距离，计算该点到某点的两点间距离，计
算两点的中点坐标，或该点是否在某个矩形或圆形范围内
</li>
<li>定义点的两个坐标是数值型数据，问题是如何将这连个数值，组成代表点的对
象
</li>
<li>初步想法是用元组来表示。可以，且在某些情况下是个不错的选择
</li>
<li>另一个想法，是自定义类Point，两个坐标x,y定义为类的属性(attribute)
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-6-1-4-1" name="sec-6-1-4-1"></a>创建类、实例化对象的语法<br  /><div class="outline-text-5" id="text-6-1-4-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">MyFirstClass</span>:
    <span style="color: #b5bd68;">pass</span>
</pre>
</div>

<ul class="org-ul">
<li>构造函数(constructor)使用init()方法创建一个该类对象
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Point</span>:
    <span style="color: #8abeb7;">""" Point class represents and manipulates x,y coords. """</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:    <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#26500;&#36896;&#20989;&#25968;</span>
        <span style="color: #8abeb7;">""" Create a new point at the origin """</span>
        <span style="color: #b5bd68;">self</span>.x = 0
        <span style="color: #b5bd68;">self</span>.y = 0

<span style="color: #f0c674;">p</span> = Point<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#19968;&#20010;&#23545;&#35937;p&#65292;&#20063;&#31216;&#23454;&#20363;&#21270;initialization</span>
<span style="color: #f0c674;">q</span> = Point<span style="color: #c5c8c6;">()</span>   

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>p.x, p.y, q,x, q.y<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-6-1-4-2" name="sec-6-1-4-2"></a>增加属性和行为<br  /><div class="outline-text-5" id="text-6-1-4-2">
<ul class="org-ul">
<li>每个对象都有自己的状态，由该对象的所有属性值集描述
</li>
<li>该对象的方法可以改变这些属性值，即可以改变对象的状态,完成所谓状态转移
</li>
<li>对象属性赋值（绑定）语句： object.attribute = value
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Point</span>:
    <span style="color: #8abeb7;">""" Point class represents and manipulates x,y coords. """</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:    <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#26500;&#36896;&#20989;&#25968;</span>
        <span style="color: #8abeb7;">""" Create a new point at the origin """</span>
        <span style="color: #b5bd68;">self</span>.x = 1
        <span style="color: #b5bd68;">self</span>.y = 1

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">reset</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.x = 0
        <span style="color: #b5bd68;">self</span>.y = 0

<span style="color: #f0c674;">p</span> = Point<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21019;&#24314;&#19968;&#20010;&#23545;&#35937;p&#65292;&#20063;&#31216;&#23454;&#20363;&#21270;initialization</span>
<span style="color: #f0c674;">q</span> = Point<span style="color: #c5c8c6;">()</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>p.x, p.y, q,x, q.y<span style="color: #c5c8c6;">)</span>

p.reset<span style="color: #c5c8c6;">()</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>p.x, p.y, q.x, q.y<span style="color: #c5c8c6;">)</span>


Point.reset<span style="color: #c5c8c6;">(</span>q<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>q.x, q.y<span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#22914;&#26524;</span>
<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Point2</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">reset</span><span style="color: #c5c8c6;">()</span>:
        <span style="color: #b5bd68;">pass</span>

<span style="color: #f0c674;">z</span> = Point<span style="color: #c5c8c6;">()</span>
z.reset<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">TypeError</span>
</pre>
</div>

<ul class="org-ul">
<li>方法和函數的区别，方法必须至少提供一个参数self，self参数就是指调用该
方法的对象。
</li>
<li>A method is a function that is stored as a class attribute.
</li>
<li>In Python 3, the functions attached to a class are not considered as
unbound method anymore, but as simple functions, that are bound to
an object if required. So the principle stays the same, the model is
justsimplified.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Pizza</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">object</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, size<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.size = size

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">get_size</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">self</span>.size

Pizza.get_size
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Pizza.get_size()</span>
Pizza.get_size<span style="color: #c5c8c6;">(</span>Pizza<span style="color: #8abeb7;">(</span>42<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
Pizza<span style="color: #c5c8c6;">(</span>42<span style="color: #c5c8c6;">)</span>.get_size
</pre>
</div>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> math

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Point</span>:
    <span style="color: #8abeb7;">""" Represents a point in two-dimensional geometric coordinates. """</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:    <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#26500;&#36896;&#20989;&#25968;</span>
        <span style="color: #8abeb7;">"""Initialize the position of a new point. The x and y coords can be</span>
<span style="color: #8abeb7;">specified. If they are not, the point default to the (1,1)."""</span>
        <span style="color: #b5bd68;">self</span>.x = 1
        <span style="color: #b5bd68;">self</span>.y = 1   <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Any idea? In the programming world, duplicate</span>
                     <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">code is considered evil.</span>

<span style="color: #969896; font-style: italic;">#    </span><span style="color: #969896; font-style: italic;">def __init__(self, x=1, y=1):</span>
<span style="color: #969896; font-style: italic;">#        </span><span style="color: #969896; font-style: italic;">self.move(x, y)</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">move</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, x, y<span style="color: #c5c8c6;">)</span>:
       <span style="color: #8abeb7;">"""Move the point to a new location in 2D space."""</span>
        <span style="color: #b5bd68;">self</span>.x = x
        <span style="color: #b5bd68;">self</span>.y = y

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">reset</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
       <span style="color: #8abeb7;">""" Reset the point back to the origin(0,0)"""</span>
        <span style="color: #b5bd68;">self</span>.move<span style="color: #c5c8c6;">(</span>0, 0<span style="color: #c5c8c6;">)</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">calculate_distance</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, other_point<span style="color: #c5c8c6;">)</span>:
       <span style="color: #8abeb7;">"""Calculate the distance from this point to a second point passed as</span>
<span style="color: #8abeb7;">aparameter."""</span>
        <span style="color: #b5bd68;">return</span> math.sqrt<span style="color: #c5c8c6;">(</span>
            <span style="color: #8abeb7;">(</span><span style="color: #b5bd68;">self</span>.x - other_point.x<span style="color: #8abeb7;">)</span> ** 2 +
            <span style="color: #8abeb7;">(</span><span style="color: #b5bd68;">self</span>.y - other_point.y<span style="color: #8abeb7;">)</span> ** 2<span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20351;&#29992;</span>
<span style="color: #f0c674;">p1</span> = Point<span style="color: #c5c8c6;">()</span>
<span style="color: #f0c674;">p2</span> = Point<span style="color: #c5c8c6;">()</span>

p1.reset<span style="color: #c5c8c6;">()</span>
p2.move<span style="color: #c5c8c6;">(</span>5, 0<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>p2.calculate_distance<span style="color: #8abeb7;">(</span>p1<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">assert</span> <span style="color: #c5c8c6;">(</span>p2.calculate_distance<span style="color: #8abeb7;">(</span>p1<span style="color: #8abeb7;">)</span> == p1.calculate_distance<span style="color: #8abeb7;">(</span>p2<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

p1.move<span style="color: #c5c8c6;">(</span>3, 4<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>p1.calculate_distance<span style="color: #8abeb7;">(</span>p2<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>p1.calculate_distance<span style="color: #8abeb7;">(</span>p1<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li></ol>
</div>

<div id="outline-container-sec-6-1-5" class="outline-4">
<h4 id="sec-6-1-5"><span class="section-number-4">6.1.5</span> 对象表示法</h4>
<div class="outline-text-4" id="text-6-1-5">
<ul class="org-ul">
<li>自学
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Unified_Modeling_Language">United Modeling Language</a>
</li>
<li><a href="http://www.uml.org/what-is-uml.htm">统一建模语言</a>
</li>
</ul>
</li>
<li>参考资料：
<ul class="org-ul">
<li><a href="https://www.w3cschool.cn/uml_tutorial">UML tutorial</a>
</li>
<li><a href="./misc/UML_Tutorial.pdf">UML参考手册</a>
</li>
</ul>
</li>
<li>用UML做OOD，面向对象设计。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-1-6" class="outline-4">
<h4 id="sec-6-1-6"><span class="section-number-4">6.1.6</span> 案例1: 简易记事本</h4>
<div class="outline-text-4" id="text-6-1-6">
<ul class="org-ul">
<li>UML设计图
</li>
<li>a simple command-line notebook application
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-6-1-6-1" name="sec-6-1-6-1"></a>Analysis:<br  /><div class="outline-text-5" id="text-6-1-6-1">
<ul class="org-ul">
<li>notes are short memos stored in a notebook.  Each note should record
the day it was written and can have tags added for easy querying.
It should be possible to modify notes.  We also need to be able to
search for notes.  All these things should be done from the command
line.
</li>
</ul>
</div>
</li>

<li><a id="sec-6-1-6-2" name="sec-6-1-6-2"></a>Design<br  /><div class="outline-text-5" id="text-6-1-6-2">
<ul class="org-ul">
<li>Note object.  A notebook container object.  Tags and dates also
seemto be objects, but we can use dates from Python's standard
library.
</li>

<li>Note objects have attributes for memo, tags, creation<sub>date</sub>, and id.
</li>
<li>A match method for searching
</li>
<li>Notebook has the list of notes as an attribute.  A search method
that returns a list of filtered notes.
</li>
<li>interact with these objects? Implement the command-line menu interface
</li>
</ul>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> 对象特征</h3>
<div class="outline-text-3" id="text-6-2">
</div><div id="outline-container-sec-6-2-1" class="outline-4">
<h4 id="sec-6-2-1"><span class="section-number-4">6.2.1</span> 封装</h4>
<div class="outline-text-4" id="text-6-2-1">
<ul class="org-ul">
<li>访问保护机制
<ul class="org-ul">
<li>私有: 对象的某些属性和方法只有该对象能访问它们
</li>
<li>保护: 该类和该类的子类可以访问
</li>
<li>公开: 所有对象都可以访问该对象的属性和方法
</li>
</ul>
</li>
<li>python没有在语言层面提供严格访问保护机制。技术上，所有属性和方法都是
公开的
</li>
<li>如果该方法仅内部使用，不希望别人访问，是在docstring中注明，这是一个
内部方法
</li>
<li>或按习惯做法，是给属性或方法名，加一个下划线前缀，_attribute，
足够醒目的标记这是一个私有属性
</li>
<li>更强烈的标记是前缀双下划线。这种方法称为/改名/(name mangling，改写名
称，或修饰名称)，访问双下划线属性是可能的，只不过写法上费点事
</li>
<li>如此费事，岂不正是提醒，此属性方法不应被使用的标记
</li>
<li>另外双下划线dunder，是许多special names的标志，强烈建议命名方法，不
要使用双下划线
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-2-2" class="outline-4">
<h4 id="sec-6-2-2"><span class="section-number-4">6.2.2</span> 继承</h4>
<div class="outline-text-4" id="text-6-2-2">
<ul class="org-ul">
<li>继承允许在两个乃至多个类之间建立种属、上位类-下位类、继承(is a)关系
</li>
<li>通用逻辑放到父类中，细节逻辑放到子类中
</li>
<li>原则上，python中每个类都使用了继承关系，所有类都继承自一个特殊类
object
</li>
<li>这个类几乎没有实用功能。但它提供了统一的视角，看待所有python类
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python">  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#32487;&#25215;&#35821;&#27861;</span>

  <span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">MySubClass</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">object</span><span style="color: #c5c8c6;">)</span>:
      <span style="color: #b5bd68;">pass</span>

  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20363;&#23376;&#65306; &#36890;&#35759;&#24405;&#65292;&#27604;&#22914;&#23458;&#25143;&#32463;&#29702;&#30041;&#23384;&#30340;&#23458;&#25143;&#36890;&#35759;&#24405;&#65292;&#20869;&#26377;&#22995;&#21517;&#21644;&#30005;&#37038;</span>

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Contact</span>:
    <span style="color: #8abeb7;">"""</span>
<span style="color: #8abeb7;">    &#36890;&#35759;&#24405;&#31867;&#65292;&#20197;list&#21253;&#21547;&#33509;&#24178;&#36890;&#35759;&#35760;&#24405;</span>
<span style="color: #8abeb7;">    """</span>
    <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#31867;&#21464;&#37327;</span>
    <span style="color: #f0c674;">all_contacts</span> = <span style="color: #c5c8c6;">[]</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">Class variable, because it is part of the</span>
                       <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">class definition, is shared by all instances</span>
                       <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">of this class.</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, name, email<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.name = name
        <span style="color: #b5bd68;">self</span>.email = email
        Contact.all_contacts.append<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Supplier</span><span style="color: #c5c8c6;">(</span>Contact<span style="color: #c5c8c6;">)</span>:
    <span style="color: #8abeb7;">"""&#36890;&#35759;&#24405;&#31867;&#30340;&#23376;&#31867;&#65292;&#20165;&#35760;&#24405;&#20379;&#24212;&#21830;&#30340;&#32852;&#31995;&#26041;&#24335;"""</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">order</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, order<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"If this were a real system we would send '{}' order to '{}'"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>order, <span style="color: #b5bd68;">self</span>.name<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">if</span> <span style="color: #b294bb;">__name__</span> == <span style="color: #8abeb7;">"__main__"</span>:
    <span style="color: #f0c674;">c</span> = Contact<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"some body"</span>, <span style="color: #8abeb7;">"sb@ex.net"</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #f0c674;">s</span> = Supplier<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"SP"</span>, <span style="color: #8abeb7;">"sp@ex.net"</span><span style="color: #c5c8c6;">)</span>

    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>c.name, c.email, s.name, s.email<span style="color: #c5c8c6;">)</span>
    c.all_contacts
    <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">c.order("I need pliers")  # AttributeError: 'Contact' object has no attribute 'order'</span>
    s.order<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"I need pliers"</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>Supplier可以做Contact能做的所有事情，及他自己的事情
</li>
<li>这就是继承的优势，子类继承父亲的属性和行为，同时增加自己特有的属性和
行为
</li>
<li>比如，s的初始化，调用的是Contact的初始方法。Supplier继承了Contact的
属性和方法
</li>
<li>继承原则
<ul class="org-ul">
<li>Distinguish Interface Inheritance from Implementation Inheritance
<ul class="org-ul">
<li><i>Inheritance of interface</i> creates a subtype, implying an "is-a"
relationship
</li>
<li><i>Inheritance of implementation</i> avoids code duplication by reuse
</li>
</ul>
</li>
<li>Make Interfaces explicit with ABCs
</li>
<li>Use Mixins for code Reuse
<ul class="org-ul">
<li>Conceptually, a mixin does not define a new type; it merely
bundles methods for reuse.  A mixin should never be
instantiated, and concrete classes should not inherit only from
a mixin.  Each mixin should provide a single specific behavior,
implementing few and very closely related methods.
</li>
</ul>
</li>
<li>Make Mixins Explicit by Naming
</li>
<li>An ABC may also be a mixin; the reverse is not true
</li>
<li>Dont't subclass from more than one concrete class
</li>
<li>Provide aggregate classes to users
<ul class="org-ul">
<li>If some combination of ABCs or mixins is particularly useful to
client code, provide a class that brings them together in a
sensible way
</li>
</ul>
</li>
<li>Favor object composition over class inheritance, don't overuse
inheritance.  Because subclassing is a form of tight coupling, and
tall inheritance trees tend to be brittle. 
</li>
</ul>
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-6-2-2-1" name="sec-6-2-2-1"></a>通过继承扩展内置数据类型<br  /><div class="outline-text-5" id="text-6-2-2-1">
<ul class="org-ul">
<li>python所有类都继承自一个特殊类object
</li>
<li>如果自定义类继承自其他数据类型，会怎样？比如上例，如果想在通讯列表中
搜索姓名，要怎么办？
</li>
<li>可以在Contact类中增加Search方法，但Search似乎应该是附于list的方法，而
不是附于Contact
</li>
<li>用继承可以解决这个问题
</li>
<li>pythonic方式是使用duck typing，定义Contact为iterable，本例为讲继承而
使用继承机制
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">ContactList</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #8abeb7;">"""</span>
<span style="color: #8abeb7;">    Contactlist&#26159;list&#23376;&#31867;&#65292;&#22240;&#27492;&#32487;&#25215;list&#30340;&#26041;&#27861;&#65292;&#24182;&#22686;&#21152;&#20102;list&#27809;&#26377;&#65292;&#32780;&#33258;&#24049;</span>
<span style="color: #8abeb7;">    &#29420;&#26377;&#30340;&#26041;&#27861;search()</span>
<span style="color: #8abeb7;">    """</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">search</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, name<span style="color: #c5c8c6;">)</span>:
        <span style="color: #8abeb7;">"""Return all contacts that contain the search value in their name."""</span>
        <span style="color: #f0c674;">matching_contacts</span> = <span style="color: #c5c8c6;">[]</span>
        <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">the syntax [] is called syntax sugar that calls the list() constructor.</span>
        <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">[] == list()</span>
        <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">isinstance([], object)</span>
        <span style="color: #b5bd68;">for</span> contact <span style="color: #b5bd68;">in</span> <span style="color: #b5bd68;">self</span>:
            <span style="color: #b5bd68;">if</span> name <span style="color: #b5bd68;">in</span> contact.name:
                matching_contacts.append<span style="color: #c5c8c6;">(</span>contact<span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">return</span> matching_contacts


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Contact</span>:
    <span style="color: #f0c674;">all_contacts</span> = ContactList<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#31867;&#21464;&#37327;&#65292;&#26159;&#19968;&#20010;&#25193;&#23637;&#30340;list</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, name, email<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.name = name
        <span style="color: #b5bd68;">self</span>.email = email
        Contact.all_contacts.append<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Supplier</span><span style="color: #c5c8c6;">(</span>Contact<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">order</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, order<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"If this were a real system we would send '{}' order to '{}'"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>order, <span style="color: #b5bd68;">self</span>.name<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>


<span style="color: #f0c674;">c1</span> = Contact<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"John A"</span>, <span style="color: #8abeb7;">"johna@ex.net"</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">c2</span> = Contact<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"John B"</span>, <span style="color: #8abeb7;">"johnb@ex.net"</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">c3</span> = Contact<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Jenna C"</span>, <span style="color: #8abeb7;">"jennac@ex.net"</span><span style="color: #c5c8c6;">)</span>

<span style="color: #c5c8c6;">[</span>c.name <span style="color: #b5bd68;">for</span> c <span style="color: #b5bd68;">in</span> Contact.all_contacts.search<span style="color: #8abeb7;">(</span><span style="color: #8abeb7;">"John"</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">]</span>
</pre>
</div>

<ul class="org-ul">
<li>可以扩展python的各种内置数据类型，为自己项目所用，比如：字典
</li>
<li>标准的python用法，不直接继承built-in type
</li>
<li>collections模块提供了Userdict, UserList, UserString。想继承内置类型性质，继承这几个
</li>
<li>fluent python中讲了继承内置类型可能引发的问题
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20165;&#31034;&#20363;&#65292;&#19981;&#25512;&#33616;&#36825;&#31181;&#29992;&#27861;</span>
<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">LongNameDict</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">dict</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #8abeb7;">"""&#32487;&#25215;&#23383;&#20856;&#65292;&#26082;&#21253;&#25324;&#23383;&#20856;&#23646;&#24615;&#21644;&#26041;&#27861;&#65292;&#21448;&#22686;&#21152;&#29420;&#26377;&#26041;&#27861;longest_key()"""</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">longest_key</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #f0c674;">longest</span> = <span style="color: #81a2be;">None</span>
        <span style="color: #b5bd68;">for</span> key <span style="color: #b5bd68;">in</span> <span style="color: #b5bd68;">self</span>:
            <span style="color: #b5bd68;">if</span> <span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">not</span> longest<span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">or</span> <span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">len</span><span style="color: #8abeb7;">(</span>key<span style="color: #8abeb7;">)</span> &gt; <span style="color: #b294bb;">len</span><span style="color: #8abeb7;">(</span>longest<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>:
                <span style="color: #f0c674;">longest</span> = key
        <span style="color: #b5bd68;">return</span> longest

<span style="color: #f0c674;">longkeys</span> = LongNameDict<span style="color: #c5c8c6;">()</span>
<span style="color: #f0c674;">longkeys</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'hello'</span><span style="color: #c5c8c6;">]</span> = 1
<span style="color: #f0c674;">longkeys</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'longest yet'</span><span style="color: #c5c8c6;">]</span> = 5
<span style="color: #f0c674;">longkeys</span><span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">'hello2'</span><span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">'world'</span>

longkeys.longest_key<span style="color: #c5c8c6;">()</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-6-2-2-2" name="sec-6-2-2-2"></a>覆盖和父类初始化函数<br  /><div class="outline-text-5" id="text-6-2-2-2">
<ul class="org-ul">
<li>覆盖是继承机制中很重要的一项技术，对于构造函数尤其重要
</li>
<li>看例子，子类通过覆盖，继承了父类方法名字，但改变了父类的行为
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">A</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">hello</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Hello, I'm A"</span><span style="color: #c5c8c6;">)</span>


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">B</span><span style="color: #c5c8c6;">(</span>A<span style="color: #c5c8c6;">)</span>:
    <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">pass</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">hello</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">override superclass's hello()</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Hello, I'm B"</span><span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">a</span> = A<span style="color: #c5c8c6;">()</span>
<span style="color: #f0c674;">b</span> = B<span style="color: #c5c8c6;">()</span>
a.hello<span style="color: #c5c8c6;">()</span>
b.hello<span style="color: #c5c8c6;">()</span>
</pre>
</div>

<ul class="org-ul">
<li>再看一例，覆盖父类构造函数
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Bird</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.hungry = <span style="color: #81a2be;">True</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">eat</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">if</span> <span style="color: #b5bd68;">self</span>.hungry:
            <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Aaaah...'</span><span style="color: #c5c8c6;">)</span>
            <span style="color: #b5bd68;">self</span>.hungry = <span style="color: #81a2be;">False</span>
        <span style="color: #b5bd68;">else</span>:
            <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'No thanks!'</span><span style="color: #c5c8c6;">)</span>


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">SongBird</span><span style="color: #c5c8c6;">(</span>Bird<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">slot for super init</span>
        <span style="color: #b5bd68;">self</span>.sound = <span style="color: #8abeb7;">'Squawk!'</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">sing</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>.sound<span style="color: #c5c8c6;">)</span>


<span style="color: #f0c674;">b</span> = Bird<span style="color: #c5c8c6;">()</span>
b.eat<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#27809;&#21507;&#65292;&#39295;</span>
b.eat<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21507;&#20102;&#65292;&#19981;&#39295;&#20102;</span>

<span style="color: #f0c674;">s</span> = SongBird<span style="color: #c5c8c6;">()</span>
s.sing<span style="color: #c5c8c6;">()</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">s.eat()  # AttributeError,&#22240;&#20026;&#26500;&#36896;&#20989;&#25968;&#34987;&#35206;&#30422;&#65292;&#27809;&#26377;&#20102;hungry&#23646;&#24615;&#65292;&#20986;&#38169;</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">super().__init__() #  &#21152;&#36825;&#21477;&#23601;&#19981;&#25253;&#38169;. do its job as if "by magic".</span>
</pre>
</div>

<ul class="org-ul">
<li>继承可以让子类在父类基础上增加行为，可否继承并改变父类的行为呢？
</li>
<li>比如Contact，如果想给特殊的联系人，如朋友，增加电话号码怎么办？
</li>
<li>创建一个继承Contact的子类Friend，使其包含phone属性，是一个办法
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Friend</span><span style="color: #c5c8c6;">(</span>Contact<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, name, email, phone<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.name = name
        <span style="color: #b5bd68;">self</span>.email = email
        <span style="color: #b5bd68;">self</span>.phone = phone
</pre>
</div>

<ul class="org-ul">
<li>这里，子类Friend的init()方法，覆盖(overriding)了父类Contact
的init()方法
</li>
<li>覆盖意味着，用一个名字相同，内容不同的新方法调整或替换父类中的方法。
Friend继承了Contact的属性和方法，但使用覆盖技术调整了init()方法。
</li>
<li>还有一个问题，Contact和Friend重复了某些代码，比如email要改为Email或
e<sub>mail</sub>,那么维护程序，需要修改两处代码
</li>
<li>另一个更严重的问题是，Friend的init()方法没有把Friend对象加到联系人列
表all<sub>contacts，逻辑上说不通。</sub>
</li>
<li>正确的做法，或说正确的子类初始化函数应该先调用父类的初始化函数，再做
子类的初始化工作，比如增加属性
</li>
<li>super()指该类的直接父类。super()适用于python3。以前的版本，语法略有
不同。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Friend</span><span style="color: #c5c8c6;">(</span>Contact<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, name, email, phone<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b294bb;">super</span><span style="color: #c5c8c6;">()</span>.__init__<span style="color: #c5c8c6;">(</span>name, email<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#35843;&#29992;&#29238;&#31867;&#21021;&#22987;&#21270;&#20989;&#25968;</span>
        <span style="color: #b5bd68;">self</span>.phone = phone
</pre>
</div>
</div>
</li>

<li><a id="sec-6-2-2-3" name="sec-6-2-2-3"></a>多重继承<br  /><div class="outline-text-5" id="text-6-2-2-3">
<ul class="org-ul">
<li>单重继承指一个子类只有一个直接父类，多重继承指一个子类有多个直接父类
</li>
<li>Java是典型的单重继承，C++、Python是典型的多重继承
</li>
</ul>
</div>

<ol class="org-ol"><li><a id="sec-6-2-2-3-1" name="sec-6-2-2-3-1"></a>混入类<br  /><div class="outline-text-6" id="text-6-2-2-3-1">
<ul class="org-ul">
<li>最简单和最使用的多重继承形式，是所谓混入 (mixin) 类
<ul class="org-ul">
<li>混入类，是一个承担父类功能的类，它一般不独立使用，而是指望它被其他
类继承，由此，该父类的功能被扩展到其他类
</li>
</ul>
</li>
<li>假如，我们想让Contact类有发送电子邮件的功能。
<ul class="org-ul">
<li>此外，还应考虑到，不只Contact，其他类也可能需要发送电子邮件的功能
</li>
<li>那么就创建一个能发送电子邮件的混入类
</li>
<li>其他类，谁想包含发电邮功能，继承此类即可
</li>
</ul>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">MailSender</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">send_mail</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, message<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Sending mail to "</span> + <span style="color: #b5bd68;">self</span>.email<span style="color: #c5c8c6;">)</span>
        <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Add email logic here</span>


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">EmailableContact</span><span style="color: #c5c8c6;">(</span>Contact, MailSender<span style="color: #c5c8c6;">)</span>:  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#32487;&#25215;&#22810;&#20010;&#29238;&#31867;</span>
    <span style="color: #b5bd68;">pass</span>

<span style="color: #f0c674;">e</span> = EmailableContact<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"John Smith"</span>, <span style="color: #8abeb7;">"jsmith@ex.net"</span><span style="color: #c5c8c6;">)</span>
Contact.all_contacts
e.send_mail<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Hello, test email here."</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-6-2-2-3-2" name="sec-6-2-2-3-2"></a>菱形难题<br  /><div class="outline-text-6" id="text-6-2-2-3-2">
<ul class="org-ul">
<li>当使用多重、多层继承时，多重继承会越来越麻烦。会遇到所谓菱形难题
(diamond problem)。
</li>
<li>比如，要给Friend增加地址属性。地址是一个字符串，包含街、市、省、国等
信息
<ul class="org-ul">
<li>可以把这些信息视为多个字符串参数，送入Friend初始化函数
</li>
<li>也可以把它们组成元组和字典，作为一个参数发给初始化函数
</li>
<li>更可以单独建立一个Address类，这些字符串都是类的属性，把Address的实例
</li>
</ul>
<p>
作为一个参数发给Friend初始化函数
</p>
<ul class="org-ul">
<li>建独立类的优势，是可以增加方法，比如给出导航路线等
</li>
<li>最后一种方式称为组合 (composition,),是一种属于(has a)关系
</li>
<li>另一个优势，是其他需要地址的类，比如建筑物类、企业类、组织类可以
重用地址类
</li>
</ul>
</li>
<li>为了研究继承，我们使用继承来实现地址，创建一个AddressHolder类
</li>
<li>A Friend can have an Addres. Also, a Friend is an AddressHolder.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">AddressHolder</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__int__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, street, city, state, code<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.street = street
        <span style="color: #b5bd68;">self</span>.city = city
        <span style="color: #b5bd68;">self</span>.state = state
        <span style="color: #b5bd68;">self</span>.code = code
</pre>
</div>

<ul class="org-ul">
<li>菱形难题怎么发生的呢？
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Friend</span><span style="color: #c5c8c6;">(</span>Contact, AddressHolder<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>,
                name,
                email,
                phone,
                street,
                city,
                state,
                code<span style="color: #c5c8c6;">)</span>:
        Contact.__init__<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, name, email<span style="color: #c5c8c6;">)</span>
        AddressHolder.__init__<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, street, city, state,code<span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.phone = phone
</pre>
</div>

<ul class="org-ul">
<li>注意，有两个父类的init（）方法。当这两个类都继承自object就出问题了。
基类仅应被调用一次，那么，调用顺序是
Friend~Contact~Object~AddressHolder,还是
Friend~Contact~AddressHolder~Object？
</li>
</ul>
</div>
</li>

<li><a id="sec-6-2-2-3-3" name="sec-6-2-2-3-3"></a>理解MRO<br  /><div class="outline-text-6" id="text-6-2-2-3-3">
<ul class="org-ul">
<li>技术上，调用顺序称为方法消解顺序(mro, method resolution order)
</li>
<li>例1:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">A</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">ping</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'ping:'</span>, <span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">B</span><span style="color: #c5c8c6;">(</span>A<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">pong</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'B-pong'</span>,<span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">C</span><span style="color: #c5c8c6;">(</span>A<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">pong</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'C-PONG:'</span>,<span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">D</span><span style="color: #c5c8c6;">(</span>B, C<span style="color: #c5c8c6;">)</span>:
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">class D(C, B):</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">ping</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b294bb;">super</span><span style="color: #c5c8c6;">()</span>.ping<span style="color: #c5c8c6;">()</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'post-ping'</span>,<span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">pingpong</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.ping<span style="color: #c5c8c6;">()</span>
        <span style="color: #b294bb;">super</span>.ping<span style="color: #c5c8c6;">()</span>
        <span style="color: #b5bd68;">self</span>.pong<span style="color: #c5c8c6;">()</span>
        <span style="color: #b294bb;">super</span>.pong<span style="color: #c5c8c6;">()</span>
        C.pong<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">d</span> = D<span style="color: #c5c8c6;">()</span>
d.pong<span style="color: #c5c8c6;">()</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">version B</span>
C.pong<span style="color: #c5c8c6;">(</span>d<span style="color: #c5c8c6;">)</span>
D.__mro__

d.pingpong<span style="color: #c5c8c6;">()</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">print_mro</span><span style="color: #c5c8c6;">(</span>cls<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">', '</span>.join<span style="color: #8abeb7;">(</span>c.<span style="color: #b294bb;">__name__</span> <span style="color: #b5bd68;">for</span> c <span style="color: #b5bd68;">in</span> cls.__mro__<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

print_mro<span style="color: #c5c8c6;">(</span>D<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<p>
-　例2:
</p>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">This example simply ensures that each overridden call_me method directly calls</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">the parent method with the same name.</span>

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">BaseClass</span>:
    <span style="color: #f0c674;">num_base_calls</span> = 0
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">call_me</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Calling method on Base class"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.num_base_calls += 1

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">LeftSubclass</span><span style="color: #c5c8c6;">(</span>BaseClass<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">num_left_calls</span> = 0
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">call_me</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        BaseClass.call_me<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Calling method on Left Subclass"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.num_left_calls += 1

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">RightSubclass</span><span style="color: #c5c8c6;">(</span>BaseClass<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">num_right_calls</span> = 0
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">call_me</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        BaseClass.call_me<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Calling method on Right Subclass"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.num_right_calls += 1

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Subclass</span><span style="color: #c5c8c6;">(</span>LeftSubclass, RightSubclass<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">num_sub_calls</span> = 0
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">call_me</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        LeftSubclass.call_me<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>
        RightSubclass.call_me<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Calling method on Subclass"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.num_sub_calls += 1


<span style="color: #f0c674;">s</span> = Subclass<span style="color: #c5c8c6;">()</span>
s.call_me<span style="color: #c5c8c6;">()</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>s.num_sub_calls, s.num_left_calls, s.num_right_calls, s.num_base_calls<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>Subclass.__mro__<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>通过输出结果看到，基类被调用了两次。这能引致错误，比如同一个银行账户，取或存两次
</li>
</ul>
</div>
</li>

<li><a id="sec-6-2-2-3-4" name="sec-6-2-2-3-4"></a>菱形难题解决问题方法之一是使用super<br  /><div class="outline-text-6" id="text-6-2-2-3-4">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">Use super() rather than native direct calls in __init__</span>

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">BaseClass</span>:
    <span style="color: #f0c674;">num_base_calls</span> = 0
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">call_me</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Calling method on Base class"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.num_base_calls += 1

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">LeftSubclass</span><span style="color: #c5c8c6;">(</span>BaseClass<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">num_left_calls</span> = 0
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">call_me</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">BaseClass.call_me(self)</span>
        <span style="color: #b294bb;">super</span><span style="color: #c5c8c6;">()</span>.call_me<span style="color: #c5c8c6;">()</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Calling method on Left Subclass"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.num_left_calls += 1

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">RightSubclass</span><span style="color: #c5c8c6;">(</span>BaseClass<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">num_right_calls</span> = 0
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">call_me</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">BaseClass.call_me(self)</span>
        <span style="color: #b294bb;">super</span><span style="color: #c5c8c6;">()</span>.call_me<span style="color: #c5c8c6;">()</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Calling method on Right Subclass"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.num_right_calls += 1

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Subclass</span><span style="color: #c5c8c6;">(</span>LeftSubclass, RightSubclass<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">num_sub_calls</span> = 0
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">call_me</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">LeftSubclass.call_me(self)</span>
        <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">RightSubclass.call_me(self)</span>
        <span style="color: #b294bb;">super</span><span style="color: #c5c8c6;">()</span>.call_me<span style="color: #c5c8c6;">()</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Calling method on Subclass"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.num_sub_calls += 1


<span style="color: #f0c674;">s</span> = Subclass<span style="color: #c5c8c6;">()</span>
s.call_me<span style="color: #c5c8c6;">()</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>s.num_sub_calls, s.num_left_calls, s.num_right_calls, s.num_base_calls<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>Subclass的 super().call-me()调用LeftSubclass.call-me()，进而调用其
super().call-me()
</li>
<li>但在这里super()没有指向LeftSubclass的基类BaseClass，而是指向
RightSubclass, 尽管它不是LeftSubclass的父类。RightSubclass再调用
BaseClass的call-me()
</li>
<li>因此，多重继承super()找的并不是“父辈”方法，而是“后继(next)”方法
</li>
<li>这个顺序是内置的mro机制决定的
</li>
<li>结论：减少，乃至避免使用多重继承，除非有必要。调用父类方法时，不用直
接调用语句，使用super()
</li>
<li>实践上，duck typing的使用极大的减少了多重继承，乃至继承的使用必要
</li>
</ul>

<pre class="example">
As a rule of thumb, If you think you need multiple inheritance, you're
probably wront, but if you know you need it, you're probably right.
</pre>
</div>
</li></ol>
</li>

<li><a id="sec-6-2-2-4" name="sec-6-2-2-4"></a>参数分组<br  /><div class="outline-text-5" id="text-6-2-2-4">
<ul class="org-ul">
<li>参数分组，会让多重继承问题进一步复杂
</li>
<li>回到Friend多重继承例子。其init()方法里，参数被分组，分别传给了它的两
个父类
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Friend</span><span style="color: #c5c8c6;">(</span>Contact, AddressHolder<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>,
                name,
                email,
                phone,
                street,
                city,
                state,
                code<span style="color: #c5c8c6;">)</span>:
        Contact.__init__<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, name, email<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">1&#32452;&#21442;&#25968;</span>
        AddressHolder.__init__<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, street, city, state,code<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">2&#32452;&#21442;&#25968;</span>
        <span style="color: #b5bd68;">self</span>.phone = phone
</pre>
</div>

<ul class="org-ul">
<li>按上节原则，调用父类方法时，不直接调用，使用super(),那如何将参数分为
不同组，传给super（）呢？
</li>
<li>比如，super()先将name, email传给Contact.&#x2013;ini&#x2013;,然后
Contact.&#x2013;init&#x2013;调用super,这就需要把地址信息传给“后继”方法，即
AddressHolder.&#x2013;init&#x2013;
</li>
<li>当调用同名、不同参数的父类方法时，就会出现这个问题。最常使用处就
是&#x2013;init&#x2013;方法
</li>
<li>没法子，唯一解决办法，就是预先计划
</li>
<li>设计基类参数列表时，基类用，而不一定每个子类都用的参数，定义为关键字
参数。同时，定义该方法可以接受可变参数，并将这些参数传给它的super()
方法
</li>
<li>看下面较正规的多重继承代码
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Contact</span>:
    <span style="color: #f0c674;">all_contacts</span> = <span style="color: #c5c8c6;">[]</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, name=<span style="color: #8abeb7;">''</span>, email=<span style="color: #8abeb7;">''</span>, **kwargs<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b294bb;">super</span><span style="color: #c5c8c6;">()</span>.__init__<span style="color: #c5c8c6;">(</span>**kwargs<span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.name = name
        <span style="color: #b5bd68;">self</span>.email = email
        <span style="color: #b5bd68;">self</span>.all_contacts.append<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">AddressHolder</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, street=<span style="color: #8abeb7;">''</span>, city=<span style="color: #8abeb7;">''</span>, state=<span style="color: #8abeb7;">''</span>,code=<span style="color: #8abeb7;">''</span>, **kwargs<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b294bb;">super</span><span style="color: #c5c8c6;">()</span>.__int__<span style="color: #c5c8c6;">(</span>**kwargs<span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.street = street
        <span style="color: #b5bd68;">self</span>.city = city
        <span style="color: #b5bd68;">self</span>.state = state
        <span style="color: #b5bd68;">self</span>.code = code


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Friend</span><span style="color: #c5c8c6;">(</span>Contact, AddressHolder<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, phone=<span style="color: #8abeb7;">''</span>, **kwargs<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b294bb;">super</span><span style="color: #c5c8c6;">()</span>.__init__<span style="color: #c5c8c6;">(</span>**kwargs<span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.phone = phone
</pre>
</div>

<ul class="org-ul">
<li>不期望一下子掌握多重继承的使用，但应理解其代码和涵义，在阅读和编程实
践中逐步提高
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-6-2-3" class="outline-4">
<h4 id="sec-6-2-3"><span class="section-number-4">6.2.3</span> 多态</h4>
<div class="outline-text-4" id="text-6-2-3">
<ul class="org-ul">
<li>多态(polymorphism)概念指，当不知道调用方法的子类是哪个时，系统会自
动根据子类所属类别，执行相应的方法，产生不同的行为
</li>
<li>假设用程序播放音频
<ul class="org-ul">
<li>一个播放器对象(media player object)创建AudioFile对象，执行play方法
</li>
<li>play()方法负责解码音频文件，并播放
</li>
<li>其行为可简单描述为audio-file.play()
</li>
<li>但解码音频文件，需要根据不同的文件使用不同的算法，wav,mp3,wma,ogg
显然不能用同一种算法解码
</li>
</ul>
</li>
<li>难道要为每种文件定义一个play()方法嘛，那得定义多少个方法，定义多少个
方法够用呢？ 随着技术发展，出现新的音频文件格式怎么办？
</li>
<li>使用继承和多态可以简化设计
<ul class="org-ul">
<li>每种格式用AudioFile的一个子类表示，如WavFile, MP3File
</li>
<li>每个子类都有自己的play()方法
</li>
<li>但该方法根据不同子类实现不同的解码算法和播放功能。而播放器对象永远
不必知道AudioFile指的是哪个子类，播放器只需调用play()方法，让对象
的多态机制处理具体的解码播放即可
</li>
</ul>
</li>
<li>示例如下，该例涵盖继承、覆盖、多态技术
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">AudioFile</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, filename<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">if</span> <span style="color: #b5bd68;">not</span> filename.endswith<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>.ext<span style="color: #c5c8c6;">)</span>:
            <span style="color: #b5bd68;">raise</span> <span style="color: #81a2be;">Exception</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Invalid file format"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.filename = filename

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">play</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Now an audio file is going to play..."</span><span style="color: #c5c8c6;">)</span>


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">MP3File</span><span style="color: #c5c8c6;">(</span>AudioFile<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">ext</span> = <span style="color: #8abeb7;">"mp3"</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">play</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b294bb;">super</span><span style="color: #c5c8c6;">()</span>.play<span style="color: #c5c8c6;">()</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"playing {} as mp3"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span><span style="color: #b5bd68;">self</span>.filename<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">WavFile</span><span style="color: #c5c8c6;">(</span>AudioFile<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">ext</span> = <span style="color: #8abeb7;">"wav"</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">play</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"playing {} as mp3"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span><span style="color: #b5bd68;">self</span>.filename<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">OggFile</span><span style="color: #c5c8c6;">(</span>AudioFile<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">ext</span> = <span style="color: #8abeb7;">"ogg"</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">play</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"playing {} as ogg"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span><span style="color: #b5bd68;">self</span>.filename<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>


<span style="color: #f0c674;">ogg</span> = OggFile<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"myfile.ogg"</span><span style="color: #c5c8c6;">)</span>
ogg.play<span style="color: #c5c8c6;">()</span>

<span style="color: #f0c674;">mp3</span> = MP3File<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"myfile.mp3"</span><span style="color: #c5c8c6;">)</span>
mp3.play<span style="color: #c5c8c6;">()</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">not_an_mp3 = MP3File("myfile.ogg")</span>

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">FlacFile</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>,filename<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">if</span> <span style="color: #b5bd68;">not</span> filename.endswith<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">".flac"</span><span style="color: #c5c8c6;">)</span>:
            <span style="color: #b5bd68;">raise</span> Exceptioin<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Invalid file format"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.filename = filename

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">play</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">It could not insert a super() method.</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"playing {} as flac"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span><span style="color: #b5bd68;">self</span>.filename<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>


<span style="color: #f0c674;">flac</span> = FlacFile<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"myfile.flac"</span><span style="color: #c5c8c6;">)</span>
flac.play<span style="color: #c5c8c6;">()</span>
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="sec-6-2-3-1" name="sec-6-2-3-1"></a>duck typing<br  /><div class="outline-text-5" id="text-6-2-3-1">
<ul class="org-ul">
<li><a href="http://en.wikipedia.org/wiki/Duck_typing">duck typing</a>是python处理多态的方式，是一种不严格的多态。dt允许非子类
的对象也可以调用多态方法。
</li>
<li><a href="http://www.voidspace.org.uk/python/articles/duck_typing.shtlm">duck typing的解释</a>
</li>
</ul>

<pre class="example">
Don't check whether it is-a duck: check whether it quacks-like-a duck, walks-like-a 
duck, etc, etc, depending on exactly what subset of duck-like behavior you need to play
you language-games with.(comp.lang.python, Jul. 26, 2000)

     --Alex Martelli

If it looks like a duck and quacks like a duck, it must be a duck.

Duck typing in Python allows us to use /any/ object that provides the
required behavior without forcing it to be a subclass。
</pre>

<ul class="org-ul">
<li>用“鲸鱼”、“鳄鱼”解释duck typing，fishable-like whale.
</li>
<li>由于海棠花栽培历史悠久，深受人们喜爱，后来人们发现了与它花形相似的植
物，往往就以海棠来命名，如秋海棠、四季海棠，丽格海棠等等。明代《群芳
谱》所记载的“海棠四品”:
<ul class="org-ul">
<li>西府海棠，蔷薇科苹果属
</li>
<li>垂丝海棠，蔷薇科苹果属
</li>
<li>贴梗海棠，蔷薇科木瓜属
</li>
<li>木瓜海棠，蔷薇科木瓜属
</li>
</ul>
</li>
<li>在oop中广泛使用继承是因为有多态存在
</li>
<li>在python中，由于duck typing存在，降低了使用多态的必要程度，同时也降
低了多重继承的必要程度
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> collections

<span style="color: #f0c674;">Card</span> = collections.namedtuple<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Card'</span>, <span style="color: #8abeb7;">[</span><span style="color: #8abeb7;">'rank'</span>, <span style="color: #8abeb7;">'suit'</span><span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">FrenchDeck</span>:
    <span style="color: #f0c674;">ranks</span> = <span style="color: #c5c8c6;">[</span><span style="color: #b294bb;">str</span><span style="color: #8abeb7;">(</span>n<span style="color: #8abeb7;">)</span> <span style="color: #b5bd68;">for</span> n <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>2, 11<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">]</span> + <span style="color: #b294bb;">list</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'JQKA'</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #f0c674;">suits</span> = <span style="color: #8abeb7;">'spades diamonds clubs hearts'</span>.split<span style="color: #c5c8c6;">()</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>._cards = <span style="color: #c5c8c6;">[</span>Card<span style="color: #8abeb7;">(</span>rank, suit<span style="color: #8abeb7;">)</span> <span style="color: #b5bd68;">for</span> suit <span style="color: #b5bd68;">in</span> <span style="color: #b5bd68;">self</span>.suits
                                        <span style="color: #b5bd68;">for</span> rank <span style="color: #b5bd68;">in</span> <span style="color: #b5bd68;">self</span>.ranks<span style="color: #c5c8c6;">]</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__len__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">return</span> <span style="color: #b294bb;">len</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>._cards<span style="color: #c5c8c6;">)</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__getitem__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, position<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">self</span>._cards<span style="color: #c5c8c6;">[</span>position<span style="color: #c5c8c6;">]</span>

<span style="color: #f0c674;">beer_card</span> = Card<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'7'</span>, <span style="color: #8abeb7;">'diamonds'</span><span style="color: #c5c8c6;">)</span>
beer_card

<span style="color: #f0c674;">deck</span> = FrenchDeck<span style="color: #c5c8c6;">()</span>
<span style="color: #b294bb;">len</span><span style="color: #c5c8c6;">(</span>deck<span style="color: #c5c8c6;">)</span>

deck<span style="color: #c5c8c6;">[</span>0<span style="color: #c5c8c6;">]</span>
deck<span style="color: #c5c8c6;">[</span>-1<span style="color: #c5c8c6;">]</span>

<span style="color: #b5bd68;">from</span> random <span style="color: #b5bd68;">import</span> choice 
choice<span style="color: #c5c8c6;">(</span>deck<span style="color: #c5c8c6;">)</span>

deck<span style="color: #c5c8c6;">[</span>:3<span style="color: #c5c8c6;">]</span>
deck<span style="color: #c5c8c6;">[</span>12::13<span style="color: #c5c8c6;">]</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">for card in deck:  #  doctest: +ELLIPSIS</span>
<span style="color: #969896; font-style: italic;">#     </span><span style="color: #969896; font-style: italic;">print(card)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">for card in reversed(deck):</span>
<span style="color: #969896; font-style: italic;">#     </span><span style="color: #969896; font-style: italic;">print(card)</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-6-2-3-2" name="sec-6-2-3-2"></a>虚基类<br  /><div class="outline-text-5" id="text-6-2-3-2">
<ul class="org-ul">
<li>与dock typing常伴生的一项技术是虚基类 (ABCs, Abstract Base Classes)。
不展开，留自学
</li>
<li>大部分虚基类都放在python标准库的collections.abc模块中
</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html?highlight=collections%20abc#module-collections.abc">https://docs.python.org/3/library/collections.abc.html?highlight=collections%20abc#module-collections.abc</a>
</li>
<li>例:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">from</span> collections <span style="color: #b5bd68;">import</span> Container
Container.__abstractmethods__
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">frozenset({'__contains__'})</span>
<span style="color: #b294bb;">help</span><span style="color: #c5c8c6;">(</span>Container.__contains__<span style="color: #c5c8c6;">)</span> 

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#20351;&#29992;&#34394;&#22522;&#31867;</span>
<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">OddContainer</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__contains__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, x<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">if</span> <span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">not</span> <span style="color: #b294bb;">isinstance</span><span style="color: #8abeb7;">(</span>x, <span style="color: #b294bb;">int</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">or</span> <span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">not</span> x%2<span style="color: #c5c8c6;">)</span>:
            <span style="color: #b5bd68;">return</span> <span style="color: #81a2be;">False</span>
        <span style="color: #b5bd68;">return</span> <span style="color: #81a2be;">True</span>

<span style="color: #f0c674;">oc</span> = OddContainer<span style="color: #c5c8c6;">()</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#31867;&#22411;&#21028;&#26029;</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#26576;&#20010;&#33258;&#23450;&#20041;&#31867;&#65292;duck typing&#20102;&#26576;&#20010;&#34394;&#22522;&#31867;&#30340;protocol&#65292;&#23601;&#21487;&#20197;&#26029;&#23450;&#23427;&#26159;&#35813;&#34394;&#22522;&#31867;&#30340;&#23454;&#20363;&#25110;&#23376;&#31867;&#12290;</span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#21247;&#39035;&#32487;&#25215;&#33258;&#35813;&#34394;&#22522;&#31867;</span>
<span style="color: #b294bb;">isinstance</span><span style="color: #c5c8c6;">(</span>oc, Container<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">issubclass</span><span style="color: #c5c8c6;">(</span>OddContainer, Container<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>这正是duck typing比传统多态惊人之处，不通过继承（或多重继承），dt创
建了一种is a关系。
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-6-2-4" class="outline-4">
<h4 id="sec-6-2-4"><span class="section-number-4">6.2.4</span> python类的特别性质</h4>
<div class="outline-text-4" id="text-6-2-4">
</div><ol class="org-ol"><li><a id="sec-6-2-4-1" name="sec-6-2-4-1"></a>property<br  /><div class="outline-text-5" id="text-6-2-4-1">
<ul class="org-ul">
<li>一般oo语言，如java，把修改属性的方法称为getter和setter方法，统称为
accessor，而且要求每个属性配备一对方法，保证访问控制
</li>
<li>容易引致大量getter,setter除了读写，什么也没做，所谓copy-paste
programming。
</li>
<li>例:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Rectangle</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.width = 0
        <span style="color: #b5bd68;">self</span>.height = 0
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">setSize</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, size=<span style="color: #8abeb7;">(</span>0,0<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.width, <span style="color: #b5bd68;">self</span>.height = size
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">getSize</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">self</span>.width, <span style="color: #b5bd68;">self</span>.height
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26087;&#35821;&#27861;&#65306;</span>
<span style="color: #969896; font-style: italic;">#    </span><span style="color: #969896; font-style: italic;">size = property(getSize, setSize)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">use setter and getter</span>
<span style="color: #f0c674;">r</span> = Rectangle<span style="color: #c5c8c6;">()</span>
<span style="color: #f0c674;">r.width</span> = 10
<span style="color: #f0c674;">r.height</span> = 5
r.getSize<span style="color: #c5c8c6;">()</span>
r.setSize<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">(</span>150, 100<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
r.width

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">use property</span>
<span style="color: #f0c674;">r</span> = Rectangle<span style="color: #c5c8c6;">()</span>
<span style="color: #f0c674;">r.width</span> = 10
<span style="color: #f0c674;">r.height</span> = 5
r.size
<span style="color: #f0c674;">r.size</span> = 150, 100
r.width
</pre>
</div>

<ul class="org-ul">
<li>python特性之一，就是没有真正的私有属性。语言机制不保证，仅通过惯例防
止访问私有属性和方法
</li>
<li>python解决accessor的方式，是提供一个关键字property，使得方法看上去和
属性一样。这样通过property读写属性，完成属性访问
</li>
<li>例子中size依然使用的是getSize, setSize读写属性。但从用户角度看，size
就像一个属性一样，访问细节被程序员隐藏起来了
</li>
<li>程序员把麻烦留给自己，把方便让给用户
</li>
<li>例:
</li>
</ul>
<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">class Color:</span>
<span style="color: #969896; font-style: italic;">#     </span><span style="color: #969896; font-style: italic;">def __init__(self, rgb, name):</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">self._rgb = rgb</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">self._name = name</span>

<span style="color: #969896; font-style: italic;">#     </span><span style="color: #969896; font-style: italic;">def set_name(self,name):</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">self._name = name</span>

<span style="color: #969896; font-style: italic;">#     </span><span style="color: #969896; font-style: italic;">def get_name(self):</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">return self._name</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">c = Color("#ff0000", "bright red")</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">print(c.get_name())</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">c.set_name("red")</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">c.get_name()</span>

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Color</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, rgb, name<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.rgb = rgb
        <span style="color: #b5bd68;">self</span>._name = name

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">_set_name</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, name<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">if</span> <span style="color: #b5bd68;">not</span> name:
            <span style="color: #b5bd68;">raise</span> <span style="color: #81a2be;">Exception</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Invalid Name"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>._name = name

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">_get_name</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">self</span>._name

    <span style="color: #f0c674;">name</span> = <span style="color: #b294bb;">property</span><span style="color: #c5c8c6;">(</span>_get_name, _set_name<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">c</span> = Color<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"#ff0000"</span>, <span style="color: #8abeb7;">"bright red"</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>c.name<span style="color: #c5c8c6;">)</span>    <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">getter method is like attribute</span>
<span style="color: #f0c674;">c.name</span> = <span style="color: #8abeb7;">"red"</span>   <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">setter method is like attribute</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>c.name<span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">c.name</span> = <span style="color: #8abeb7;">""</span>
</pre>
</div>
</div>

<ol class="org-ol"><li><a id="sec-6-2-4-1-1" name="sec-6-2-4-1-1"></a>细究property<br  /><div class="outline-text-6" id="text-6-2-4-1-1">
<ul class="org-ul">
<li>property()是一个内置函数，返回一个property对象。其函数签名为：
<ul class="org-ul">
<li>property(fget=None, fset=None, fdel=None, doc=None)
</li>
<li>fdel 用于记录值被删除时情况
</li>
<li>docstring 是一个说明，解释该property
</li>
</ul>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Silly</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">_get_silly</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Your are getting silly"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">self</span>._silly

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">_set_silly</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, value<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"You are making silly {}"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>value<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>._silly = value

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">_del_silly</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Whoah, you killed silly!"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">del</span> <span style="color: #b5bd68;">self</span>._silly

    <span style="color: #f0c674;">silly</span> = <span style="color: #b294bb;">property</span><span style="color: #c5c8c6;">(</span>_get_silly, _set_silly, _del_silly, <span style="color: #8abeb7;">"This is a silly property"</span><span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">s</span> = Silly<span style="color: #c5c8c6;">()</span>
<span style="color: #f0c674;">s.silly</span> = <span style="color: #8abeb7;">"funny"</span>
s.silly

<span style="color: #b294bb;">help</span><span style="color: #c5c8c6;">(</span>s<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">del</span> s.silly
</pre>
</div>

<ul class="org-ul">
<li>将property()想象成一位代表(proxy)，代表某个属性，由它来解决读、写属
性
</li>
<li>当然，读写方法需有程序员完成，property对象通过这两个方法读写属性。用
户不用关心读写方法了
</li>
<li>事实上，property不是函数，是类的实例，property对象
<ul class="org-ul">
<li>该类有一些诨名称为“神器方法(magic methods)”，学名称为“特别方法（special names）”完成
</li>
</ul>
<p>
工作
</p>
<ul class="org-ul">
<li>这些方法是__get__,__set__,
和__delete__
</li>
</ul>
</li>
<li>以上三个方法定义了描述器协议(descriptor protocol)
<ul class="org-ul">
<li>实现了这三个方法任一个方法的对象，称为descriptor。
<ul class="org-ul">
<li>按python习惯，或许可以称为descriptable object：）
</li>
</ul>
</li>
</ul>
</li>
<li>描述器特别处在于，它控制对属性的读写访问
</li>
<li>阅读:
<ul class="org-ul">
<li><a href="https://docs.python.org/3/howto/descriptor.html">https://docs.python.org/3/howto/descriptor.html</a>
</li>
</ul>
</li>
</ul>
</div>
</li>

<li><a id="sec-6-2-4-1-2" name="sec-6-2-4-1-2"></a>装饰器：另一种创建property方法<br  /><div class="outline-text-6" id="text-6-2-4-1-2">
<ul class="org-ul">
<li>新的property语法用到所谓装饰器(decorator)，返回property对象
<ul class="org-ul">
<li>装饰器是所谓语法糖衣(syntax sugar, constuctor like [])
</li>
</ul>
</li>
<li>将@property放在方法头上
</li>
<li>免去给私有属性加下划线的麻烦
</li>
<li>将多个方法整合为一个property
</li>
<li>property的docstring由getter方法中的注释指定
</li>
<li>注意: 所有方法必须同名
</li>
<li>看例子
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Silly</span>:
    <span style="color: #81a2be;">@property</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">silly</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #8abeb7;">"This is a silly property."</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"You are getting silly"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">self</span>._silly

    <span style="color: #81a2be;">@silly.setter</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">silly</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, value<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"You are making silly {}"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>value<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>._silly = value

    <span style="color: #81a2be;">@silly.deleter</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">silly</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Whoah, you killed silly!"</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">del</span> <span style="color: #b5bd68;">self</span>._silly

<span style="color: #f0c674;">s</span> = Silly<span style="color: #c5c8c6;">()</span>
<span style="color: #f0c674;">s.silly</span> = <span style="color: #8abeb7;">"funny"</span>
s.silly

<span style="color: #b294bb;">help</span><span style="color: #c5c8c6;">(</span>s<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">del</span> s.silly
</pre>
</div>

<ul class="org-ul">
<li>该类的property和前面行为一致，可读性更好了，代码看上去也更优雅
</li>
</ul>
</div>
</li>

<li><a id="sec-6-2-4-1-3" name="sec-6-2-4-1-3"></a>method, attribute, property辨析<br  /><div class="outline-text-6" id="text-6-2-4-1-3">
<ul class="org-ul">
<li>如何选择使用属性、方法和property?
</li>
<li>property模糊了属性和方法的界限
</li>
<li>从技术角度看，python中数据、property、方法，都是类的属性。尽管方法是
可调用的(callable)，它依然是属性
<ul class="org-ul">
<li>数据是数据属性
</li>
<li>方法是可调用属性，而property是定制属性。这两点，可以帮助程序员决定，
</li>
</ul>
<p>
设计类时，应该用哪个
</p>
</li>
<li>方法代表动作，由对象发出的动作，或施动于对象的动作
<ul class="org-ul">
<li>方法要做事情
</li>
<li>方法名字一般是动词
</li>
</ul>
</li>
<li>如果类的属性不是动作，那就要决定，是选用标准数据属性，还是properties
<ul class="org-ul">
<li>一般都使数据属性
</li>
<li>数据属性是名词
</li>
<li>若需要对数据属性进行控制访问，用property
</li>
</ul>
</li>
<li>数据属性和property区别就是，当存取property时，会调用特定的方法
</li>
</ul>
</div>
</li>

<li><a id="sec-6-2-4-1-4" name="sec-6-2-4-1-4"></a>manager objects<br  /><div class="outline-text-6" id="text-6-2-4-1-4">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> sys
<span style="color: #b5bd68;">import</span> os
<span style="color: #b5bd68;">from</span> zip_processor <span style="color: #b5bd68;">import</span> ZipProcessor

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">ZipReplace</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, filename, search_string, replace_string<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b294bb;">super</span><span style="color: #c5c8c6;">()</span>.__init__<span style="color: #c5c8c6;">(</span>filename<span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">self</span>.search_string = search_string
        <span style="color: #b5bd68;">self</span>.replace_string = replace_string

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">process_files</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #8abeb7;">"""Perform a search and replace on all files in the temporary directory."""</span>
        <span style="color: #b5bd68;">for</span> filename <span style="color: #b5bd68;">in</span> <span style="color: #b5bd68;">self</span>.temp_directory.iterdir<span style="color: #c5c8c6;">()</span>:
            <span style="color: #b5bd68;">with</span> filename.<span style="color: #b294bb;">open</span> <span style="color: #b5bd68;">as</span> <span style="color: #b294bb;">file</span>:
                <span style="color: #f0c674;">contents</span> = <span style="color: #b294bb;">file</span>.read<span style="color: #c5c8c6;">()</span>

            <span style="color: #f0c674;">contents</span> = contents.replace<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>.search_string, <span style="color: #b5bd68;">self</span>.replace_string<span style="color: #c5c8c6;">)</span>

            <span style="color: #b5bd68;">with</span> filename.<span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"w"</span><span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">as</span> <span style="color: #b294bb;">file</span>:
                <span style="color: #b294bb;">file</span>.write<span style="color: #c5c8c6;">(</span>contents<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">if</span> <span style="color: #b294bb;">__name__</span> == <span style="color: #8abeb7;">"__main__"</span>:
    ZipReplace<span style="color: #c5c8c6;">(</span>*sys.argv<span style="color: #8abeb7;">[</span>1:4<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>.process_zip<span style="color: #c5c8c6;">()</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">=====</span>
<span style="color: #b5bd68;">import</span> os
<span style="color: #b5bd68;">import</span> shutil
<span style="color: #b5bd68;">import</span> zipfile
<span style="color: #b5bd68;">from</span> pathlib <span style="color: #b5bd68;">import</span> Path


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">ZipProcessor</span>:
    <span style="color: #8abeb7;">"""We'll start by demonstrating an inheritance-based solution to this</span>
<span style="color: #8abeb7;">    problem. First we'll modify our original `ZipReplace` class into a</span>
<span style="color: #8abeb7;">    superclass for processing generic ZIP files.</span>
<span style="color: #8abeb7;">    """</span>
    <span style="color: #8abeb7;">"""A program that does a find and replace action for text files stored</span>
<span style="color: #8abeb7;">    in a compressed ZIP file.</span>

<span style="color: #8abeb7;">    1. Unzipping the compressed file.</span>
<span style="color: #8abeb7;">    2. Performing the find and replace action.</span>
<span style="color: #8abeb7;">    3. Zipping up the new files.</span>
<span style="color: #8abeb7;">    """</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, filename, search_string, replace_string<span style="color: #c5c8c6;">)</span>:
        <span style="color: #8abeb7;">""""""</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, zipname<span style="color: #c5c8c6;">)</span>:
        <span style="color: #8abeb7;">""""""</span>
        <span style="color: #b5bd68;">self</span>.zipname = zipname
        <span style="color: #b5bd68;">self</span>.temp_directory = Path<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"unzipped-{}"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>zipname<span style="color: #f0c674;">[</span>:-4<span style="color: #f0c674;">]</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

        <span style="color: #b5bd68;">self</span>.filename = filename
        <span style="color: #b5bd68;">self</span>.search_string = search_string
        <span style="color: #b5bd68;">self</span>.replace_string = replace_string
        <span style="color: #b5bd68;">self</span>.temp_directory = Path<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"unzipped-{}"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>filename<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">zip_find_replace</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">process_zip</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #8abeb7;">""""""</span>
        <span style="color: #b5bd68;">self</span>.unzip_files<span style="color: #c5c8c6;">()</span>
        <span style="color: #b5bd68;">self</span>.process_files<span style="color: #c5c8c6;">()</span>
        <span style="color: #b5bd68;">self</span>.zip_files<span style="color: #c5c8c6;">()</span>

        <span style="color: #8abeb7;">"""An overall 'manager' method for each the three steps. This method</span>
<span style="color: #8abeb7;">        delegates responsibility to other methods.</span>
<span style="color: #8abeb7;">        """</span>
        <span style="color: #b5bd68;">self</span>.unzip_files<span style="color: #c5c8c6;">()</span>
        <span style="color: #b5bd68;">self</span>.find_replace<span style="color: #c5c8c6;">()</span>
        <span style="color: #b5bd68;">self</span>.zip_files<span style="color: #c5c8c6;">()</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">unzip_files</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #8abeb7;">""""""</span>
        <span style="color: #b5bd68;">self</span>.temp_directory.mkdir<span style="color: #c5c8c6;">()</span>
        <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">with zipfile.ZipFile(self.filename) as zip:</span>
        <span style="color: #b5bd68;">with</span> zipfile.ZipFile<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>.zipname<span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">as</span> <span style="color: #b294bb;">zip</span>
            <span style="color: #b294bb;">zip</span>.extractall<span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">str</span><span style="color: #8abeb7;">(</span><span style="color: #b5bd68;">self</span>.temp_directory<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">find_replace</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #8abeb7;">""""""</span>
        <span style="color: #b5bd68;">for</span> filename <span style="color: #b5bd68;">in</span> <span style="color: #b5bd68;">self</span>.temp_directory.iterdir<span style="color: #c5c8c6;">()</span>:
            <span style="color: #b5bd68;">with</span> filename.<span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">()</span> <span style="color: #b5bd68;">as</span> <span style="color: #b294bb;">file</span>:
                <span style="color: #f0c674;">contents</span> = <span style="color: #b294bb;">file</span>.read<span style="color: #c5c8c6;">()</span>
            <span style="color: #f0c674;">contents</span> = contents.replace<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>.search_string, <span style="color: #b5bd68;">self</span>.replace_string<span style="color: #c5c8c6;">)</span>
            <span style="color: #b5bd68;">with</span> filename.<span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'w'</span><span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">as</span> <span style="color: #b294bb;">file</span>:
                <span style="color: #b294bb;">file</span>.write<span style="color: #c5c8c6;">(</span>contents<span style="color: #c5c8c6;">)</span>

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">zip_files</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #8abeb7;">""""""</span>
        <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">with zipfile.ZipFile(self.filename, 'w') as file:</span>
        <span style="color: #b5bd68;">with</span> zipfile.ZipFile<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>.zipname, <span style="color: #8abeb7;">'w'</span><span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">as</span> <span style="color: #b294bb;">file</span>:
            <span style="color: #b5bd68;">for</span> filename <span style="color: #b5bd68;">in</span> <span style="color: #b5bd68;">self</span>.temp_directory.iterdir<span style="color: #c5c8c6;">()</span>:
                <span style="color: #b294bb;">file</span>.write<span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">str</span><span style="color: #8abeb7;">(</span>filename<span style="color: #8abeb7;">)</span>, filename.name<span style="color: #c5c8c6;">)</span>
        shutil.rmtree<span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">str</span><span style="color: #8abeb7;">(</span><span style="color: #b5bd68;">self</span>.temp_directory<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>


<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">main</span><span style="color: #c5c8c6;">()</span>:
    ZipReplace<span style="color: #c5c8c6;">(</span>*sys.argv<span style="color: #8abeb7;">[</span>1:4<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>.zip_find_replace<span style="color: #c5c8c6;">()</span>


<span style="color: #b5bd68;">if</span> <span style="color: #b294bb;">__name__</span> == <span style="color: #8abeb7;">"__main__"</span>:
    main<span style="color: #c5c8c6;">()</span>

<span style="color: #969896; font-style: italic;">#</span><span style="color: #969896; font-style: italic;">====</span>
<span style="color: #b5bd68;">from</span> zip_processor <span style="color: #b5bd68;">import</span> ZipProcessor
<span style="color: #b5bd68;">import</span> sys
<span style="color: #b5bd68;">from</span> PIL <span style="color: #b5bd68;">import</span> Image  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">pip install pillow</span>

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">ScaleZip</span><span style="color: #c5c8c6;">(</span>ZipProcessor<span style="color: #c5c8c6;">)</span>:

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">process_files</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #8abeb7;">"""Scale each image in the directory to 640*480"""</span>
        <span style="color: #b5bd68;">for</span> filename <span style="color: #b5bd68;">in</span> <span style="color: #b5bd68;">self</span>.temp_directory.iterdir<span style="color: #c5c8c6;">()</span>:
            <span style="color: #f0c674;">im</span> = Image.<span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">str</span><span style="color: #8abeb7;">(</span>filename<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
            <span style="color: #f0c674;">scaled</span> = im.resize<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">(</span>640, 480<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
            scaled.save<span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">str</span><span style="color: #8abeb7;">(</span>filename<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">main</span><span style="color: #c5c8c6;">()</span>:
    ScaleZip<span style="color: #c5c8c6;">(</span>*sys.argv<span style="color: #8abeb7;">[</span>1:4<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>.process_zip<span style="color: #c5c8c6;">()</span>

<span style="color: #b5bd68;">if</span> <span style="color: #b294bb;">__name__</span> == <span style="color: #8abeb7;">"__main__"</span>:
    main<span style="color: #c5c8c6;">()</span>
</pre>
</div>
</div>
</li></ol>
</li>

<li><a id="sec-6-2-4-2" name="sec-6-2-4-2"></a>类方法<br  /><div class="outline-text-5" id="text-6-2-4-2">
<ul class="org-ul">
<li>静态方法(static methods)和类方法(class methods)由装饰器@staticmethod
和@classmethod，分别包装(wrapping)对象方法生成
</li>
<li>Class methods are methods that are not bound to an object, but to… a
class!
</li>
<li>类方法用cls指代该类，有如self指代某对象一样
</li>
<li>阅读
<ul class="org-ul">
<li><a href="https://julien.danjou.info/blog/2013/guide-python-static-class-abstract-methods">https://julien.danjou.info/blog/2013/guide-python-static-class-abstract-methods</a> 
</li>
<li><a href="https://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python">https://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python</a>
</li>
<li><a href="https://stackoverflow.com/questions/12179271/meaning-of-classmethod-and-staticmethod-for-beginner">https://stackoverflow.com/questions/12179271/meaning-of-classmethod-and-staticmethod-for-beginner</a>
</li>
<li><a href="https://www.geeksforgeeks.org/class-method-vs-static-method-python/">https://www.geeksforgeeks.org/class-method-vs-static-method-python/</a>
</li>
</ul>
</li>
<li>例子
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">MyClass</span>:
    <span style="color: #81a2be;">@staticmethod</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">smeth</span><span style="color: #c5c8c6;">()</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"This is a static method"</span><span style="color: #c5c8c6;">)</span>

    <span style="color: #81a2be;">@classmethod</span>
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">cmeth</span><span style="color: #c5c8c6;">(</span>cls<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"This is a class method of"</span>, cls<span style="color: #c5c8c6;">)</span>

MyClass.smeth<span style="color: #c5c8c6;">()</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">This is a static method</span>
Myclass.cmeth<span style="color: #c5c8c6;">()</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">This is a class method of &lt;class '__main__.MyClass'&gt;</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-6-2-4-3" name="sec-6-2-4-3"></a>静态方法<br  /><div class="outline-text-5" id="text-6-2-4-3">
<ul class="org-ul">
<li>python中的staticmethod主要是方便将外部函数集成到类体中
</li>
<li>重点在不需要类实例化的情况下调用方法
</li>
<li>Static methods are a special case of methods. Sometimes, you'll
write code that belongs to a class, but that doesn't use the object
itself at all.
</li>
<li>It eases the readability of the code: seeing @staticmethod, we know
that the method does not depend on the state of the object itself
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">example</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">IND = 'ON'</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">class Kls(object):</span>
<span style="color: #969896; font-style: italic;">#     </span><span style="color: #969896; font-style: italic;">""""""</span>
<span style="color: #969896; font-style: italic;">#     </span><span style="color: #969896; font-style: italic;">def __init__(self, data):</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">""""""</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">self.data = data</span>

<span style="color: #969896; font-style: italic;">#     </span><span style="color: #969896; font-style: italic;">@staticmethod</span>
<span style="color: #969896; font-style: italic;">#     </span><span style="color: #969896; font-style: italic;">def checkind():</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">""""""</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">return (IND == 'ON')</span>

<span style="color: #969896; font-style: italic;">#     </span><span style="color: #969896; font-style: italic;">def do_reset(self):</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">""""""</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">if checkind():</span>
<span style="color: #969896; font-style: italic;">#             </span><span style="color: #969896; font-style: italic;">print('Reset done for: {}'.format(self.data))</span>

<span style="color: #969896; font-style: italic;">#     </span><span style="color: #969896; font-style: italic;">def set_db(self):</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">""""""</span>
<span style="color: #969896; font-style: italic;">#         </span><span style="color: #969896; font-style: italic;">if checkind():</span>
<span style="color: #969896; font-style: italic;">#             </span><span style="color: #969896; font-style: italic;">self.db = 'New db connection'</span>
<span style="color: #969896; font-style: italic;">#             </span><span style="color: #969896; font-style: italic;">print("DB connection made for: {}".format(self.data))</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">ik1 = Kls(12)</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">ik1.do_reset()</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">ik1.set_db()</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">print(ik1.checkind())</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">print(Kls.checkind())</span>
</pre>
</div>
</div>
</li></ol>
</div>

<div id="outline-container-sec-6-2-5" class="outline-4">
<h4 id="sec-6-2-5"><span class="section-number-4">6.2.5</span> 案例2： 房地产管理应用程序</h4>
<div class="outline-text-4" id="text-6-2-5">
<ul class="org-ul">
<li>创建一个房地产管理应用，让中介管理出售和出租的资产
<ul class="org-ul">
<li>有两种资产：公寓和独栋。中介录入资产信息，列出所有可用资产，标记资
产为已售或已租。资产一旦售出就不考虑编辑更新其信息了
</li>
<li>使用python命令行界面管理应用
</li>
</ul>
</li>
<li>细读需求，可以找出些许名词，它们或许就是潜在的应用里的类。需要表示资
产，独栋和公寓是两个类，租和售也不同
</li>
<li>主要考虑使用继承技术
</li>
<li>House, Apartment是Property的子类，Property是父类
</li>
<li>UML设计图
</li>
</ul>
<p>
<a href="./py/agent.py">源文件</a>
</p>
</div>
</div>

<div id="outline-container-sec-6-2-6" class="outline-4">
<h4 id="sec-6-2-6"><span class="section-number-4">6.2.6</span> 案例3: 计算多边形边长</h4>
<div class="outline-text-4" id="text-6-2-6">
<ul class="org-ul">
<li>面向对象分析设计，何时使用oop?
</li>
<li>面向对象编程范式下，分析、设计人员
<ul class="org-ul">
<li>首先识别出问题领域(domain-driven programming)的对象
</li>
<li>再识别、设计每个对象的属性、方法，及对象间交互联系
</li>
<li>通过以上步骤，为问题领域建模
</li>
</ul>
</li>
<li>对象既有数据（属性），又有行为（方法）
<ul class="org-ul">
<li>如果仅需要数据，完全可以将数据存储到列表、集合、字典中
</li>
<li>如果仅需要行为，而不关心数据存储，那函数就够了
</li>
</ul>
</li>
<li>一般编程思路
<ul class="org-ul">
<li>首先会想到使用哪些数据，会把这些数据存入变量
</li>
<li>慢慢地，会发现，总会把相关的一组数据传入某些函数处理
</li>
<li>这时，就应该考虑，把这些变量、函数组合起来，进一步抽象为一个对象
</li>
<li>慢慢的，会发现对象之间的关系，考虑将对象归类，将类构造为继承层次
</li>
</ul>
</li>
<li>此时，应该回到分析之出，假设自己，一开始就考虑问题领域里应该有哪些对
象。逐渐的，习惯这种思路之后，遇到问题后，首先会考虑，问题领域中有哪
些对象，这些对象如何交互实现了各种功能。这就是面向对象分析与设计
</li>
<li>举例： 计算多边形边长，两种编程范式对比
<ul class="org-ul">
<li>注意代码可读性。
</li>
</ul>
</li>
<li>源码: <a href="./py/polygons.py">计算多边形边长</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-6-2-7" class="outline-4">
<h4 id="sec-6-2-7"><span class="section-number-4">6.2.7</span> 案例4: Modeling a <i>Document</i> class that might be used in a text editor or word processor</h4>
<div class="outline-text-4" id="text-6-2-7">
<ul class="org-ul">
<li>What objects, funcitons, or properties should it have?
</li>
<li>./py/docu
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> gui编程</h3>
<div class="outline-text-3" id="text-6-3">
<p>
自学tkinter
</p>
</div>
</div>

<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> <span class="todo TODO">TODO</span> Event-driven programming</h3>
</div>
</div>


<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> 第七章　异常</h2>
<div class="outline-text-2" id="text-7">
<ul class="org-ul">
<li>写程序时，应区分正常情况事件和异常情况事件
</li>
<li>异常事件可能是错误(errors)，还可能是发生了预想之外的情况
</li>
<li>为处理异常情况，初步想法是用条件表达式判断各种可能的异常情况
</li>
<li>但这种处理方式效率低，缺乏变通，很难覆盖所有异常情况，导致程序频出意
外
</li>
<li>python提供了一套处理异常的方法，创建、弹出、并处理异常
</li>
</ul>
</div>

<div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> 异常对象</h3>
<div class="outline-text-3" id="text-7-1">
<ul class="org-ul">
<li>Python用异常对象(exception objects)代表异常情况
<ul class="org-ul">
<li>出现错误，异常对象爆出异常(raises an exception)
</li>
<li>如果该异常对象没有得到处理，程序终止，返回回溯(traceback)或错误提
示。回溯就是异常的输出结果，从下向上读
</li>
</ul>
</li>
<li>其理念是当出错时，自动弹出异常
</li>
<li><a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy">python异常类层次关系</a>:
BaseException,SystemExit/KeyboardInterrupt/GeneratorExit/Exception-Most
Ohter Exception
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> 爆出异常</h3>
<div class="outline-text-3" id="text-7-2">
<ul class="org-ul">
<li>使用raise和一个异常类或异常对象，即可爆出异常
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">raise</span> <span style="color: #81a2be;">Exception</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#29190;&#20986;&#36890;&#29992;&#24322;&#24120;</span>

<span style="color: #b5bd68;">raise</span> <span style="color: #81a2be;">Exception</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'hyperdrive overload'</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#29190;&#20986;&#24322;&#24120;&#65292;&#38468;&#38169;&#35823;&#25552;&#31034;</span>
<span style="color: #b5bd68;">raise</span> <span style="color: #81a2be;">ArithmeticError</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3"><span class="section-number-3">7.3</span> 自定义异常</h3>
<div class="outline-text-3" id="text-7-3">
<ul class="org-ul">
<li>python自定义了若干异常类，描述了很大一部分异常情况
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> exceptions

<span style="color: #b294bb;">dir</span><span style="color: #c5c8c6;">(</span>exceptions<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26597;&#30475;&#20869;&#32622;&#24322;&#24120;&#31867;</span>
</pre>
</div>

<ul class="org-ul">
<li>尽管有如此丰富的内置异常类，然还有不敷用之时。这就需要程序员自定义异
常类
</li>
<li>定义异常类和其他类定义方法一样，但要求自定义异常类必须是Exception子
类
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">SomeCustomException</span><span style="color: #c5c8c6;">(</span><span style="color: #81a2be;">Exception</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">pass</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4"><span class="section-number-3">7.4</span> 捕捉异常的结构</h3>
<div class="outline-text-3" id="text-7-4">
<ul class="org-ul">
<li>处理异常称为捕捉异常(trapping or catching the exceptions)
</li>
<li>使用try&#x2026;except&#x2026;finally子句(clause,子句是语句的一部分，几个子句组
合称为语句）捕捉异常。
</li>
</ul>
</div>

<div id="outline-container-sec-7-4-1" class="outline-4">
<h4 id="sec-7-4-1"><span class="section-number-4">7.4.1</span> 基本结构</h4>
<div class="outline-text-4" id="text-7-4-1">
<pre class="example">
try:
    try块    # 受监控、可能出意外的语句，
except Exception1:　　　# 异常情况１,exception1
    except 块１          # 处理异常情况１的语句
except Exception2:      # 异常情况2,exception2
    except 块２          # 处理异常情况2的语句
...                     # 直至n
#  finally子句中的语句块，无论是否发生异常都会执行，
#  常用来做一些清理工作以及释放try语句中申请占用的资源
finally:
    finally块           # 无论如何都会执行的语句
</pre>

<ul class="org-ul">
<li>例:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">x</span>  = 10
<span style="color: #f0c674;">y</span> = 0
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x/y<span style="color: #c5c8c6;">)</span> <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Error&#65292;&#24322;&#24120;&#27809;&#26377;&#22788;&#29702;&#30340;&#24773;&#20917;&#65292;&#25253;&#38169;</span>

<span style="color: #b5bd68;">try</span>:
    <span style="color: #f0c674;">x</span> = 10
    <span style="color: #f0c674;">y</span> = 0
exception ZeroDivisioinError:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"The second number can't be zero!"</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>用if条件表达式来判断异常，在上例情况是可行的
</li>
<li>但如果有十种异常情况，就需要至少十个if条件表达式，程序会很乱。而使用
try&#x2026;except结构会十分清晰
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-7-4-2" class="outline-4">
<h4 id="sec-7-4-2"><span class="section-number-4">7.4.2</span> 多个except子句</h4>
<div class="outline-text-4" id="text-7-4-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">try</span>:
    <span style="color: #f0c674;">x</span> = 10
    <span style="color: #f0c674;">y</span> = 0
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x/y<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">except</span> <span style="color: #81a2be;">ZeroDivisionError</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"The second number can't be zero!"</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">except</span> <span style="color: #81a2be;">TypeError</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"That wasn't a number, was it?"</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">except</span> <span style="color: #81a2be;">NameError</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"No such name!"</span><span style="color: #c5c8c6;">)</span>


<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#19968;&#20010;&#23376;&#21477;&#25429;&#25417;&#22810;&#20010;&#24322;&#24120;&#65292;&#22312;&#19968;&#20010;&#35821;&#21477;&#22359;&#20013;&#22788;&#29702;&#22810;&#20010;&#24322;&#24120;</span>
<span style="color: #b5bd68;">try</span>:
    <span style="color: #f0c674;">x</span> = 10
    <span style="color: #f0c674;">y</span> = 0
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x/y<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">except</span> <span style="color: #c5c8c6;">(</span><span style="color: #81a2be;">ZeroDivisionError</span>, <span style="color: #81a2be;">TypeError</span>, <span style="color: #81a2be;">NameError</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"There is definitly something wrong!"</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-4-3" class="outline-4">
<h4 id="sec-7-4-3"><span class="section-number-4">7.4.3</span> 访问异常对象</h4>
<div class="outline-text-4" id="text-7-4-3">
<ul class="org-ul">
<li>可以except子句中访问异常对象。
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">try</span>:
    <span style="color: #f0c674;">x</span> = 10
    <span style="color: #f0c674;">y</span> = 0
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x/y<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">except</span> <span style="color: #c5c8c6;">(</span><span style="color: #81a2be;">ZeroDivisionError</span>, <span style="color: #81a2be;">TypeError</span><span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">as</span> e:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>e<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>尽管如此多异常类供使用，但有些没考虑到的异常依然能穿透try&#x2026;except语
句，突然冒出来
</li>
<li>为万全计，想捕捉所有异常，那么仅写except子句，而不要写异常类名
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">try</span>:
    <span style="color: #f0c674;">x</span> = 10
    <span style="color: #f0c674;">y</span> = 0
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x/y<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">except</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Something wrong happened..."</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>捕捉所有异常并不是一个好方法，仅是推脱。好办法是预先考虑尽可能多异常，
安全的处理它们，而不是一股脑推给except。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-7-4-4" class="outline-4">
<h4 id="sec-7-4-4"><span class="section-number-4">7.4.4</span> else子句</h4>
<div class="outline-text-4" id="text-7-4-4">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">try</span>:
    <span style="color: #f0c674;">x</span> = 10
    <span style="color: #f0c674;">y</span> = 0
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x/y<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">except</span> <span style="color: #81a2be;">NameError</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Unknown variable"</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">except</span> ZeroDivisioinError:
    pritn<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Zero division"</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">else</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"That went well!"</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#24403;&#27809;&#26377;&#24322;&#24120;&#21457;&#29983;&#26102;&#65292;&#20570;&#20123;&#22788;&#29702;</span>
<span style="color: #b5bd68;">finally</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Cleaning up."</span><span style="color: #c5c8c6;">)</span>     <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#26080;&#35770;&#24322;&#24120;&#21457;&#29983;&#19982;&#21542;&#65292;finally&#37117;&#20250;&#25191;&#34892;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-4-5" class="outline-4">
<h4 id="sec-7-4-5"><span class="section-number-4">7.4.5</span> 例子</h4>
<div class="outline-text-4" id="text-7-4-5">
<ul class="org-ul">
<li>We'll desige a simple central authentication and authorization(auth)
system. The entire system will be placed in one module, and other
code will be able to query that module object for authentication and
authorization purpose.
</li>
<li>in ./py/auth
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-7-5" class="outline-3">
<h3 id="sec-7-5"><span class="section-number-3">7.5</span> 调试和测试</h3>
<div class="outline-text-3" id="text-7-5">
<ul class="org-ul">
<li>了解、自学debug and test
<ul class="org-ul">
<li>debug: pdb
</li>
<li>test: unittest, pytest etc.
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> 第八章　文件</h2>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li>为长期保存数据，须将数据以文件形式存储到磁盘中
</li>
<li>文件分为文本文件、二进制文件。
</li>
<li>文件操作流程：
<ol class="org-ol">
<li>打开文件并创建文件对象
</li>
<li>通过文件对象对文件内容进行读取、写入、修改、删除
</li>
<li>保存文件，关闭文件对象
</li>
</ol>
</li>
</ul>
</div>

<div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> 打开文件</h3>
<div class="outline-text-3" id="text-8-1">
<ul class="org-ul">
<li>使用open(name[, mode[, buffering]])函数打开文件。
<ul class="org-ul">
<li>Extended Backus-Naur form
</li>
<li>name是必要(madatory)参数，mode和buffering是可选(optional)参数
</li>
<li>该函数返回一个文件对象。
</li>
</ul>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">f</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span>r<span style="color: #8abeb7;">'c:\text\somefile.txt'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>自此，f即代表该文件。
</li>
</ul>
</div>

<div id="outline-container-sec-8-1-1" class="outline-4">
<h4 id="sec-8-1-1"><span class="section-number-4">8.1.1</span> 文件打开模式</h4>
<div class="outline-text-4" id="text-8-1-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">值</td>
<td class="left">说明</td>
</tr>

<tr>
<td class="left">'r'</td>
<td class="left">只读</td>
</tr>

<tr>
<td class="left">'w'</td>
<td class="left">写入</td>
</tr>

<tr>
<td class="left">'a'</td>
<td class="left">追加内容</td>
</tr>

<tr>
<td class="left">'b'</td>
<td class="left">二进制模式（可与其他模式组合）</td>
</tr>

<tr>
<td class="left">'+'</td>
<td class="left">读/写模式(可以组合其他模式)</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>一般,python假设处理的是文本文件，如处理二进制文件需要明确指定二进制
模式
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-8-1-2" class="outline-4">
<h4 id="sec-8-1-2"><span class="section-number-4">8.1.2</span> 缓存</h4>
<div class="outline-text-4" id="text-8-1-2">
<ul class="org-ul">
<li>0 不使用缓存
</li>
<li>1 使用缓存
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2"><span class="section-number-3">8.2</span> 文件操作</h3>
<div class="outline-text-3" id="text-8-2">
</div><div id="outline-container-sec-8-2-1" class="outline-4">
<h4 id="sec-8-2-1"><span class="section-number-4">8.2.1</span> 读写文件内容</h4>
<div class="outline-text-4" id="text-8-2-1">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">f</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'somefile.txt'</span>, <span style="color: #8abeb7;">'w'</span><span style="color: #c5c8c6;">)</span>
f.write<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'1'</span><span style="color: #c5c8c6;">)</span>
f.write<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'2'</span><span style="color: #c5c8c6;">)</span>
f.close<span style="color: #c5c8c6;">()</span>

<span style="color: #f0c674;">f.</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'somefile.txt'</span>, <span style="color: #8abeb7;">'r'</span><span style="color: #c5c8c6;">)</span>
f.read<span style="color: #c5c8c6;">(</span>4<span style="color: #c5c8c6;">)</span>
f.read<span style="color: #c5c8c6;">()</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#25512;&#33616;&#19979;&#38754;&#36825;&#31181;&#20889;&#27861;</span>
<span style="color: #b5bd68;">with</span> <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'somefile.txt'</span>, <span style="color: #8abeb7;">'w'</span><span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">as</span> f:
    f.write<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Hello,'</span><span style="color: #c5c8c6;">)</span>
    f.write<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'World!'</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-2-2" class="outline-4">
<h4 id="sec-8-2-2"><span class="section-number-4">8.2.2</span> 按行读写文件</h4>
<div class="outline-text-4" id="text-8-2-2">
<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">with</span> <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'sample.txt'</span>,<span style="color: #8abeb7;">'r'</span><span style="color: #c5c8c6;">)</span> <span style="color: #b5bd68;">as</span> f:
    <span style="color: #b5bd68;">while</span> <span style="color: #81a2be;">True</span>:
        <span style="color: #f0c674;">line</span> = f.readline<span style="color: #c5c8c6;">()</span>
        <span style="color: #b5bd68;">if</span> line == <span style="color: #8abeb7;">''</span>:
            breal
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>line, end=<span style="color: #8abeb7;">''</span><span style="color: #c5c8c6;">)</span>


<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">sample.txt</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Welcome to this file</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">There is nothing here except</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">this strange line</span>

<span style="color: #f0c674;">f</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span>r<span style="color: #8abeb7;">'c:\text\sample.txt'</span><span style="color: #c5c8c6;">)</span>
f.read<span style="color: #c5c8c6;">(</span>7<span style="color: #c5c8c6;">)</span>
f.read<span style="color: #c5c8c6;">(</span>4<span style="color: #c5c8c6;">)</span>
f.close<span style="color: #c5c8c6;">()</span>

<span style="color: #f0c674;">f</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span>r<span style="color: #8abeb7;">'c:\text\sample.txt'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>f.read<span style="color: #8abeb7;">()</span><span style="color: #c5c8c6;">)</span>
f.close<span style="color: #c5c8c6;">()</span>

<span style="color: #f0c674;">f</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span>r<span style="color: #8abeb7;">'c:\text\sample.txt'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">for</span> i <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>3<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">str</span><span style="color: #8abeb7;">(</span>i<span style="color: #8abeb7;">)</span> + <span style="color: #8abeb7;">":"</span> + f.readline<span style="color: #8abeb7;">()</span><span style="color: #c5c8c6;">)</span>
f.close<span style="color: #c5c8c6;">()</span>

<span style="color: #b5bd68;">import</span> pprint
pprint.pprint<span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">open</span><span style="color: #8abeb7;">(</span>r<span style="color: #8abeb7;">'c:\text\sample.txt'</span><span style="color: #8abeb7;">)</span>.readlines<span style="color: #8abeb7;">()</span><span style="color: #c5c8c6;">)</span> <span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">file object is being closed automatically.</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">this</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">is no</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">haiku</span>
<span style="color: #f0c674;">lines</span><span style="color: #c5c8c6;">[</span>1<span style="color: #c5c8c6;">]</span> = <span style="color: #8abeb7;">"isn't a\n"</span>
<span style="color: #f0c674;">f</span> = oepn<span style="color: #c5c8c6;">(</span>r<span style="color: #8abeb7;">'c:\text\sample.txt'</span>, <span style="color: #8abeb7;">'w'</span><span style="color: #c5c8c6;">)</span>
f.writelines<span style="color: #c5c8c6;">(</span>lines<span style="color: #c5c8c6;">)</span>
f.close<span style="color: #c5c8c6;">()</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#19968;&#27425;&#22788;&#29702;&#19968;&#20010;&#23383;&#31526;</span>
<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">process</span><span style="color: #c5c8c6;">(</span>string<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Processing: '</span>, string<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">f</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span>filename<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">while</span> <span style="color: #81a2be;">True</span>:
   <span style="color: #f0c674;">char</span> = f.read<span style="color: #c5c8c6;">(</span>1<span style="color: #c5c8c6;">)</span>
   <span style="color: #b5bd68;">if</span> <span style="color: #b5bd68;">not</span> char: 
        <span style="color: #b5bd68;">break</span>
   process<span style="color: #c5c8c6;">(</span>char<span style="color: #c5c8c6;">)</span>
f.close<span style="color: #c5c8c6;">()</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#19968;&#27425;&#22788;&#29702;&#19968;&#34892;</span>
<span style="color: #f0c674;">f</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span>filename<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">while</span> <span style="color: #81a2be;">True</span>:
   <span style="color: #f0c674;">line</span> = f.readline<span style="color: #c5c8c6;">()</span>
   <span style="color: #b5bd68;">if</span> <span style="color: #b5bd68;">not</span> line: 
        <span style="color: #b5bd68;">break</span>
   process<span style="color: #c5c8c6;">(</span>line<span style="color: #c5c8c6;">)</span>
f.close<span style="color: #c5c8c6;">()</span>

<span style="color: #969896; font-style: italic;"># </span>
<span style="color: #f0c674;">f</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span>filename<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">for</span> char <span style="color: #b5bd68;">in</span> f.read<span style="color: #c5c8c6;">()</span>:
    process<span style="color: #c5c8c6;">(</span>char<span style="color: #c5c8c6;">)</span>
f.close<span style="color: #c5c8c6;">()</span>

<span style="color: #f0c674;">f</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span>filename<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">for</span> line <span style="color: #b5bd68;">in</span> f.readlines<span style="color: #c5c8c6;">()</span>:
    process<span style="color: #c5c8c6;">(</span>line<span style="color: #c5c8c6;">)</span>
f.close<span style="color: #c5c8c6;">()</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Lazy Line Iteration with fileinput</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">lazy line iteration&#65292;&#25152;&#35859;&#8220;&#24816;&#24615;&#8221;&#25351;&#19968;&#27425;&#35835;&#20837;&#25991;&#20214;&#37096;&#20998;&#20869;&#23481;&#65292;&#36991;&#20813;&#35835;&#20837;&#25972;&#20010;&#25991;&#20214;&#21344;&#29992;&#22823;&#37327;&#20869;&#23384;</span>
<span style="color: #b5bd68;">import</span> fileinput
<span style="color: #b5bd68;">for</span> line <span style="color: #b5bd68;">in</span> fileinput.<span style="color: #b294bb;">input</span><span style="color: #c5c8c6;">(</span>filename<span style="color: #c5c8c6;">)</span>:
    process<span style="color: #c5c8c6;">(</span>line<span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">file objects are iterable</span>
<span style="color: #f0c674;">f</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span>filename<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">for</span> line <span style="color: #b5bd68;">in</span> f:
    process<span style="color: #c5c8c6;">(</span>line<span style="color: #c5c8c6;">)</span>
f.close

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Iterating over a file without storing the file object in a variable</span>
<span style="color: #b5bd68;">for</span> line <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span>filename<span style="color: #c5c8c6;">)</span>:
    process<span style="color: #c5c8c6;">(</span>line<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>上下文(context)管理关键字with自动管理资源，不论何种原因跳出with块，
总能保证文件正确关闭
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-8-2-3" class="outline-4">
<h4 id="sec-8-2-3"><span class="section-number-4">8.2.3</span> 读写二进制文件、操作目录</h4>
<div class="outline-text-4" id="text-8-2-3">
</div><ol class="org-ol"><li><a id="sec-8-2-3-1" name="sec-8-2-3-1"></a>读写二进制文件<br  /><div class="outline-text-5" id="text-8-2-3-1">
<ul class="org-ul">
<li>使用pickle模块
<ul class="org-ul">
<li>pickle是常用且速度快的二进制文件序列化模块
</li>
<li>使用pickle进行对象序列化和二进制文件读写
</li>
</ul>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> pickle

<span style="color: #b294bb;">dir</span><span style="color: #c5c8c6;">(</span>pickle<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#26597;&#30475;pickle&#27169;&#22359;&#23646;&#24615;</span>

<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#23450;&#20041;&#25968;&#25454;</span>
<span style="color: #f0c674;">f</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'sample_pickle.dat'</span>, <span style="color: #8abeb7;">'wb'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">n</span> = 7
<span style="color: #f0c674;">i</span> = 13000000
<span style="color: #f0c674;">a</span> = 99.056
<span style="color: #f0c674;">s</span> = <span style="color: #8abeb7;">'&#20013;&#21326;&#20154;&#27665;&#20849;&#21644;&#22269; abc 123'</span>
<span style="color: #f0c674;">lst</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">[</span>1, 2, 3<span style="color: #8abeb7;">]</span>, <span style="color: #8abeb7;">[</span>40, 50, 60<span style="color: #8abeb7;">]</span>, <span style="color: #8abeb7;">[</span>7, 8, 9<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">tpl</span> = <span style="color: #c5c8c6;">(</span>-5, 10, 8<span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">clctn</span> = <span style="color: #c5c8c6;">{</span>4, 5, 6<span style="color: #c5c8c6;">}</span>
<span style="color: #f0c674;">dct</span> = <span style="color: #c5c8c6;">{</span><span style="color: #8abeb7;">'a'</span>: <span style="color: #8abeb7;">'apple'</span>, <span style="color: #8abeb7;">'b'</span>: <span style="color: #8abeb7;">'banana'</span>, <span style="color: #8abeb7;">'g'</span>: <span style="color: #8abeb7;">'grape'</span>, <span style="color: #8abeb7;">'o'</span>: <span style="color: #8abeb7;">'orange'</span><span style="color: #c5c8c6;">}</span>

<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#23558;&#25968;&#25454;&#20889;&#20837;&#20108;&#36827;&#21046;&#25991;&#20214;</span>
<span style="color: #b5bd68;">try</span>:
    pickle.dump<span style="color: #c5c8c6;">(</span>n, f<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#36716;&#20648;</span>
    pickle.dump<span style="color: #c5c8c6;">(</span>i, f<span style="color: #c5c8c6;">)</span>
    pickle.dump<span style="color: #c5c8c6;">(</span>a, f<span style="color: #c5c8c6;">)</span>
    pickle.dump<span style="color: #c5c8c6;">(</span>s, f<span style="color: #c5c8c6;">)</span>
    pickle.dump<span style="color: #c5c8c6;">(</span>lst, f<span style="color: #c5c8c6;">)</span>
    pickle.dump<span style="color: #c5c8c6;">(</span>tpl, f<span style="color: #c5c8c6;">)</span>
    pickle.dump<span style="color: #c5c8c6;">(</span>clctn, f<span style="color: #c5c8c6;">)</span>
    pickle.dump<span style="color: #c5c8c6;">(</span>dct, f<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">except</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'Writing file exception'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">finally</span>:
    f.close<span style="color: #c5c8c6;">()</span>

<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#20174;&#20108;&#36827;&#21046;&#25991;&#20214;&#35835;&#20837;&#25968;&#25454;&#65292;&#24182;&#36755;&#20986;&#21040;&#23631;&#24149;</span>
<span style="color: #b5bd68;">try</span>:
    <span style="color: #f0c674;">f2</span> = <span style="color: #b294bb;">open</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'sample_pickle.dat'</span>, <span style="color: #8abeb7;">'rb'</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #f0c674;">n</span> = pickle.load<span style="color: #c5c8c6;">(</span>f2<span style="color: #c5c8c6;">)</span>
    <span style="color: #f0c674;">i</span> = 0
    <span style="color: #b5bd68;">while</span> i&lt;n:
        <span style="color: #f0c674;">x</span> = pickle.load<span style="color: #c5c8c6;">(</span>f2<span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>x<span style="color: #c5c8c6;">)</span>
        <span style="color: #f0c674;">i</span> += 1
<span style="color: #b5bd68;">except</span> <span style="color: #81a2be;">Exception</span> <span style="color: #b5bd68;">as</span> e:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>e<span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">finally</span>:
    f2.close<span style="color: #c5c8c6;">()</span>
</pre>
</div>

<ul class="org-ul">
<li>打开关闭文件，用with关键字，更佳
</li>
</ul>
</div>
</li>

<li><a id="sec-8-2-3-2" name="sec-8-2-3-2"></a>操作目录<br  /><div class="outline-text-5" id="text-8-2-3-2">
<ul class="org-ul">
<li>需要处理文件路径，使用os.path模块中的对象和方法
</li>
<li>os.path模块提供大量用于路径判断、切分、连接及文件夹遍历方法
</li>
<li>例： 查找特定后缀文件
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> os

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">dir(os.path)</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">[</span>fname <span style="color: #b5bd68;">for</span> fname <span style="color: #b5bd68;">in</span> os.listdir<span style="color: #f0c674;">(</span>os.getcwd<span style="color: #b5bd68;">()</span><span style="color: #f0c674;">)</span> <span style="color: #b5bd68;">if</span> os.path.isfile<span style="color: #f0c674;">(</span>fname<span style="color: #f0c674;">)</span> <span style="color: #b5bd68;">and</span> fname.endswith<span style="color: #f0c674;">(</span><span style="color: #8abeb7;">'.org'</span><span style="color: #f0c674;">)</span><span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>例： 遍历文件夹
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> os

<span style="color: #b5bd68;">for</span> root, dirs, files <span style="color: #b5bd68;">in</span> os.walk<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"."</span>, topdown=<span style="color: #81a2be;">False</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">for</span> name <span style="color: #b5bd68;">in</span> files:
        <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">print(os.path.join(root, name))</span>
        <span style="color: #b5bd68;">pass</span>
    <span style="color: #b5bd68;">for</span> name <span style="color: #b5bd68;">in</span> dirs:
        <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">print(os.path.join(root, name))</span>
        <span style="color: #b5bd68;">pass</span>
</pre>
</div>
</div>
</li>

<li><a id="sec-8-2-3-3" name="sec-8-2-3-3"></a>练习<br  /><div class="outline-text-5" id="text-8-2-3-3">
<ul class="org-ul">
<li>简单爬取网页、解析文本程序
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">from</span> urllib.request <span style="color: #b5bd68;">import</span> urlopen
<span style="color: #b5bd68;">from</span> BeautifulSoup <span style="color: #b5bd68;">import</span> BeautifulSoup  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">&#38656;&#33258;&#34892;&#23433;&#35013;BeautifulSoup&#21253;</span>

<span style="color: #f0c674;">html</span> = urlopen<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'http://python.org/community/jobs'</span><span style="color: #c5c8c6;">)</span>.read<span style="color: #c5c8c6;">()</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">print(html)</span>
<span style="color: #f0c674;">soup</span> = BeautifulSoup<span style="color: #c5c8c6;">(</span>text<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">jobs</span> = <span style="color: #b294bb;">set</span><span style="color: #c5c8c6;">()</span>
<span style="color: #b5bd68;">for</span> header <span style="color: #b5bd68;">in</span> soup<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'h3'</span><span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">links</span> = header<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'a'</span>, <span style="color: #8abeb7;">'reference'</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">if</span> <span style="color: #b5bd68;">not</span> links: 
        <span style="color: #b5bd68;">continue</span>
    <span style="color: #f0c674;">link</span> = links<span style="color: #c5c8c6;">[</span>0<span style="color: #c5c8c6;">]</span>
    jobs.add<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'%s (%s)'</span> % <span style="color: #8abeb7;">(</span>link.string, link<span style="color: #f0c674;">[</span><span style="color: #8abeb7;">'href'</span><span style="color: #f0c674;">]</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'\n'</span>.join<span style="color: #8abeb7;">(</span><span style="color: #b294bb;">sorted</span><span style="color: #f0c674;">(</span>jobs, key=<span style="color: #b5bd68;">lambda</span> s: s.lower<span style="color: #b5bd68;">()</span><span style="color: #f0c674;">)</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</li></ol>
</div>
</div>
</div>


<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> 第九章　高级特性</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1"><span class="section-number-3">9.1</span> iterator</h3>
<div class="outline-text-3" id="text-9-1">
<ul class="org-ul">
<li>Iterable: Any object from which the iter built-in function can
obtain an iterator.  Objects implementing an &#x2013;iter&#x2013; method
returning an <i>iterator</i> are iterable.Python obtains iterators from
iterables.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">s</span> = <span style="color: #8abeb7;">'ABC'</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">the str 'ABC' is the iterable here. </span>
           <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">we don't see it, but there is an iterator behind the curtain.</span>
<span style="color: #b5bd68;">for</span> char <span style="color: #b5bd68;">in</span> s:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>char<span style="color: #c5c8c6;">)</span>

<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">Suppose there is no for statement and we had to emulate the for machinery </span>
<span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">by hand with while loop </span>
<span style="color: #f0c674;">s</span> = <span style="color: #8abeb7;">'ABC'</span>
<span style="color: #f0c674;">it</span> = <span style="color: #b294bb;">iter</span><span style="color: #c5c8c6;">(</span>s<span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">Build an iterator it from the iterable</span>
<span style="color: #b5bd68;">while</span> <span style="color: #81a2be;">True</span>:
    <span style="color: #b5bd68;">try</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">next</span><span style="color: #8abeb7;">(</span>it<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">Repeatedly call next on the iterator to obtain the next item</span>
    <span style="color: #b5bd68;">except</span> <span style="color: #81a2be;">StopIteration</span>:  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">raises StopIteration when there are not further items</span>
        <span style="color: #b5bd68;">del</span> it  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">Release reference to it -- the iterator object is discarded</span>
        <span style="color: #b5bd68;">break</span>  <span style="color: #969896; font-style: italic;">#  </span><span style="color: #969896; font-style: italic;">exit the loop</span>
</pre>
</div>

<ul class="org-ul">
<li>Iterator: Any object that implement the &#x2013;next&#x2013; no-argument method
that returns the next item in a series or raises StopIteration when
there are no more items.  Python iterators also implement the
&#x2013;iter&#x2013; method so they are iterable as well.
</li>
<li>python的迭代器(iterator)是实现了__next__
方法的对象。__next__返回下一个元素，当迭
代器中没有元素时，迭代器爆出Stopiteration异常
<ul class="org-ul">
<li>collections.abc模块中的虚基类Iterator，定义了迭代器协议
</li>
<li>一个迭代器必须有__next__方法
</li>
<li>迭代器必须实现Iterator接口, 即实现next, iter方法
</li>
</ul>
</li>
<li>提供__iter__方法的类称为可迭代的
(iterable),该方法必须返回Iterator对象，该对象必须包含该类中所有元素
</li>
<li>迭代器都在元素中迭代，iter函数一般都返回self
</li>
<li>对比,实现iter方法的对象称为iterable, 实现next方法的对象称为iterator
</li>
<li>iterable是一个拥有可循环遍历其所有元素的对象
</li>
<li>iterator是由next返回的某iterable的一个位置，一些元素已经循环过了，一些还没有
</li>
<li>当元素遍历尽了，爆出StopIteration异常
</li>
<li>迭代器的习惯用法是，for item in iterator/iterable
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Iterable</span>
<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">Fibs</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.a = 0
        <span style="color: #b5bd68;">self</span>.b = 1
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__next__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.a, <span style="color: #b5bd68;">self</span>.b = <span style="color: #b5bd68;">self</span>.b, <span style="color: #b5bd68;">self</span>.a + <span style="color: #b5bd68;">self</span>.b
        <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">self</span>.a
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__iter__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">self</span>

<span style="color: #f0c674;">fibs</span> = Fibs<span style="color: #c5c8c6;">()</span>
<span style="color: #b5bd68;">for</span> f <span style="color: #b5bd68;">in</span> fibs:
    <span style="color: #b5bd68;">if</span> f &gt; 1000:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>f<span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">break</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">&#21478;&#19968;&#20010;&#20363;&#23376;</span>
<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">CapitalIterator</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, string<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.words = <span style="color: #c5c8c6;">[</span>w.capitalize<span style="color: #8abeb7;">()</span> <span style="color: #b5bd68;">for</span> w <span style="color: #b5bd68;">in</span> string.split<span style="color: #8abeb7;">()</span><span style="color: #c5c8c6;">]</span>
        <span style="color: #b5bd68;">self</span>.index = 0

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__next__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">if</span> <span style="color: #b5bd68;">self</span>.index == <span style="color: #b294bb;">len</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>.words<span style="color: #c5c8c6;">)</span>:
            <span style="color: #b5bd68;">raise</span> <span style="color: #81a2be;">StopIteration</span>

        <span style="color: #f0c674;">word</span> = <span style="color: #b5bd68;">self</span>.words<span style="color: #c5c8c6;">[</span><span style="color: #b5bd68;">self</span>.index<span style="color: #c5c8c6;">]</span>
        <span style="color: #b5bd68;">self</span>.index += 1
        <span style="color: #b5bd68;">return</span> word
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__iter__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">return</span> <span style="color: #b5bd68;">self</span>


<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">CapitalIterable</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__init__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>, string<span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.string = string

    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">__iter__</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">return</span> CapitalIterator<span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span>.string<span style="color: #c5c8c6;">)</span>

<span style="color: #f0c674;">ible</span> = CapitalIterable<span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'the quick brown fox jumps over the lazy dog'</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">itor</span> = <span style="color: #b294bb;">iter</span><span style="color: #c5c8c6;">(</span>ible<span style="color: #c5c8c6;">)</span>

<span style="color: #b5bd68;">while</span> <span style="color: #81a2be;">True</span>:
    <span style="color: #b5bd68;">try</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #b294bb;">next</span><span style="color: #8abeb7;">(</span>itor<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">except</span> <span style="color: #81a2be;">StopIteration</span>:
        <span style="color: #b5bd68;">break</span>


<span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> ible:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>i<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2"><span class="section-number-3">9.2</span> generator</h3>
<div class="outline-text-3" id="text-9-2">
<ul class="org-ul">
<li>生成器(generator)是python中较新的内容，和迭代器(iterator)，共同成为
python最有力的技术
</li>
<li>生成器是用正常函数语法定义的迭代器（A generator is a kind of
iterator that is defined with normal syntax）
</li>
<li>Generators are iterators that produce the values of the
expressions passed to yield.
</li>
<li>例:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #f0c674;">nested</span> = <span style="color: #c5c8c6;">[</span><span style="color: #8abeb7;">[</span>1, 2<span style="color: #8abeb7;">]</span>, <span style="color: #8abeb7;">[</span>3, 4<span style="color: #8abeb7;">]</span>, <span style="color: #8abeb7;">[</span>5<span style="color: #8abeb7;">]</span><span style="color: #c5c8c6;">]</span>

<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">flatten</span><span style="color: #c5c8c6;">(</span>nested<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">for</span> sublist <span style="color: #b5bd68;">in</span> nested:
        <span style="color: #b5bd68;">for</span> element <span style="color: #b5bd68;">in</span> sublist:
            <span style="color: #b5bd68;">yield</span> element

<span style="color: #b5bd68;">for</span> num <span style="color: #b5bd68;">in</span> flatten<span style="color: #c5c8c6;">(</span>nested<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>num<span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>包含yield语句的函数称为生成器(Any function that contains a yield
statement is called a generator)
</li>
<li>yield对生成器至关重要
</li>
<li>将yield与return对比
<ul class="org-ul">
<li>return返回一个值，并退出函数
</li>
<li>yield可以返回多个值，一次返回一个。每产生(yield)一个值，函数暂停
(freezes），等待唤醒(reawakened)
</li>
<li>当再次调用该生成器时，函数并不从头执行，而从暂停位置，即yield后面
那行开始执行。当通过循环执行到yield时，再次产生一个值，暂停，等待
下一次唤醒调用
</li>
</ul>
</li>
<li>更深入内容留待课后探索，比如协程(coroutine)
</li>
<li>例：
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">def</span> <span style="color: #de935f;">tally</span><span style="color: #c5c8c6;">()</span>:
    <span style="color: #f0c674;">score</span> = 0
    <span style="color: #b5bd68;">while</span> <span style="color: #81a2be;">True</span>:
        <span style="color: #f0c674;">increment</span> = <span style="color: #b5bd68;">yield</span> score
        <span style="color: #f0c674;">score</span> += increment

<span style="color: #f0c674;">ws</span> = tally<span style="color: #c5c8c6;">()</span>
<span style="color: #f0c674;">bj</span> = tally<span style="color: #c5c8c6;">()</span>
<span style="color: #b294bb;">next</span><span style="color: #c5c8c6;">(</span>ws<span style="color: #c5c8c6;">)</span>
<span style="color: #b294bb;">next</span><span style="color: #c5c8c6;">(</span>bj<span style="color: #c5c8c6;">)</span>

ws.send<span style="color: #c5c8c6;">(</span>3<span style="color: #c5c8c6;">)</span>
bj.send<span style="color: #c5c8c6;">(</span>2<span style="color: #c5c8c6;">)</span>
ws.send<span style="color: #c5c8c6;">(</span>3<span style="color: #c5c8c6;">)</span>
bj.send<span style="color: #c5c8c6;">(</span>4<span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3"><span class="section-number-3">9.3</span> 并发</h3>
<div class="outline-text-3" id="text-9-3">
<ul class="org-ul">
<li>并发(concurrency)技术，指让计算机同时做几件事情
</li>
<li>并发概念简单，但实现复杂，以易出错、难排错而恶名昭彰
</li>
<li>另一方面，有些功能、性能，只有通过并发技术才可能实现，比如web server
</li>
</ul>
</div>

<div id="outline-container-sec-9-3-1" class="outline-4">
<h4 id="sec-9-3-1"><span class="section-number-4">9.3.1</span> 线程</h4>
<div class="outline-text-4" id="text-9-3-1">
<ul class="org-ul">
<li>线程(Threads)。 python的线程就是继承Thread的对象
</li>
<li>例:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">Suddenly, this example vividly exhibits how fast a computer can be.</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">This example has two threads: main threads and InputReader class.</span>
<span style="color: #b5bd68;">from</span> threading <span style="color: #b5bd68;">import</span> Thread

<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">InputReader</span><span style="color: #c5c8c6;">(</span>Thread<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">run</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">self</span>.line_of_text = <span style="color: #b294bb;">input</span><span style="color: #c5c8c6;">()</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Enter some text and press enter: "</span><span style="color: #c5c8c6;">)</span>
<span style="color: #f0c674;">thread</span> = InputReader<span style="color: #c5c8c6;">()</span>
thread.start<span style="color: #c5c8c6;">()</span>

<span style="color: #f0c674;">count</span> = <span style="color: #f0c674;">result</span> = 1
<span style="color: #b5bd68;">while</span> thread.is_alive<span style="color: #c5c8c6;">()</span>:
    <span style="color: #f0c674;">result</span> = count * count
    <span style="color: #f0c674;">count</span> += 1

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Calculated squares up to {0} * {0} = {1}"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>count, result<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"while you typed '{}'"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>thread.line_of_text<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>线程易发问题：共享内存、GIL(global interpreter lock)
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-9-3-2" class="outline-4">
<h4 id="sec-9-3-2"><span class="section-number-4">9.3.2</span> 多进程</h4>
<div class="outline-text-4" id="text-9-3-2">
<ul class="org-ul">
<li>多进程(multiprocessing)
<ul class="org-ul">
<li>用于并行计算(parallel computation)和多核(multiple cores)场景
</li>
<li>多进程使用进程池(pool)或队列控制多进程
</li>
<li>多进程问题在于，进程间通信代价高昂
</li>
</ul>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">from</span> multiprocessing <span style="color: #b5bd68;">import</span> Process, cpu_count
<span style="color: #b5bd68;">import</span> time
<span style="color: #b5bd68;">import</span> os

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">for comparision</span>
<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">from threading import Thread</span>

<span style="color: #969896; font-style: italic;"># </span><span style="color: #969896; font-style: italic;">class MuchCPU(Threads):</span>
<span style="color: #b5bd68;">class</span> <span style="color: #81a2be;">MuchCPU</span><span style="color: #c5c8c6;">(</span>Process<span style="color: #c5c8c6;">)</span>:
    <span style="color: #b5bd68;">def</span> <span style="color: #de935f;">run</span><span style="color: #c5c8c6;">(</span><span style="color: #b5bd68;">self</span><span style="color: #c5c8c6;">)</span>:
        <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span>os.getpid<span style="color: #8abeb7;">()</span><span style="color: #c5c8c6;">)</span>
        <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #c5c8c6;">(</span>200000000<span style="color: #c5c8c6;">)</span>:
            <span style="color: #b5bd68;">pass</span>
<span style="color: #f0c674;">procs</span> = <span style="color: #c5c8c6;">[</span>MuchCPU<span style="color: #8abeb7;">()</span> <span style="color: #b5bd68;">for</span> f <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>cpu_count<span style="color: #f0c674;">()</span><span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">]</span>
<span style="color: #f0c674;">t</span> = time.time<span style="color: #c5c8c6;">()</span>
<span style="color: #b5bd68;">for</span> p <span style="color: #b5bd68;">in</span> procs:
    p.start<span style="color: #c5c8c6;">()</span>
<span style="color: #b5bd68;">for</span> p <span style="color: #b5bd68;">in</span> procs:
    p.join<span style="color: #c5c8c6;">()</span>

<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">'work took {} senconds'</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>time.time<span style="color: #f0c674;">()</span> - t<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-3-3" class="outline-4">
<h4 id="sec-9-3-3"><span class="section-number-4">9.3.3</span> 异步输入输出</h4>
<div class="outline-text-4" id="text-9-3-3">
<ul class="org-ul">
<li>异步(Asynchronous)输入输出AsyncIO是python最前沿(state of the art)的技术
</li>
<li>AsyncIO可以用于并发计算，但其主要是为处理网络输入输入而设计
</li>
<li>例:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-python"><span style="color: #b5bd68;">import</span> asyncio
<span style="color: #b5bd68;">import</span> random

<span style="color: #81a2be;">@asyncio.coroutine</span>
<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">random_sleep</span><span style="color: #c5c8c6;">(</span>counter<span style="color: #c5c8c6;">)</span>:
    <span style="color: #f0c674;">delay</span> = random.random<span style="color: #c5c8c6;">()</span> * 5
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"{} sleeps for {:.2f} seconds"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>counter,delay<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">yield</span> <span style="color: #b5bd68;">from</span> asyncio.sleep<span style="color: #c5c8c6;">(</span>delay<span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"{} awakens"</span>.<span style="color: #b294bb;">format</span><span style="color: #8abeb7;">(</span>counter<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">)</span>

<span style="color: #81a2be;">@asyncio.coroutine</span>
<span style="color: #b5bd68;">def</span> <span style="color: #de935f;">five_sleepers</span><span style="color: #c5c8c6;">()</span>:
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Creating five tasks"</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #f0c674;">tasks</span> = <span style="color: #c5c8c6;">[</span>asyncio.async<span style="color: #8abeb7;">(</span>random_sleep<span style="color: #f0c674;">(</span>i<span style="color: #f0c674;">)</span><span style="color: #8abeb7;">)</span> <span style="color: #b5bd68;">for</span> i <span style="color: #b5bd68;">in</span> <span style="color: #b294bb;">range</span><span style="color: #8abeb7;">(</span>5<span style="color: #8abeb7;">)</span><span style="color: #c5c8c6;">]</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Sleeping after starting five tasks"</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">yield</span> <span style="color: #b5bd68;">from</span> asyncio.sleep<span style="color: #c5c8c6;">(</span>2<span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Waking and waiting for five tasks"</span><span style="color: #c5c8c6;">)</span>
    <span style="color: #b5bd68;">yield</span> <span style="color: #b5bd68;">from</span> asyncio.wait<span style="color: #c5c8c6;">(</span>tasks<span style="color: #c5c8c6;">)</span>

asyncio.get_event_loop<span style="color: #c5c8c6;">()</span>.run_until_complete<span style="color: #c5c8c6;">(</span>five_sleepers<span style="color: #8abeb7;">()</span><span style="color: #c5c8c6;">)</span>
<span style="color: #b5bd68;">print</span><span style="color: #c5c8c6;">(</span><span style="color: #8abeb7;">"Done five tasks"</span><span style="color: #c5c8c6;">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>


<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> 第十章  实验课程</h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1"><span class="section-number-3">10.1</span> 打包程序</h3>
<div class="outline-text-3" id="text-10-1">
<p>
pyinstaller
</p>
</div>
</div>

<div id="outline-container-sec-10-2" class="outline-3">
<h3 id="sec-10-2"><span class="section-number-3">10.2</span> 科学计算与可视化</h3>
<div class="outline-text-3" id="text-10-2">
<ul class="org-ul">
<li>numpy, scipy, matpyplot, pandas
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-10-3" class="outline-3">
<h3 id="sec-10-3"><span class="section-number-3">10.3</span> 机器学习&#x2013;决策树</h3>
</div>

<div id="outline-container-sec-10-4" class="outline-3">
<h3 id="sec-10-4"><span class="section-number-3">10.4</span> 网络编程flask, django</h3>
</div>

<div id="outline-container-sec-10-5" class="outline-3">
<h3 id="sec-10-5"><span class="section-number-3">10.5</span> 数字图像处理</h3>
</div>

<div id="outline-container-sec-10-6" class="outline-3">
<h3 id="sec-10-6"><span class="section-number-3">10.6</span> 自然语言处理</h3>
</div>

<div id="outline-container-sec-10-7" class="outline-3">
<h3 id="sec-10-7"><span class="section-number-3">10.7</span> 语音处理</h3>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
Allen Downey, Jeffrey Elkner, Chris Meyers. <a href="http://openbookproject.net/thinkcs/python/english3e/index.html">How to Think Like a Computer Scientist</a>, Oct,2002
</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: 陈飞 <a href="mailto:dlmucf@163.com">联系作者</a></p>
<p class="date">Created: 2018-02-26 一 21:01</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"></p>
</div>
</body>
</html>
